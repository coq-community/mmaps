<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./../..">Project Website</a>
      <a href="./indexpage.html">Index</a>
      <a href="./toc.html">Table of Contents</a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<div class="code">
</div>

<div class="doc">
<a id="lab75"></a><h1 class="section">Finite Modular Maps: AVL Trees</h1>

<div class="paragraph"> </div>

 Author: Pierre Letouzey (Université de Paris - INRIA),
    adapted from earlier works in Coq Standard Library, see README.md.
    License: LGPL-2.1-only, see file LICENSE. 
<div class="paragraph"> </div>

 This module implements maps using AVL trees.
    It follows the implementation from OCaml's standard library.

<div class="paragraph"> </div>

    See the comments at the beginning of MSetAVL for more details.

<div class="paragraph"> </div>

    Note that we only prove here that the operations below preserve
    the binary search tree invariant (<span class="inlinecode"><a class="idref" href="MMaps.GenTree.html#Props.Bst"><span class="id" title="inductive">Bst</span></a></span>, a.k.a <span class="inlinecode"><a class="idref" href="MMaps.GenTree.html#Props.Ok"><span class="id" title="record">Ok</span></a></span> predicate here),
    but *not* the AVL balancing invariant. Indeed, the former is enough
    to implement the desired interface <span class="inlinecode"><a class="idref" href="MMaps.Raw.html#S"><span class="id" title="module">S</span></a></span>, and ensure observational
    correctness. And proceeding this way is quite lighter. For the
    proofs of AVL balancing, see <span class="inlinecode"><a class="idref" href="MMaps.AVLproofs.html#I"><span class="id" title="module">MMaps.AVLproofs</span></a></span>.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Bool.Bool.html#"><span class="id" title="library">Bool</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Arith.PeanoNat.html#"><span class="id" title="library">PeanoNat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.BinInt.html#"><span class="id" title="library">BinInt</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.funind.FunInd.html#"><span class="id" title="library">FunInd</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#"><span class="id" title="library">Int</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Structures.Orders.html#"><span class="id" title="library">Orders</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Structures.OrdersFacts.html#"><span class="id" title="library">OrdersFacts</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Structures.OrdersLists.html#"><span class="id" title="library">OrdersLists</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MMaps</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MMaps.Utils.html#"><span class="id" title="library">Utils</span></a> <a class="idref" href="MMaps.Interface.html#"><span class="id" title="library">Interface</span></a> <a class="idref" href="MMaps.OrdList.html#"><span class="id" title="library">OrdList</span></a> <a class="idref" href="MMaps.GenTree.html#"><span class="id" title="library">GenTree</span></a>.<br/>

<br/>
<span class="id" title="keyword">Local Set Implicit Arguments</span>.<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Unset</span> <span class="id" title="keyword">Strict</span> <span class="id" title="keyword">Implicit</span>.<br/>
<span class="comment">(*&nbsp;For&nbsp;nicer&nbsp;extraction,&nbsp;we&nbsp;create&nbsp;inductive&nbsp;principles&nbsp;only&nbsp;when&nbsp;needed&nbsp;*)</span><br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Unset</span> <span class="id" title="var">Elimination</span> <span class="id" title="var">Schemes</span>.<br/>

<br/>
</div>

<div class="doc">
Functor of pure functions + separate proofs of invariant
   preservation 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Module</span> <a id="MakeRaw" class="idref" href="#MakeRaw"><span class="id" title="module">MakeRaw</span></a> (<span class="id" title="keyword">Import</span> <span class="id" title="var">I</span>:<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#Int"><span class="id" title="module">Int</span></a>)(<span class="id" title="var">K</span>: <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Structures.Orders.html#OrderedType"><span class="id" title="module">OrderedType</span></a>) &lt;: <a class="idref" href="MMaps.Raw.html#S"><span class="id" title="module">Raw.S</span></a> <a class="idref" href="MMaps.AVL.html#K"><span class="id" title="module">K</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab76"></a><h2 class="section">Functions</h2>

<div class="paragraph"> </div>

<a id="lab77"></a><h3 class="section">Generic trees instantiated with integer height</h3>

<div class="paragraph"> </div>

 We reuse a generic definition of trees where the information
    parameter is a <span class="inlinecode"><span class="id" title="var">Int.t</span></span>. Functions like mem or fold are also
    provided by this generic functor. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Include</span> <a class="idref" href="MMaps.GenTree.html#Ops"><span class="id" title="module">MMaps.GenTree.Ops</span></a> <a class="idref" href="MMaps.AVL.html#K"><span class="id" title="module">K</span></a> <a class="idref" href="MMaps.AVL.html#I"><span class="id" title="module">I</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="MMaps.GenTree.html#PairNotations"><span class="id" title="module">GenTree.PairNotations</span></a>. <span class="comment">(*&nbsp;1 and 2&nbsp;for&nbsp;fst&nbsp;and&nbsp;snd&nbsp;*)</span><br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">lazy_bool_scope</span>.<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">Int_scope</span>.<br/>
<span class="id" title="keyword">Local Notation</span> <a id="MakeRaw.int" class="idref" href="#MakeRaw.int"><span class="id" title="abbreviation">int</span></a> := <a class="idref" href="MMaps.AVL.html#I.t"><span class="id" title="axiom">I.t</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="MakeRaw.Elt" class="idref" href="#MakeRaw.Elt"><span class="id" title="section">Elt</span></a>.<br/>
<span class="id" title="keyword">Variable</span> <a id="MakeRaw.Elt.elt" class="idref" href="#MakeRaw.Elt.elt"><span class="id" title="variable">elt</span></a> : <span class="id" title="keyword">Type</span>.<br/>
<span class="id" title="keyword">Local Notation</span> <a id="MakeRaw.t" class="idref" href="#MakeRaw.t"><span class="id" title="abbreviation">t</span></a> := (<a class="idref" href="MMaps.AVL.html#MakeRaw.tree"><span class="id" title="inductive">tree</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Elt.elt"><span class="id" title="variable">elt</span></a>).<br/>
<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">l</span> <span class="id" title="var">r</span> <span class="id" title="var">m</span> : <a class="idref" href="MMaps.AVL.html#MakeRaw.t"><span class="id" title="abbreviation">t</span></a>.<br/>
<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">e</span> : <a class="idref" href="MMaps.AVL.html#MakeRaw.Elt.elt"><span class="id" title="variable">elt</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab78"></a><h3 class="section">Basic functions on trees: height and cardinal</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="MakeRaw.height" class="idref" href="#MakeRaw.height"><span class="id" title="definition">height</span></a> (<a id="m:3" class="idref" href="#m:3"><span class="id" title="binder">m</span></a> : <a class="idref" href="MMaps.AVL.html#MakeRaw.t"><span class="id" title="abbreviation">t</span></a>) : <a class="idref" href="MMaps.AVL.html#MakeRaw.int"><span class="id" title="abbreviation">int</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MMaps.AVL.html#m:3"><span class="id" title="variable">m</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MMaps.AVL.html#MakeRaw.Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="var">_</span> ⇒ 0<br/>
&nbsp;&nbsp;| <a class="idref" href="MMaps.AVL.html#MakeRaw.Node"><span class="id" title="constructor">Node</span></a> <span class="id" title="var">h</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">h</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab79"></a><h3 class="section">Singleton set</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="MakeRaw.singleton" class="idref" href="#MakeRaw.singleton"><span class="id" title="definition">singleton</span></a> <a id="x:5" class="idref" href="#x:5"><span class="id" title="binder">x</span></a> <a id="e:6" class="idref" href="#e:6"><span class="id" title="binder">e</span></a> := <a class="idref" href="MMaps.AVL.html#MakeRaw.Node"><span class="id" title="constructor">Node</span></a> 1 (<a class="idref" href="MMaps.AVL.html#MakeRaw.Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="var">_</span>) <a class="idref" href="MMaps.AVL.html#x:5"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#e:6"><span class="id" title="variable">e</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="var">_</span>).<br/>

<br/>
</div>

<div class="doc">
<a id="lab80"></a><h3 class="section">Helper functions</h3>

<div class="paragraph"> </div>

 <span class="inlinecode"><a class="idref" href="MMaps.AVL.html#MakeRaw.create"><span class="id" title="definition">create</span></a></span> <span class="inlinecode"><span class="id" title="var">l</span></span> <span class="inlinecode"><a class="idref" href="MMaps.Raw.html#WS.Specs.x"><span class="id" title="variable">x</span></a></span> <span class="inlinecode"><span class="id" title="var">r</span></span> creates a node, assuming <span class="inlinecode"><span class="id" title="var">l</span></span> and <span class="inlinecode"><span class="id" title="var">r</span></span>
    to be balanced and <span class="inlinecode">|<a class="idref" href="MMaps.AVL.html#MakeRaw.height"><span class="id" title="definition">height</span></a></span> <span class="inlinecode"><span class="id" title="var">l</span></span> <span class="inlinecode">-</span> <span class="inlinecode"><a class="idref" href="MMaps.AVL.html#MakeRaw.height"><span class="id" title="definition">height</span></a></span> <span class="inlinecode"><span class="id" title="var">r</span>|</span> <span class="inlinecode">≤</span> <span class="inlinecode">2</span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="MakeRaw.create" class="idref" href="#MakeRaw.create"><span class="id" title="definition">create</span></a> <a id="l:7" class="idref" href="#l:7"><span class="id" title="binder">l</span></a> <a id="x:8" class="idref" href="#x:8"><span class="id" title="binder">x</span></a> <a id="e:9" class="idref" href="#e:9"><span class="id" title="binder">e</span></a> <a id="r:10" class="idref" href="#r:10"><span class="id" title="binder">r</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="MMaps.AVL.html#MakeRaw.Node"><span class="id" title="constructor">Node</span></a> (<a class="idref" href="MMaps.AVL.html#I.max"><span class="id" title="axiom">max</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.AVL.html#l:7"><span class="id" title="variable">l</span></a>) (<a class="idref" href="MMaps.AVL.html#MakeRaw.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.AVL.html#r:10"><span class="id" title="variable">r</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#004c359642fbe9dbd252a6335642f93a"><span class="id" title="notation">+</span></a> 1) <a class="idref" href="MMaps.AVL.html#l:7"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVL.html#x:8"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#e:9"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVL.html#r:10"><span class="id" title="variable">r</span></a>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="MMaps.AVL.html#MakeRaw.bal"><span class="id" title="definition">bal</span></a></span> <span class="inlinecode"><span class="id" title="var">l</span></span> <span class="inlinecode"><a class="idref" href="MMaps.Raw.html#WS.Specs.x"><span class="id" title="variable">x</span></a></span> <span class="inlinecode"><a class="idref" href="MMaps.Raw.html#WS.Specs.e"><span class="id" title="variable">e</span></a></span> <span class="inlinecode"><span class="id" title="var">r</span></span> acts as <span class="inlinecode"><a class="idref" href="MMaps.AVL.html#MakeRaw.create"><span class="id" title="definition">create</span></a></span>, but performs one step of
    rebalancing if necessary, i.e. assumes <span class="inlinecode">|<a class="idref" href="MMaps.AVL.html#MakeRaw.height"><span class="id" title="definition">height</span></a></span> <span class="inlinecode"><span class="id" title="var">l</span></span> <span class="inlinecode">-</span> <span class="inlinecode"><a class="idref" href="MMaps.AVL.html#MakeRaw.height"><span class="id" title="definition">height</span></a></span> <span class="inlinecode"><span class="id" title="var">r</span>|</span> <span class="inlinecode">≤</span> <span class="inlinecode">3</span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="MakeRaw.assert_false" class="idref" href="#MakeRaw.assert_false"><span class="id" title="definition">assert_false</span></a> := <a class="idref" href="MMaps.AVL.html#MakeRaw.create"><span class="id" title="definition">create</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="MakeRaw.bal" class="idref" href="#MakeRaw.bal"><span class="id" title="definition">bal</span></a> <a id="l:11" class="idref" href="#l:11"><span class="id" title="binder">l</span></a> <a id="x:12" class="idref" href="#x:12"><span class="id" title="binder">x</span></a> <a id="d:13" class="idref" href="#d:13"><span class="id" title="binder">d</span></a> <a id="r:14" class="idref" href="#r:14"><span class="id" title="binder">r</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="hl:15" class="idref" href="#hl:15"><span class="id" title="binder">hl</span></a> := <a class="idref" href="MMaps.AVL.html#MakeRaw.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.AVL.html#l:11"><span class="id" title="variable">l</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="hr:16" class="idref" href="#hr:16"><span class="id" title="binder">hr</span></a> := <a class="idref" href="MMaps.AVL.html#MakeRaw.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.AVL.html#r:14"><span class="id" title="variable">r</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#47c9f2ba1df6e1f4ba802291f555d67a"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#hr:16"><span class="id" title="variable">hr</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#004c359642fbe9dbd252a6335642f93a"><span class="id" title="notation">+</span></a>2<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#47c9f2ba1df6e1f4ba802291f555d67a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#47c9f2ba1df6e1f4ba802291f555d67a"><span class="id" title="notation">&lt;?</span></a> <a class="idref" href="MMaps.AVL.html#hl:15"><span class="id" title="variable">hl</span></a> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MMaps.AVL.html#l:11"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MMaps.AVL.html#MakeRaw.Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="MMaps.AVL.html#MakeRaw.assert_false"><span class="id" title="definition">assert_false</span></a> <a class="idref" href="MMaps.AVL.html#l:11"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVL.html#x:12"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#d:13"><span class="id" title="variable">d</span></a> <a class="idref" href="MMaps.AVL.html#r:14"><span class="id" title="variable">r</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MMaps.AVL.html#MakeRaw.Node"><span class="id" title="constructor">Node</span></a> <span class="id" title="var">_</span> <span class="id" title="var">ll</span> <span class="id" title="var">lx</span> <span class="id" title="var">ld</span> <span class="id" title="var">lr</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#752b87795e3b3c1ea7bc80666aee7327"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#MakeRaw.height"><span class="id" title="definition">height</span></a> <span class="id" title="var">lr</span><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#752b87795e3b3c1ea7bc80666aee7327"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#752b87795e3b3c1ea7bc80666aee7327"><span class="id" title="notation">&lt;=?</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#752b87795e3b3c1ea7bc80666aee7327"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#MakeRaw.height"><span class="id" title="definition">height</span></a> <span class="id" title="var">ll</span><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#752b87795e3b3c1ea7bc80666aee7327"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MMaps.AVL.html#MakeRaw.create"><span class="id" title="definition">create</span></a> <span class="id" title="var">ll</span> <span class="id" title="var">lx</span> <span class="id" title="var">ld</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.create"><span class="id" title="definition">create</span></a> <span class="id" title="var">lr</span> <a class="idref" href="MMaps.AVL.html#x:12"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#d:13"><span class="id" title="variable">d</span></a> <a class="idref" href="MMaps.AVL.html#r:14"><span class="id" title="variable">r</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">lr</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MMaps.AVL.html#MakeRaw.Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="MMaps.AVL.html#MakeRaw.assert_false"><span class="id" title="definition">assert_false</span></a> <a class="idref" href="MMaps.AVL.html#l:11"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVL.html#x:12"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#d:13"><span class="id" title="variable">d</span></a> <a class="idref" href="MMaps.AVL.html#r:14"><span class="id" title="variable">r</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MMaps.AVL.html#MakeRaw.Node"><span class="id" title="constructor">Node</span></a> <span class="id" title="var">_</span> <span class="id" title="var">lrl</span> <span class="id" title="var">lrx</span> <span class="id" title="var">lrd</span> <span class="id" title="var">lrr</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MMaps.AVL.html#MakeRaw.create"><span class="id" title="definition">create</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.create"><span class="id" title="definition">create</span></a> <span class="id" title="var">ll</span> <span class="id" title="var">lx</span> <span class="id" title="var">ld</span> <span class="id" title="var">lrl</span>) <span class="id" title="var">lrx</span> <span class="id" title="var">lrd</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.create"><span class="id" title="definition">create</span></a> <span class="id" title="var">lrr</span> <a class="idref" href="MMaps.AVL.html#x:12"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#d:13"><span class="id" title="variable">d</span></a> <a class="idref" href="MMaps.AVL.html#r:14"><span class="id" title="variable">r</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#47c9f2ba1df6e1f4ba802291f555d67a"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#hl:15"><span class="id" title="variable">hl</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#004c359642fbe9dbd252a6335642f93a"><span class="id" title="notation">+</span></a>2<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#47c9f2ba1df6e1f4ba802291f555d67a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#47c9f2ba1df6e1f4ba802291f555d67a"><span class="id" title="notation">&lt;?</span></a> <a class="idref" href="MMaps.AVL.html#hr:16"><span class="id" title="variable">hr</span></a> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MMaps.AVL.html#r:14"><span class="id" title="variable">r</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MMaps.AVL.html#MakeRaw.Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="MMaps.AVL.html#MakeRaw.assert_false"><span class="id" title="definition">assert_false</span></a> <a class="idref" href="MMaps.AVL.html#l:11"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVL.html#x:12"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#d:13"><span class="id" title="variable">d</span></a> <a class="idref" href="MMaps.AVL.html#r:14"><span class="id" title="variable">r</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MMaps.AVL.html#MakeRaw.Node"><span class="id" title="constructor">Node</span></a> <span class="id" title="var">_</span> <span class="id" title="var">rl</span> <span class="id" title="var">rx</span> <span class="id" title="var">rd</span> <span class="id" title="var">rr</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#752b87795e3b3c1ea7bc80666aee7327"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#MakeRaw.height"><span class="id" title="definition">height</span></a> <span class="id" title="var">rl</span><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#752b87795e3b3c1ea7bc80666aee7327"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#752b87795e3b3c1ea7bc80666aee7327"><span class="id" title="notation">&lt;=?</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#752b87795e3b3c1ea7bc80666aee7327"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#MakeRaw.height"><span class="id" title="definition">height</span></a> <span class="id" title="var">rr</span><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#752b87795e3b3c1ea7bc80666aee7327"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MMaps.AVL.html#MakeRaw.create"><span class="id" title="definition">create</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.create"><span class="id" title="definition">create</span></a> <a class="idref" href="MMaps.AVL.html#l:11"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVL.html#x:12"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#d:13"><span class="id" title="variable">d</span></a> <span class="id" title="var">rl</span>) <span class="id" title="var">rx</span> <span class="id" title="var">rd</span> <span class="id" title="var">rr</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">rl</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MMaps.AVL.html#MakeRaw.Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="MMaps.AVL.html#MakeRaw.assert_false"><span class="id" title="definition">assert_false</span></a> <a class="idref" href="MMaps.AVL.html#l:11"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVL.html#x:12"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#d:13"><span class="id" title="variable">d</span></a> <a class="idref" href="MMaps.AVL.html#r:14"><span class="id" title="variable">r</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MMaps.AVL.html#MakeRaw.Node"><span class="id" title="constructor">Node</span></a> <span class="id" title="var">_</span> <span class="id" title="var">rll</span> <span class="id" title="var">rlx</span> <span class="id" title="var">rld</span> <span class="id" title="var">rlr</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MMaps.AVL.html#MakeRaw.create"><span class="id" title="definition">create</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.create"><span class="id" title="definition">create</span></a> <a class="idref" href="MMaps.AVL.html#l:11"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVL.html#x:12"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#d:13"><span class="id" title="variable">d</span></a> <span class="id" title="var">rll</span>) <span class="id" title="var">rlx</span> <span class="id" title="var">rld</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.create"><span class="id" title="definition">create</span></a> <span class="id" title="var">rlr</span> <span class="id" title="var">rx</span> <span class="id" title="var">rd</span> <span class="id" title="var">rr</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MMaps.AVL.html#MakeRaw.create"><span class="id" title="definition">create</span></a> <a class="idref" href="MMaps.AVL.html#l:11"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVL.html#x:12"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#d:13"><span class="id" title="variable">d</span></a> <a class="idref" href="MMaps.AVL.html#r:14"><span class="id" title="variable">r</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab81"></a><h3 class="section">Insertion</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="MakeRaw.add" class="idref" href="#MakeRaw.add"><span class="id" title="definition">add</span></a> <a id="x:21" class="idref" href="#x:21"><span class="id" title="binder">x</span></a> <a id="d:22" class="idref" href="#d:22"><span class="id" title="binder">d</span></a> <a id="m:23" class="idref" href="#m:23"><span class="id" title="binder">m</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MMaps.AVL.html#m:23"><span class="id" title="variable">m</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MMaps.AVL.html#MakeRaw.Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="MMaps.AVL.html#MakeRaw.Node"><span class="id" title="constructor">Node</span></a> 1 (<a class="idref" href="MMaps.AVL.html#MakeRaw.Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="var">_</span>) <a class="idref" href="MMaps.AVL.html#x:21"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#d:22"><span class="id" title="variable">d</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="var">_</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MMaps.AVL.html#MakeRaw.Node"><span class="id" title="constructor">Node</span></a> <span class="id" title="var">h</span> <span class="id" title="var">l</span> <span class="id" title="var">y</span> <span class="id" title="var">d'</span> <span class="id" title="var">r</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MMaps.AVL.html#K.compare"><span class="id" title="axiom">K.compare</span></a> <a class="idref" href="MMaps.AVL.html#x:21"><span class="id" title="variable">x</span></a> <span class="id" title="var">y</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#Eq"><span class="id" title="constructor">Eq</span></a> ⇒ <a class="idref" href="MMaps.AVL.html#MakeRaw.Node"><span class="id" title="constructor">Node</span></a> <span class="id" title="var">h</span> <span class="id" title="var">l</span> <span class="id" title="var">y</span> <a class="idref" href="MMaps.AVL.html#d:22"><span class="id" title="variable">d</span></a> <span class="id" title="var">r</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#Lt"><span class="id" title="constructor">Lt</span></a> ⇒ <a class="idref" href="MMaps.AVL.html#MakeRaw.bal"><span class="id" title="definition">bal</span></a> (<a class="idref" href="MMaps.AVL.html#add:24"><span class="id" title="definition">add</span></a> <a class="idref" href="MMaps.AVL.html#x:21"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#d:22"><span class="id" title="variable">d</span></a> <span class="id" title="var">l</span>) <span class="id" title="var">y</span> <span class="id" title="var">d'</span> <span class="id" title="var">r</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#Gt"><span class="id" title="constructor">Gt</span></a> ⇒ <a class="idref" href="MMaps.AVL.html#MakeRaw.bal"><span class="id" title="definition">bal</span></a> <span class="id" title="var">l</span> <span class="id" title="var">y</span> <span class="id" title="var">d'</span> (<a class="idref" href="MMaps.AVL.html#add:24"><span class="id" title="definition">add</span></a> <a class="idref" href="MMaps.AVL.html#x:21"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#d:22"><span class="id" title="variable">d</span></a> <span class="id" title="var">r</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab82"></a><h3 class="section">Extraction of minimum binding</h3>


<div class="paragraph"> </div>

  Morally, <span class="inlinecode"><a class="idref" href="MMaps.AVL.html#MakeRaw.remove_min"><span class="id" title="definition">remove_min</span></a></span> is to be applied to a non-empty tree
  <span class="inlinecode"><a class="idref" href="MMaps.RBT.html#MakeRaw.t"><span class="id" title="abbreviation">t</span></a></span> <span class="inlinecode">=</span> <span class="inlinecode"><a class="idref" href="MMaps.GenTree.html#Ops.Node"><span class="id" title="constructor">Node</span></a></span> <span class="inlinecode"><span class="id" title="var">l</span></span> <span class="inlinecode"><a class="idref" href="MMaps.Raw.html#WS.Specs.x"><span class="id" title="variable">x</span></a></span> <span class="inlinecode"><a class="idref" href="MMaps.Raw.html#WS.Specs.e"><span class="id" title="variable">e</span></a></span> <span class="inlinecode"><span class="id" title="var">r</span></span> <span class="inlinecode"><span class="id" title="var">h</span></span>. Since we can't deal here with <span class="inlinecode"><span class="id" title="tactic">assert</span></span> <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a></span>
  for <span class="inlinecode"><a class="idref" href="MMaps.RBT.html#MakeRaw.t"><span class="id" title="abbreviation">t</span></a>=<a class="idref" href="MMaps.GenTree.html#Ops.Leaf"><span class="id" title="constructor">Leaf</span></a></span>, we pre-unpack <span class="inlinecode"><a class="idref" href="MMaps.RBT.html#MakeRaw.t"><span class="id" title="abbreviation">t</span></a></span> (and forget about <span class="inlinecode"><span class="id" title="var">h</span></span>).

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="MakeRaw.remove_min" class="idref" href="#MakeRaw.remove_min"><span class="id" title="definition">remove_min</span></a> <a id="l:26" class="idref" href="#l:26"><span class="id" title="binder">l</span></a> <a id="x:27" class="idref" href="#x:27"><span class="id" title="binder">x</span></a> <a id="d:28" class="idref" href="#d:28"><span class="id" title="binder">d</span></a> <a id="r:29" class="idref" href="#r:29"><span class="id" title="binder">r</span></a> : <a class="idref" href="MMaps.AVL.html#MakeRaw.t"><span class="id" title="abbreviation">t</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*(</span></a><a class="idref" href="MMaps.AVL.html#MakeRaw.key"><span class="id" title="definition">key</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a><a class="idref" href="MMaps.AVL.html#MakeRaw.Elt.elt"><span class="id" title="variable">elt</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">)</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MMaps.AVL.html#l:26"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MMaps.AVL.html#MakeRaw.Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#r:29"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,(</span></a><a class="idref" href="MMaps.AVL.html#x:27"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="MMaps.AVL.html#d:28"><span class="id" title="variable">d</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MMaps.AVL.html#MakeRaw.Node"><span class="id" title="constructor">Node</span></a> <span class="id" title="var">lh</span> <span class="id" title="var">ll</span> <span class="id" title="var">lx</span> <span class="id" title="var">ld</span> <span class="id" title="var">lr</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="l':32" class="idref" href="#l':32"><span class="id" title="binder">l'</span></a>,<a id="m:33" class="idref" href="#m:33"><span class="id" title="binder">m</span></a>) := <a class="idref" href="MMaps.AVL.html#remove_min:30"><span class="id" title="definition">remove_min</span></a> <span class="id" title="var">ll</span> <span class="id" title="var">lx</span> <span class="id" title="var">ld</span> <span class="id" title="var">lr</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#MakeRaw.bal"><span class="id" title="definition">bal</span></a> <a class="idref" href="MMaps.AVL.html#l':32"><span class="id" title="variable">l'</span></a> <a class="idref" href="MMaps.AVL.html#x:27"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#d:28"><span class="id" title="variable">d</span></a> <a class="idref" href="MMaps.AVL.html#r:29"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MMaps.AVL.html#m:33"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab83"></a><h3 class="section">Appending two disjoint maps of similar heights</h3>


<div class="paragraph"> </div>

  <span class="inlinecode"><a class="idref" href="MMaps.RBT.html#MakeRaw.append"><span class="id" title="definition">append</span></a></span> <span class="inlinecode"><span class="id" title="var">t1</span></span> <span class="inlinecode"><span class="id" title="var">t2</span></span> builds the union of <span class="inlinecode"><span class="id" title="var">t1</span></span> and <span class="inlinecode"><span class="id" title="var">t2</span></span> assuming all keys
  of <span class="inlinecode"><span class="id" title="var">t1</span></span> to be smaller than all keys of <span class="inlinecode"><span class="id" title="var">t2</span></span>, and
  <span class="inlinecode">|<a class="idref" href="MMaps.AVL.html#MakeRaw.height"><span class="id" title="definition">height</span></a></span> <span class="inlinecode"><span class="id" title="var">t1</span></span> <span class="inlinecode">-</span> <span class="inlinecode"><a class="idref" href="MMaps.AVL.html#MakeRaw.height"><span class="id" title="definition">height</span></a></span> <span class="inlinecode"><span class="id" title="var">t2</span>|</span> <span class="inlinecode">≤</span> <span class="inlinecode">2</span>.

<div class="paragraph"> </div>

  This was named <span class="inlinecode"><a class="idref" href="MMaps.RBT.html#MakeRaw.merge"><span class="id" title="definition">merge</span></a></span> in the initial Set implementation.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="MakeRaw.append" class="idref" href="#MakeRaw.append"><span class="id" title="definition">append</span></a> <a id="s1:34" class="idref" href="#s1:34"><span class="id" title="binder">s1</span></a> <a id="s2:35" class="idref" href="#s2:35"><span class="id" title="binder">s2</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MMaps.AVL.html#s1:34"><span class="id" title="variable">s1</span></a>,<a class="idref" href="MMaps.AVL.html#s2:35"><span class="id" title="variable">s2</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MMaps.AVL.html#MakeRaw.Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="var">_</span>, <span class="id" title="var">_</span> ⇒ <a class="idref" href="MMaps.AVL.html#s2:35"><span class="id" title="variable">s2</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span>, <a class="idref" href="MMaps.AVL.html#MakeRaw.Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="MMaps.AVL.html#s1:34"><span class="id" title="variable">s1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span>, <a class="idref" href="MMaps.AVL.html#MakeRaw.Node"><span class="id" title="constructor">Node</span></a> <span class="id" title="var">h2</span> <span class="id" title="var">l2</span> <span class="id" title="var">x2</span> <span class="id" title="var">d2</span> <span class="id" title="var">r2</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s2'</span><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,(</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">d</span><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a> := <a class="idref" href="MMaps.AVL.html#MakeRaw.remove_min"><span class="id" title="definition">remove_min</span></a> <span class="id" title="var">l2</span> <span class="id" title="var">x2</span> <span class="id" title="var">d2</span> <span class="id" title="var">r2</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MMaps.AVL.html#MakeRaw.bal"><span class="id" title="definition">bal</span></a> <a class="idref" href="MMaps.AVL.html#s1:34"><span class="id" title="variable">s1</span></a> <span class="id" title="var">x</span> <span class="id" title="var">d</span> <span class="id" title="var">s2'</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab84"></a><h3 class="section">Deletion</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="MakeRaw.remove" class="idref" href="#MakeRaw.remove"><span class="id" title="definition">remove</span></a> <a id="x:38" class="idref" href="#x:38"><span class="id" title="binder">x</span></a> <a id="m:39" class="idref" href="#m:39"><span class="id" title="binder">m</span></a> := <span class="id" title="keyword">match</span> <a class="idref" href="MMaps.AVL.html#m:39"><span class="id" title="variable">m</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MMaps.AVL.html#MakeRaw.Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="MMaps.AVL.html#MakeRaw.Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MMaps.AVL.html#MakeRaw.Node"><span class="id" title="constructor">Node</span></a> <span class="id" title="var">h</span> <span class="id" title="var">l</span> <span class="id" title="var">y</span> <span class="id" title="var">d</span> <span class="id" title="var">r</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MMaps.AVL.html#K.compare"><span class="id" title="axiom">K.compare</span></a> <a class="idref" href="MMaps.AVL.html#x:38"><span class="id" title="variable">x</span></a> <span class="id" title="var">y</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#Eq"><span class="id" title="constructor">Eq</span></a> ⇒ <a class="idref" href="MMaps.AVL.html#MakeRaw.append"><span class="id" title="definition">append</span></a> <span class="id" title="var">l</span> <span class="id" title="var">r</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#Lt"><span class="id" title="constructor">Lt</span></a> ⇒ <a class="idref" href="MMaps.AVL.html#MakeRaw.bal"><span class="id" title="definition">bal</span></a> (<a class="idref" href="MMaps.AVL.html#remove:40"><span class="id" title="definition">remove</span></a> <a class="idref" href="MMaps.AVL.html#x:38"><span class="id" title="variable">x</span></a> <span class="id" title="var">l</span>) <span class="id" title="var">y</span> <span class="id" title="var">d</span> <span class="id" title="var">r</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#Gt"><span class="id" title="constructor">Gt</span></a> ⇒ <a class="idref" href="MMaps.AVL.html#MakeRaw.bal"><span class="id" title="definition">bal</span></a> <span class="id" title="var">l</span> <span class="id" title="var">y</span> <span class="id" title="var">d</span> (<a class="idref" href="MMaps.AVL.html#remove:40"><span class="id" title="definition">remove</span></a> <a class="idref" href="MMaps.AVL.html#x:38"><span class="id" title="variable">x</span></a> <span class="id" title="var">r</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab85"></a><h3 class="section">Join</h3>


<div class="paragraph"> </div>

    Same as <span class="inlinecode"><a class="idref" href="MMaps.AVL.html#MakeRaw.bal"><span class="id" title="definition">bal</span></a></span> but does not assume anything regarding heights of <span class="inlinecode"><span class="id" title="var">l</span></span>
    and <span class="inlinecode"><span class="id" title="var">r</span></span>.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="MakeRaw.join" class="idref" href="#MakeRaw.join"><span class="id" title="definition">join</span></a> <a id="l:42" class="idref" href="#l:42"><span class="id" title="binder">l</span></a> : <a class="idref" href="MMaps.AVL.html#MakeRaw.key"><span class="id" title="definition">key</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Elt.elt"><span class="id" title="variable">elt</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.t"><span class="id" title="abbreviation">t</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.t"><span class="id" title="abbreviation">t</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MMaps.AVL.html#l:42"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MMaps.AVL.html#MakeRaw.Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="MMaps.AVL.html#MakeRaw.add"><span class="id" title="definition">add</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MMaps.AVL.html#MakeRaw.Node"><span class="id" title="constructor">Node</span></a> <span class="id" title="var">lh</span> <span class="id" title="var">ll</span> <span class="id" title="var">lx</span> <span class="id" title="var">ld</span> <span class="id" title="var">lr</span> ⇒ <span class="id" title="keyword">fun</span> <a id="x:45" class="idref" href="#x:45"><span class="id" title="binder">x</span></a> <a id="d:46" class="idref" href="#d:46"><span class="id" title="binder">d</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fix</span> <span class="id" title="var">join_aux</span> (<a id="r:47" class="idref" href="#r:47"><span class="id" title="binder">r</span></a>:<a class="idref" href="MMaps.AVL.html#MakeRaw.t"><span class="id" title="abbreviation">t</span></a>) : <a class="idref" href="MMaps.AVL.html#MakeRaw.t"><span class="id" title="abbreviation">t</span></a> := <span class="id" title="keyword">match</span> <a class="idref" href="MMaps.AVL.html#r:47"><span class="id" title="variable">r</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MMaps.AVL.html#MakeRaw.Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="MMaps.AVL.html#MakeRaw.add"><span class="id" title="definition">add</span></a> <a class="idref" href="MMaps.AVL.html#x:45"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#d:46"><span class="id" title="variable">d</span></a> <a class="idref" href="MMaps.AVL.html#l:42"><span class="id" title="variable">l</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MMaps.AVL.html#MakeRaw.Node"><span class="id" title="constructor">Node</span></a> <span class="id" title="var">rh</span> <span class="id" title="var">rl</span> <span class="id" title="var">rx</span> <span class="id" title="var">rd</span> <span class="id" title="var">rr</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="var">rh</span><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#004c359642fbe9dbd252a6335642f93a"><span class="id" title="notation">+</span></a>2 <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#47c9f2ba1df6e1f4ba802291f555d67a"><span class="id" title="notation">&lt;?</span></a> <span class="id" title="var">lh</span> <span class="id" title="keyword">then</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.bal"><span class="id" title="definition">bal</span></a> <span class="id" title="var">ll</span> <span class="id" title="var">lx</span> <span class="id" title="var">ld</span> (<a class="idref" href="MMaps.AVL.html#join:43"><span class="id" title="definition">join</span></a> <span class="id" title="var">lr</span> <a class="idref" href="MMaps.AVL.html#x:45"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#d:46"><span class="id" title="variable">d</span></a> <a class="idref" href="MMaps.AVL.html#r:47"><span class="id" title="variable">r</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="keyword">if</span> <span class="id" title="var">lh</span><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#004c359642fbe9dbd252a6335642f93a"><span class="id" title="notation">+</span></a>2 <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#47c9f2ba1df6e1f4ba802291f555d67a"><span class="id" title="notation">&lt;?</span></a> <span class="id" title="var">rh</span> <span class="id" title="keyword">then</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.bal"><span class="id" title="definition">bal</span></a> (<a class="idref" href="MMaps.AVL.html#join_aux:48"><span class="id" title="variable">join_aux</span></a> <span class="id" title="var">rl</span>) <span class="id" title="var">rx</span> <span class="id" title="var">rd</span> <span class="id" title="var">rr</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.create"><span class="id" title="definition">create</span></a> <a class="idref" href="MMaps.AVL.html#l:42"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVL.html#x:45"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#d:46"><span class="id" title="variable">d</span></a> <a class="idref" href="MMaps.AVL.html#r:47"><span class="id" title="variable">r</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab86"></a><h3 class="section">Splitting</h3>


<div class="paragraph"> </div>

    <span class="inlinecode"><span class="id" title="tactic">split</span></span> <span class="inlinecode"><a class="idref" href="MMaps.Raw.html#WS.Specs.x"><span class="id" title="variable">x</span></a></span> <span class="inlinecode"><a class="idref" href="MMaps.Raw.html#WS.Specs.m"><span class="id" title="variable">m</span></a></span> returns a triple <span class="inlinecode">(<span class="id" title="var">l</span>,</span> <span class="inlinecode"><span class="id" title="var">o</span>,</span> <span class="inlinecode"><span class="id" title="var">r</span>)</span> where
<ul class="doclist">
<li> <span class="inlinecode"><span class="id" title="var">l</span></span> is the set of elements of <span class="inlinecode"><a class="idref" href="MMaps.Raw.html#WS.Specs.m"><span class="id" title="variable">m</span></a></span> that are <span class="inlinecode">&lt;</span> <span class="inlinecode"><a class="idref" href="MMaps.Raw.html#WS.Specs.x"><span class="id" title="variable">x</span></a></span>

</li>
<li> <span class="inlinecode"><span class="id" title="var">r</span></span> is the set of elements of <span class="inlinecode"><a class="idref" href="MMaps.Raw.html#WS.Specs.m"><span class="id" title="variable">m</span></a></span> that are <span class="inlinecode">&gt;</span> <span class="inlinecode"><a class="idref" href="MMaps.Raw.html#WS.Specs.x"><span class="id" title="variable">x</span></a></span>

</li>
<li> <span class="inlinecode"><span class="id" title="var">o</span></span> is the result of <span class="inlinecode"><a class="idref" href="MMaps.GenTree.html#Ops.find"><span class="id" title="definition">find</span></a></span> <span class="inlinecode"><a class="idref" href="MMaps.Raw.html#WS.Specs.x"><span class="id" title="variable">x</span></a></span> <span class="inlinecode"><a class="idref" href="MMaps.Raw.html#WS.Specs.m"><span class="id" title="variable">m</span></a></span>.

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Record</span> <a id="MakeRaw.triple" class="idref" href="#MakeRaw.triple"><span class="id" title="record">triple</span></a> := <span class="id" title="var">Triple</span> { <a id="MakeRaw.t_left" class="idref" href="#MakeRaw.t_left"><span class="id" title="projection">t_left</span></a>:<a class="idref" href="MMaps.AVL.html#MakeRaw.t"><span class="id" title="abbreviation">t</span></a>; <a id="MakeRaw.t_opt" class="idref" href="#MakeRaw.t_opt"><span class="id" title="projection">t_opt</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Elt.elt"><span class="id" title="variable">elt</span></a>; <a id="MakeRaw.t_right" class="idref" href="#MakeRaw.t_right"><span class="id" title="projection">t_right</span></a>:<a class="idref" href="MMaps.AVL.html#MakeRaw.t"><span class="id" title="abbreviation">t</span></a> }.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="MakeRaw.split" class="idref" href="#MakeRaw.split"><span class="id" title="definition">split</span></a> <a id="x:54" class="idref" href="#x:54"><span class="id" title="binder">x</span></a> <a id="m:55" class="idref" href="#m:55"><span class="id" title="binder">m</span></a> : <a class="idref" href="MMaps.AVL.html#MakeRaw.triple"><span class="id" title="record">triple</span></a> := <span class="id" title="keyword">match</span> <a class="idref" href="MMaps.AVL.html#m:55"><span class="id" title="variable">m</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MMaps.AVL.html#MakeRaw.Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="MMaps.AVL.html#MakeRaw.Triple"><span class="id" title="constructor">Triple</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="var">_</span>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="var">_</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="MMaps.AVL.html#MakeRaw.Node"><span class="id" title="constructor">Node</span></a> <span class="id" title="var">h</span> <span class="id" title="var">l</span> <span class="id" title="var">y</span> <span class="id" title="var">d</span> <span class="id" title="var">r</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MMaps.AVL.html#K.compare"><span class="id" title="axiom">K.compare</span></a> <a class="idref" href="MMaps.AVL.html#x:54"><span class="id" title="variable">x</span></a> <span class="id" title="var">y</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#Lt"><span class="id" title="constructor">Lt</span></a> ⇒ <span class="id" title="keyword">let</span> (<a id="ll:58" class="idref" href="#ll:58"><span class="id" title="binder">ll</span></a>,<a id="o:59" class="idref" href="#o:59"><span class="id" title="binder">o</span></a>,<a id="rl:60" class="idref" href="#rl:60"><span class="id" title="binder">rl</span></a>) := <a class="idref" href="MMaps.AVL.html#split:56"><span class="id" title="definition">split</span></a> <a class="idref" href="MMaps.AVL.html#x:54"><span class="id" title="variable">x</span></a> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.Triple"><span class="id" title="constructor">Triple</span></a> <a class="idref" href="MMaps.AVL.html#ll:58"><span class="id" title="variable">ll</span></a> <a class="idref" href="MMaps.AVL.html#o:59"><span class="id" title="variable">o</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.join"><span class="id" title="definition">join</span></a> <a class="idref" href="MMaps.AVL.html#rl:60"><span class="id" title="variable">rl</span></a> <span class="id" title="var">y</span> <span class="id" title="var">d</span> <span class="id" title="var">r</span> )<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#Eq"><span class="id" title="constructor">Eq</span></a> ⇒ <a class="idref" href="MMaps.AVL.html#MakeRaw.Triple"><span class="id" title="constructor">Triple</span></a> <span class="id" title="var">l</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">d</span>) <span class="id" title="var">r</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#Gt"><span class="id" title="constructor">Gt</span></a> ⇒ <span class="id" title="keyword">let</span> (<a id="rl:61" class="idref" href="#rl:61"><span class="id" title="binder">rl</span></a>,<a id="o:62" class="idref" href="#o:62"><span class="id" title="binder">o</span></a>,<a id="rr:63" class="idref" href="#rr:63"><span class="id" title="binder">rr</span></a>) := <a class="idref" href="MMaps.AVL.html#split:56"><span class="id" title="definition">split</span></a> <a class="idref" href="MMaps.AVL.html#x:54"><span class="id" title="variable">x</span></a> <span class="id" title="var">r</span> <span class="id" title="tactic">in</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.Triple"><span class="id" title="constructor">Triple</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.join"><span class="id" title="definition">join</span></a> <span class="id" title="var">l</span> <span class="id" title="var">y</span> <span class="id" title="var">d</span> <a class="idref" href="MMaps.AVL.html#rl:61"><span class="id" title="variable">rl</span></a>) <a class="idref" href="MMaps.AVL.html#o:62"><span class="id" title="variable">o</span></a> <a class="idref" href="MMaps.AVL.html#rr:63"><span class="id" title="variable">rr</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab87"></a><h3 class="section">Concatenation</h3>


<div class="paragraph"> </div>

   Same as <span class="inlinecode"><a class="idref" href="MMaps.RBT.html#MakeRaw.append"><span class="id" title="definition">append</span></a></span> but does not assume anything about heights.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="MakeRaw.concat" class="idref" href="#MakeRaw.concat"><span class="id" title="definition">concat</span></a> <a id="m1:64" class="idref" href="#m1:64"><span class="id" title="binder">m1</span></a> <a id="m2:65" class="idref" href="#m2:65"><span class="id" title="binder">m2</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MMaps.AVL.html#m1:64"><span class="id" title="variable">m1</span></a>, <a class="idref" href="MMaps.AVL.html#m2:65"><span class="id" title="variable">m2</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MMaps.AVL.html#MakeRaw.Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="var">_</span>, <span class="id" title="var">_</span> ⇒ <a class="idref" href="MMaps.AVL.html#m2:65"><span class="id" title="variable">m2</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> , <a class="idref" href="MMaps.AVL.html#MakeRaw.Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="MMaps.AVL.html#m1:64"><span class="id" title="variable">m1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span>, <a class="idref" href="MMaps.AVL.html#MakeRaw.Node"><span class="id" title="constructor">Node</span></a> <span class="id" title="var">_</span> <span class="id" title="var">l2</span> <span class="id" title="var">x2</span> <span class="id" title="var">d2</span> <span class="id" title="var">r2</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="m2':68" class="idref" href="#m2':68"><span class="id" title="binder">m2'</span></a>,<a id="xd:69" class="idref" href="#xd:69"><span class="id" title="binder">xd</span></a>) := <a class="idref" href="MMaps.AVL.html#MakeRaw.remove_min"><span class="id" title="definition">remove_min</span></a> <span class="id" title="var">l2</span> <span class="id" title="var">x2</span> <span class="id" title="var">d2</span> <span class="id" title="var">r2</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MMaps.AVL.html#MakeRaw.join"><span class="id" title="definition">join</span></a> <a class="idref" href="MMaps.AVL.html#m1:64"><span class="id" title="variable">m1</span></a> <a class="idref" href="MMaps.AVL.html#xd:69"><span class="id" title="variable">xd</span></a><a class="idref" href="MMaps.GenTree.html#6498f4b98d8d188be6bde7da0b9ffb6f"><span class="id" title="notation">#1</span></a> <a class="idref" href="MMaps.AVL.html#xd:69"><span class="id" title="variable">xd</span></a><a class="idref" href="MMaps.GenTree.html#030f3fafcfea0e4883e66553a16aff42"><span class="id" title="notation">#2</span></a> <a class="idref" href="MMaps.AVL.html#m2':68"><span class="id" title="variable">m2'</span></a><br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab88"></a><h3 class="section">Filter and partition</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="MakeRaw.filter" class="idref" href="#MakeRaw.filter"><span class="id" title="definition">filter</span></a> (<a id="f:70" class="idref" href="#f:70"><span class="id" title="binder">f</span></a>:<a class="idref" href="MMaps.AVL.html#MakeRaw.key"><span class="id" title="definition">key</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><a class="idref" href="MMaps.AVL.html#MakeRaw.Elt.elt"><span class="id" title="variable">elt</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) <a id="m:71" class="idref" href="#m:71"><span class="id" title="binder">m</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MMaps.AVL.html#m:71"><span class="id" title="variable">m</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MMaps.AVL.html#MakeRaw.Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="MMaps.AVL.html#MakeRaw.Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MMaps.AVL.html#MakeRaw.Node"><span class="id" title="constructor">Node</span></a> <span class="id" title="var">_</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">r</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="l':74" class="idref" href="#l':74"><span class="id" title="binder">l'</span></a> := <a class="idref" href="MMaps.AVL.html#filter:72"><span class="id" title="definition">filter</span></a> <a class="idref" href="MMaps.AVL.html#f:70"><span class="id" title="variable">f</span></a> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="r':75" class="idref" href="#r':75"><span class="id" title="binder">r'</span></a> := <a class="idref" href="MMaps.AVL.html#filter:72"><span class="id" title="definition">filter</span></a> <a class="idref" href="MMaps.AVL.html#f:70"><span class="id" title="variable">f</span></a> <span class="id" title="var">r</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="MMaps.AVL.html#f:70"><span class="id" title="variable">f</span></a> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="keyword">then</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.join"><span class="id" title="definition">join</span></a> <a class="idref" href="MMaps.AVL.html#l':74"><span class="id" title="variable">l'</span></a> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <a class="idref" href="MMaps.AVL.html#r':75"><span class="id" title="variable">r'</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.concat"><span class="id" title="definition">concat</span></a> <a class="idref" href="MMaps.AVL.html#l':74"><span class="id" title="variable">l'</span></a> <a class="idref" href="MMaps.AVL.html#r':75"><span class="id" title="variable">r'</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="MakeRaw.partition" class="idref" href="#MakeRaw.partition"><span class="id" title="definition">partition</span></a> (<a id="f:76" class="idref" href="#f:76"><span class="id" title="binder">f</span></a>:<a class="idref" href="MMaps.AVL.html#MakeRaw.key"><span class="id" title="definition">key</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><a class="idref" href="MMaps.AVL.html#MakeRaw.Elt.elt"><span class="id" title="variable">elt</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) <a id="m:77" class="idref" href="#m:77"><span class="id" title="binder">m</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MMaps.AVL.html#m:77"><span class="id" title="variable">m</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MMaps.AVL.html#MakeRaw.Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#MakeRaw.Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="MMaps.AVL.html#MakeRaw.Node"><span class="id" title="constructor">Node</span></a> <span class="id" title="var">_</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">r</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">l1</span><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">l2</span><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="MMaps.AVL.html#partition:78"><span class="id" title="definition">partition</span></a> <a class="idref" href="MMaps.AVL.html#f:76"><span class="id" title="variable">f</span></a> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">r1</span><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">r2</span><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="MMaps.AVL.html#partition:78"><span class="id" title="definition">partition</span></a> <a class="idref" href="MMaps.AVL.html#f:76"><span class="id" title="variable">f</span></a> <span class="id" title="var">r</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="MMaps.AVL.html#f:76"><span class="id" title="variable">f</span></a> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#MakeRaw.join"><span class="id" title="definition">join</span></a> <span class="id" title="var">l1</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">r1</span><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.concat"><span class="id" title="definition">concat</span></a> <span class="id" title="var">l2</span> <span class="id" title="var">r2</span><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#MakeRaw.concat"><span class="id" title="definition">concat</span></a> <span class="id" title="var">l1</span> <span class="id" title="var">r1</span><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.join"><span class="id" title="definition">join</span></a> <span class="id" title="var">l2</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">r2</span><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.Elt"><span class="id" title="section">Elt</span></a>.<br/>
<span class="id" title="keyword">Local Notation</span> <a id="5fff6fc502757d8037705f89a213c279" class="idref" href="#5fff6fc502757d8037705f89a213c279"><span class="id" title="notation">&quot;</span></a>t #l" := (<a class="idref" href="MMaps.AVL.html#MakeRaw.t_left"><span class="id" title="projection">t_left</span></a> <span class="id" title="var">t</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 9, <span class="id" title="var">format</span> "t '#l'").<br/>
<span class="id" title="keyword">Local Notation</span> <a id="b9b2aeecf364026dc3ff766f481a3c0e" class="idref" href="#b9b2aeecf364026dc3ff766f481a3c0e"><span class="id" title="notation">&quot;</span></a>t #o" := (<a class="idref" href="MMaps.AVL.html#MakeRaw.t_opt"><span class="id" title="projection">t_opt</span></a> <span class="id" title="var">t</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 9, <span class="id" title="var">format</span> "t '#o'").<br/>
<span class="id" title="keyword">Local Notation</span> <a id="12f28f29f6f580fcde6b740c6479ca68" class="idref" href="#12f28f29f6f580fcde6b740c6479ca68"><span class="id" title="notation">&quot;</span></a>t #r" := (<a class="idref" href="MMaps.AVL.html#MakeRaw.t_right"><span class="id" title="projection">t_right</span></a> <span class="id" title="var">t</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 9, <span class="id" title="var">format</span> "t '#r'").<br/>

<br/>
</div>

<div class="doc">
<a id="lab89"></a><h3 class="section">Map with removal</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="MakeRaw.mapo" class="idref" href="#MakeRaw.mapo"><span class="id" title="definition">mapo</span></a> (<a id="elt:80" class="idref" href="#elt:80"><span class="id" title="binder">elt</span></a> <a id="elt':81" class="idref" href="#elt':81"><span class="id" title="binder">elt'</span></a> : <span class="id" title="keyword">Type</span>)(<a id="f:82" class="idref" href="#f:82"><span class="id" title="binder">f</span></a> : <a class="idref" href="MMaps.AVL.html#MakeRaw.key"><span class="id" title="definition">key</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#elt:80"><span class="id" title="variable">elt</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="MMaps.AVL.html#elt':81"><span class="id" title="variable">elt'</span></a>)(<a id="m:83" class="idref" href="#m:83"><span class="id" title="binder">m</span></a> : <a class="idref" href="MMaps.AVL.html#MakeRaw.t"><span class="id" title="definition">t</span></a> <a class="idref" href="MMaps.AVL.html#elt:80"><span class="id" title="variable">elt</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="MMaps.AVL.html#MakeRaw.t"><span class="id" title="definition">t</span></a> <a class="idref" href="MMaps.AVL.html#elt':81"><span class="id" title="variable">elt'</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MMaps.AVL.html#m:83"><span class="id" title="variable">m</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;| <a class="idref" href="MMaps.AVL.html#MakeRaw.Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="MMaps.AVL.html#MakeRaw.Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;| <a class="idref" href="MMaps.AVL.html#MakeRaw.Node"><span class="id" title="constructor">Node</span></a> <span class="id" title="var">_</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span> <span class="id" title="var">d</span> <span class="id" title="var">r</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MMaps.AVL.html#f:82"><span class="id" title="variable">f</span></a> <span class="id" title="var">x</span> <span class="id" title="var">d</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">d'</span> ⇒ <a class="idref" href="MMaps.AVL.html#MakeRaw.join"><span class="id" title="definition">join</span></a> (<a class="idref" href="MMaps.AVL.html#mapo:84"><span class="id" title="definition">mapo</span></a> <a class="idref" href="MMaps.AVL.html#f:82"><span class="id" title="variable">f</span></a> <span class="id" title="var">l</span>) <span class="id" title="var">x</span> <span class="id" title="var">d'</span> (<a class="idref" href="MMaps.AVL.html#mapo:84"><span class="id" title="definition">mapo</span></a> <a class="idref" href="MMaps.AVL.html#f:82"><span class="id" title="variable">f</span></a> <span class="id" title="var">r</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="MMaps.AVL.html#MakeRaw.concat"><span class="id" title="definition">concat</span></a> (<a class="idref" href="MMaps.AVL.html#mapo:84"><span class="id" title="definition">mapo</span></a> <a class="idref" href="MMaps.AVL.html#f:82"><span class="id" title="variable">f</span></a> <span class="id" title="var">l</span>) (<a class="idref" href="MMaps.AVL.html#mapo:84"><span class="id" title="definition">mapo</span></a> <a class="idref" href="MMaps.AVL.html#f:82"><span class="id" title="variable">f</span></a> <span class="id" title="var">r</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab90"></a><h3 class="section">Generalized merge</h3>


<div class="paragraph"> </div>

  Suggestion by B. Gregoire: a <span class="inlinecode"><a class="idref" href="MMaps.RBT.html#MakeRaw.merge"><span class="id" title="definition">merge</span></a></span> function with specialized
  arguments that allows bypassing some tree traversal. Instead of one
  <span class="inlinecode"><a class="idref" href="MMaps.AVL.html#MakeRaw.Gmerge.f0"><span class="id" title="variable">f0</span></a></span> of type <span class="inlinecode"><a class="idref" href="MMaps.GenTree.html#Ops.key"><span class="id" title="definition">key</span></a></span> <span class="inlinecode">→</span> <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a></span> <span class="inlinecode"><a class="idref" href="MMaps.RBTproofs.html#BalanceProps.Elt.elt"><span class="id" title="variable">elt</span></a></span> <span class="inlinecode">→</span> <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a></span> <span class="inlinecode"><a class="idref" href="MMaps.RBT.html#MakeRaw.Merge.elt'"><span class="id" title="variable">elt'</span></a></span> <span class="inlinecode">→</span> <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a></span> <span class="inlinecode"><a class="idref" href="MMaps.RBT.html#MakeRaw.Merge.elt''"><span class="id" title="variable">elt''</span></a></span>,
  we ask here for:
<ul class="doclist">
<li> <span class="inlinecode"><a class="idref" href="MMaps.RBT.html#MakeRaw.Mapo.f"><span class="id" title="variable">f</span></a></span> which is a specialisation of <span class="inlinecode"><a class="idref" href="MMaps.AVL.html#MakeRaw.Gmerge.f0"><span class="id" title="variable">f0</span></a></span> when first option isn't <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a></span>

</li>
<li> <span class="inlinecode"><a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Gmerge.mapl"><span class="id" title="variable">mapl</span></a></span> treats a <span class="inlinecode"><a class="idref" href="MMaps.GenTree.html#Ops.tree"><span class="id" title="inductive">tree</span></a></span> <span class="inlinecode"><a class="idref" href="MMaps.RBTproofs.html#BalanceProps.Elt.elt"><span class="id" title="variable">elt</span></a></span> with <span class="inlinecode"><a class="idref" href="MMaps.AVL.html#MakeRaw.Gmerge.f0"><span class="id" title="variable">f0</span></a></span> when second option is <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a></span>

</li>
<li> <span class="inlinecode"><a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Gmerge.mapr"><span class="id" title="variable">mapr</span></a></span> treats a <span class="inlinecode"><a class="idref" href="MMaps.GenTree.html#Ops.tree"><span class="id" title="inductive">tree</span></a></span> <span class="inlinecode"><a class="idref" href="MMaps.RBT.html#MakeRaw.Merge.elt'"><span class="id" title="variable">elt'</span></a></span> with <span class="inlinecode"><a class="idref" href="MMaps.AVL.html#MakeRaw.Gmerge.f0"><span class="id" title="variable">f0</span></a></span> when first option is <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a></span>

</li>
</ul>

<div class="paragraph"> </div>

  The idea is that <span class="inlinecode"><a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Gmerge.mapl"><span class="id" title="variable">mapl</span></a></span> and <span class="inlinecode"><a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Gmerge.mapr"><span class="id" title="variable">mapr</span></a></span> can be instantaneous (e.g.
  the identity or some constant function).

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="MakeRaw.GMerge" class="idref" href="#MakeRaw.GMerge"><span class="id" title="section">GMerge</span></a>.<br/>
<span class="id" title="keyword">Variable</span> <a id="MakeRaw.GMerge.elt" class="idref" href="#MakeRaw.GMerge.elt"><span class="id" title="variable">elt</span></a> <a id="MakeRaw.GMerge.elt'" class="idref" href="#MakeRaw.GMerge.elt'"><span class="id" title="variable">elt'</span></a> <a id="MakeRaw.GMerge.elt''" class="idref" href="#MakeRaw.GMerge.elt''"><span class="id" title="variable">elt''</span></a> : <span class="id" title="keyword">Type</span>.<br/>
<span class="id" title="keyword">Variable</span> <a id="MakeRaw.GMerge.f" class="idref" href="#MakeRaw.GMerge.f"><span class="id" title="variable">f</span></a> : <a class="idref" href="MMaps.AVL.html#MakeRaw.key"><span class="id" title="definition">key</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.GMerge.elt"><span class="id" title="variable">elt</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.GMerge.elt'"><span class="id" title="variable">elt'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.GMerge.elt''"><span class="id" title="variable">elt''</span></a>.<br/>
<span class="id" title="keyword">Variable</span> <a id="MakeRaw.GMerge.mapl" class="idref" href="#MakeRaw.GMerge.mapl"><span class="id" title="variable">mapl</span></a> : <a class="idref" href="MMaps.AVL.html#MakeRaw.t"><span class="id" title="definition">t</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.GMerge.elt"><span class="id" title="variable">elt</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.t"><span class="id" title="definition">t</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.GMerge.elt''"><span class="id" title="variable">elt''</span></a>.<br/>
<span class="id" title="keyword">Variable</span> <a id="MakeRaw.GMerge.mapr" class="idref" href="#MakeRaw.GMerge.mapr"><span class="id" title="variable">mapr</span></a> : <a class="idref" href="MMaps.AVL.html#MakeRaw.t"><span class="id" title="definition">t</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.GMerge.elt'"><span class="id" title="variable">elt'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.t"><span class="id" title="definition">t</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.GMerge.elt''"><span class="id" title="variable">elt''</span></a>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="MakeRaw.gmerge" class="idref" href="#MakeRaw.gmerge"><span class="id" title="definition">gmerge</span></a> <a id="m1:98" class="idref" href="#m1:98"><span class="id" title="binder">m1</span></a> <a id="m2:99" class="idref" href="#m2:99"><span class="id" title="binder">m2</span></a> :=<br/>
&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MMaps.AVL.html#m1:98"><span class="id" title="variable">m1</span></a>, <a class="idref" href="MMaps.AVL.html#m2:99"><span class="id" title="variable">m2</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MMaps.AVL.html#MakeRaw.Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="var">_</span>, <span class="id" title="var">_</span> ⇒ <a class="idref" href="MMaps.AVL.html#MakeRaw.GMerge.mapr"><span class="id" title="variable">mapr</span></a> <a class="idref" href="MMaps.AVL.html#m2:99"><span class="id" title="variable">m2</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span>, <a class="idref" href="MMaps.AVL.html#MakeRaw.Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="MMaps.AVL.html#MakeRaw.GMerge.mapl"><span class="id" title="variable">mapl</span></a> <a class="idref" href="MMaps.AVL.html#m1:98"><span class="id" title="variable">m1</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="MMaps.AVL.html#MakeRaw.Node"><span class="id" title="constructor">Node</span></a> <span class="id" title="var">h1</span> <span class="id" title="var">l1</span> <span class="id" title="var">x1</span> <span class="id" title="var">d1</span> <span class="id" title="var">r1</span>, <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="l2':103" class="idref" href="#l2':103"><span class="id" title="binder">l2'</span></a>,<a id="o2:104" class="idref" href="#o2:104"><span class="id" title="binder">o2</span></a>,<a id="r2':105" class="idref" href="#r2':105"><span class="id" title="binder">r2'</span></a>) := <a class="idref" href="MMaps.AVL.html#MakeRaw.split"><span class="id" title="definition">split</span></a> <span class="id" title="var">x1</span> <a class="idref" href="MMaps.AVL.html#m2:99"><span class="id" title="variable">m2</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.GMerge.f"><span class="id" title="variable">f</span></a> <span class="id" title="var">x1</span> <span class="id" title="var">d1</span> <a class="idref" href="MMaps.AVL.html#o2:104"><span class="id" title="variable">o2</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">e</span> ⇒ <a class="idref" href="MMaps.AVL.html#MakeRaw.join"><span class="id" title="definition">join</span></a> (<a class="idref" href="MMaps.AVL.html#gmerge:100"><span class="id" title="definition">gmerge</span></a> <span class="id" title="var">l1</span> <a class="idref" href="MMaps.AVL.html#l2':103"><span class="id" title="variable">l2'</span></a>) <span class="id" title="var">x1</span> <span class="id" title="var">e</span> (<a class="idref" href="MMaps.AVL.html#gmerge:100"><span class="id" title="definition">gmerge</span></a> <span class="id" title="var">r1</span> <a class="idref" href="MMaps.AVL.html#r2':105"><span class="id" title="variable">r2'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="MMaps.AVL.html#MakeRaw.concat"><span class="id" title="definition">concat</span></a> (<a class="idref" href="MMaps.AVL.html#gmerge:100"><span class="id" title="definition">gmerge</span></a> <span class="id" title="var">l1</span> <a class="idref" href="MMaps.AVL.html#l2':103"><span class="id" title="variable">l2'</span></a>) (<a class="idref" href="MMaps.AVL.html#gmerge:100"><span class="id" title="definition">gmerge</span></a> <span class="id" title="var">r1</span> <a class="idref" href="MMaps.AVL.html#r2':105"><span class="id" title="variable">r2'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.GMerge"><span class="id" title="section">GMerge</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab91"></a><h3 class="section">Merge</h3>


<div class="paragraph"> </div>

    The <span class="inlinecode"><a class="idref" href="MMaps.RBT.html#MakeRaw.merge"><span class="id" title="definition">merge</span></a></span> function of the Map interface can be implemented
    via <span class="inlinecode"><a class="idref" href="MMaps.AVL.html#MakeRaw.gmerge"><span class="id" title="abbreviation">gmerge</span></a></span> and <span class="inlinecode"><a class="idref" href="MMaps.RBT.html#MakeRaw.mapo"><span class="id" title="definition">mapo</span></a></span>.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="MakeRaw.Merge" class="idref" href="#MakeRaw.Merge"><span class="id" title="section">Merge</span></a>.<br/>
<span class="id" title="keyword">Variable</span> <a id="MakeRaw.Merge.elt" class="idref" href="#MakeRaw.Merge.elt"><span class="id" title="variable">elt</span></a> <a id="MakeRaw.Merge.elt'" class="idref" href="#MakeRaw.Merge.elt'"><span class="id" title="variable">elt'</span></a> <a id="MakeRaw.Merge.elt''" class="idref" href="#MakeRaw.Merge.elt''"><span class="id" title="variable">elt''</span></a> : <span class="id" title="keyword">Type</span>.<br/>
<span class="id" title="keyword">Variable</span> <a id="MakeRaw.Merge.f" class="idref" href="#MakeRaw.Merge.f"><span class="id" title="variable">f</span></a> : <a class="idref" href="MMaps.AVL.html#MakeRaw.key"><span class="id" title="definition">key</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Merge.elt"><span class="id" title="variable">elt</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Merge.elt'"><span class="id" title="variable">elt'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Merge.elt''"><span class="id" title="variable">elt''</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="MakeRaw.merge" class="idref" href="#MakeRaw.merge"><span class="id" title="definition">merge</span></a> : <a class="idref" href="MMaps.AVL.html#MakeRaw.t"><span class="id" title="definition">t</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Merge.elt"><span class="id" title="variable">elt</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.t"><span class="id" title="definition">t</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Merge.elt'"><span class="id" title="variable">elt'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.t"><span class="id" title="definition">t</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Merge.elt''"><span class="id" title="variable">elt''</span></a> :=<br/>
&nbsp;<a class="idref" href="MMaps.AVL.html#MakeRaw.gmerge"><span class="id" title="definition">gmerge</span></a><br/>
&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="k:118" class="idref" href="#k:118"><span class="id" title="binder">k</span></a> <a id="d:119" class="idref" href="#d:119"><span class="id" title="binder">d</span></a> <a id="o:120" class="idref" href="#o:120"><span class="id" title="binder">o</span></a> ⇒ <a class="idref" href="MMaps.AVL.html#MakeRaw.Merge.f"><span class="id" title="variable">f</span></a> <a class="idref" href="MMaps.AVL.html#k:118"><span class="id" title="variable">k</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MMaps.AVL.html#d:119"><span class="id" title="variable">d</span></a>) <a class="idref" href="MMaps.AVL.html#o:120"><span class="id" title="variable">o</span></a>)<br/>
&nbsp;&nbsp;&nbsp;(<a class="idref" href="MMaps.AVL.html#MakeRaw.mapo"><span class="id" title="definition">mapo</span></a> (<span class="id" title="keyword">fun</span> <a id="k:116" class="idref" href="#k:116"><span class="id" title="binder">k</span></a> <a id="d:117" class="idref" href="#d:117"><span class="id" title="binder">d</span></a> ⇒ <a class="idref" href="MMaps.AVL.html#MakeRaw.Merge.f"><span class="id" title="variable">f</span></a> <a class="idref" href="MMaps.AVL.html#k:116"><span class="id" title="variable">k</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MMaps.AVL.html#d:117"><span class="id" title="variable">d</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>))<br/>
&nbsp;&nbsp;&nbsp;(<a class="idref" href="MMaps.AVL.html#MakeRaw.mapo"><span class="id" title="definition">mapo</span></a> (<span class="id" title="keyword">fun</span> <a id="k:114" class="idref" href="#k:114"><span class="id" title="binder">k</span></a> <a id="d':115" class="idref" href="#d':115"><span class="id" title="binder">d'</span></a> ⇒ <a class="idref" href="MMaps.AVL.html#MakeRaw.Merge.f"><span class="id" title="variable">f</span></a> <a class="idref" href="MMaps.AVL.html#k:114"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MMaps.AVL.html#d':115"><span class="id" title="variable">d'</span></a>))).<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.Merge"><span class="id" title="section">Merge</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab92"></a><h2 class="section">Correctness proofs</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Include</span> <a class="idref" href="MMaps.GenTree.html#Props"><span class="id" title="module">MMaps.GenTree.Props</span></a> <a class="idref" href="MMaps.AVL.html#K"><span class="id" title="module">K</span></a> <a class="idref" href="MMaps.AVL.html#I"><span class="id" title="module">I</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.Ind"><span class="id" title="module">Ind</span></a>.<br/>

<br/>
<span class="id" title="keyword">Local Infix</span> <a id="614b6fdfcfcc3407ab169267969be7fa" class="idref" href="#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">&quot;</span></a>∈" := <a class="idref" href="MMaps.AVL.html#MakeRaw.In"><span class="id" title="definition">In</span></a> (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 70).<br/>
<span class="id" title="keyword">Local Infix</span> <a id="3bfccbf8a360975b3a5598ce76c32491" class="idref" href="#3bfccbf8a360975b3a5598ce76c32491"><span class="id" title="notation">&quot;</span></a>==" := <a class="idref" href="MMaps.AVL.html#K.eq"><span class="id" title="axiom">K.eq</span></a> (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 70).<br/>
<span class="id" title="keyword">Local Infix</span> <a id="MakeRaw.:::x_'&lt;'_x" class="idref" href="#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&quot;</span></a>&lt;" := <a class="idref" href="MMaps.AVL.html#MakeRaw.lessthan"><span class="id" title="definition">lessthan</span></a>.<br/>
<span class="id" title="keyword">Local Notation</span> <a id="a97644d07168db193388b19cd1aad3cc" class="idref" href="#a97644d07168db193388b19cd1aad3cc"><span class="id" title="notation">&quot;</span></a>m @ x ↦ e" := (<a class="idref" href="MMaps.AVL.html#MakeRaw.MapsTo"><span class="id" title="inductive">MapsTo</span></a> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">m</span>)<br/>
&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 9, <span class="id" title="var">format</span> "m '@' x  '↦'  e").<br/>

<br/>
<span class="id" title="keyword">Functional Scheme</span> <span class="id" title="var">bal_ind</span> := <span class="id" title="keyword">Induction</span> <span class="id" title="keyword">for</span> <span class="id" title="var">bal</span> <span class="id" title="keyword">Sort</span> <span class="id" title="keyword">Prop</span>.<br/>
<span class="id" title="keyword">Functional Scheme</span> <span class="id" title="var">add_ind</span> := <span class="id" title="keyword">Induction</span> <span class="id" title="keyword">for</span> <span class="id" title="var">add</span> <span class="id" title="keyword">Sort</span> <span class="id" title="keyword">Prop</span>.<br/>
<span class="id" title="keyword">Functional Scheme</span> <span class="id" title="var">remove_min_ind</span> := <span class="id" title="keyword">Induction</span> <span class="id" title="keyword">for</span> <span class="id" title="var">remove_min</span> <span class="id" title="keyword">Sort</span> <span class="id" title="keyword">Prop</span>.<br/>
<span class="id" title="keyword">Functional Scheme</span> <span class="id" title="var">append_ind</span> := <span class="id" title="keyword">Induction</span> <span class="id" title="keyword">for</span> <span class="id" title="var">append</span> <span class="id" title="keyword">Sort</span> <span class="id" title="keyword">Prop</span>.<br/>
<span class="id" title="keyword">Functional Scheme</span> <span class="id" title="var">remove_ind</span> := <span class="id" title="keyword">Induction</span> <span class="id" title="keyword">for</span> <span class="id" title="var">remove</span> <span class="id" title="keyword">Sort</span> <span class="id" title="keyword">Prop</span>.<br/>
<span class="id" title="keyword">Functional Scheme</span> <span class="id" title="var">concat_ind</span> := <span class="id" title="keyword">Induction</span> <span class="id" title="keyword">for</span> <span class="id" title="var">concat</span> <span class="id" title="keyword">Sort</span> <span class="id" title="keyword">Prop</span>.<br/>
<span class="id" title="keyword">Functional Scheme</span> <span class="id" title="var">split_ind</span> := <span class="id" title="keyword">Induction</span> <span class="id" title="keyword">for</span> <span class="id" title="tactic">split</span> <span class="id" title="keyword">Sort</span> <span class="id" title="keyword">Prop</span>.<br/>
<span class="id" title="keyword">Functional Scheme</span> <span class="id" title="var">mapo_ind</span> := <span class="id" title="keyword">Induction</span> <span class="id" title="keyword">for</span> <span class="id" title="var">mapo</span> <span class="id" title="keyword">Sort</span> <span class="id" title="keyword">Prop</span>.<br/>
<span class="id" title="keyword">Functional Scheme</span> <span class="id" title="var">gmerge_ind</span> := <span class="id" title="keyword">Induction</span> <span class="id" title="keyword">for</span> <span class="id" title="var">gmerge</span> <span class="id" title="keyword">Sort</span> <span class="id" title="keyword">Prop</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab93"></a><h3 class="section">Automation and dedicated tactics</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Local Hint Constructors</span> <a class="idref" href="MMaps.AVL.html#tree"><span class="id" title="inductive">tree</span></a> <a class="idref" href="MMaps.AVL.html#MapsTo"><span class="id" title="inductive">MapsTo</span></a> <a class="idref" href="MMaps.AVL.html#Bst"><span class="id" title="inductive">Bst</span></a> : <span class="id" title="var">map</span>.<br/>
<span class="id" title="keyword">Local Hint Unfold</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.Ok"><span class="id" title="class">Ok</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Bst_Ok"><span class="id" title="instance">Bst_Ok</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.In"><span class="id" title="definition">In</span></a> : <span class="id" title="var">map</span>.<br/>
<span class="id" title="keyword">Local Hint Immediate</span> <span class="id" title="var">F.eq_sym</span> : <span class="id" title="var">map</span>.<br/>
<span class="id" title="keyword">Local Hint Resolve</span> <span class="id" title="var">F.eq_refl</span> : <span class="id" title="var">map</span>.<br/>
<span class="id" title="keyword">Local Hint Resolve</span> <span class="id" title="var">above_notin</span> <span class="id" title="var">above_trans</span> <span class="id" title="var">below_notin</span> <span class="id" title="var">below_trans</span> : <span class="id" title="var">map</span>.<br/>
<span class="id" title="keyword">Local Hint Resolve</span> <span class="id" title="var">above_leaf</span> <span class="id" title="var">below_leaf</span> : <span class="id" title="var">map</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Function/Functional&nbsp;Scheme&nbsp;can't&nbsp;deal&nbsp;with&nbsp;internal&nbsp;fix.<br/>
&nbsp;&nbsp;&nbsp;Let's&nbsp;do&nbsp;its&nbsp;job&nbsp;by&nbsp;hand:&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">join_tac</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span> <span class="id" title="var">d</span> <span class="id" title="var">r</span> :=<br/>
&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">x</span> <span class="id" title="var">d</span> <span class="id" title="var">r</span>;<br/>
&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">lh</span> <span class="id" title="var">ll</span> <span class="id" title="var">_</span> <span class="id" title="var">lx</span> <span class="id" title="var">ld</span> <span class="id" title="var">lr</span> <span class="id" title="var">Hlr</span>];<br/>
&nbsp;&nbsp;&nbsp;[ | <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">d</span> <span class="id" title="var">r</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">r</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">rh</span> <span class="id" title="var">rl</span> <span class="id" title="var">Hrl</span> <span class="id" title="var">rx</span> <span class="id" title="var">rd</span> <span class="id" title="var">rr</span> <span class="id" title="var">_</span>]; <span class="id" title="tactic">unfold</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.join"><span class="id" title="definition">join</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ | <span class="id" title="tactic">destruct</span> (<span class="id" title="var">rh</span><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#004c359642fbe9dbd252a6335642f93a"><span class="id" title="notation">+</span></a>2 <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#47c9f2ba1df6e1f4ba802291f555d67a"><span class="id" title="notation">&lt;?</span></a> <span class="id" title="var">lh</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">LT</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> |- <span class="id" title="keyword">context</span> [ <a class="idref" href="MMaps.AVL.html#MakeRaw.bal"><span class="id" title="definition">bal</span></a> ?<span class="id" title="var">u</span> ?<span class="id" title="var">v</span> ?<span class="id" title="var">w</span> ?<span class="id" title="var">z</span> ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.bal"><span class="id" title="definition">bal</span></a> <span class="id" title="var">u</span> <span class="id" title="var">v</span> <span class="id" title="var">w</span> <span class="id" title="var">z</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.bal"><span class="id" title="definition">bal</span></a> <span class="id" title="var">ll</span> <span class="id" title="var">lx</span> <span class="id" title="var">ld</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.join"><span class="id" title="definition">join</span></a> <span class="id" title="var">lr</span> <span class="id" title="var">x</span> <span class="id" title="var">d</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.Node"><span class="id" title="constructor">Node</span></a> <span class="id" title="var">rh</span> <span class="id" title="var">rl</span> <span class="id" title="var">rx</span> <span class="id" title="var">rd</span> <span class="id" title="var">rr</span>))); [ | <span class="id" title="tactic">auto</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="tactic">destruct</span> (<span class="id" title="var">lh</span><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#004c359642fbe9dbd252a6335642f93a"><span class="id" title="notation">+</span></a>2 <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#47c9f2ba1df6e1f4ba802291f555d67a"><span class="id" title="notation">&lt;?</span></a> <span class="id" title="var">rh</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">LT'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> |- <span class="id" title="keyword">context</span> [ <a class="idref" href="MMaps.AVL.html#MakeRaw.bal"><span class="id" title="definition">bal</span></a> ?<span class="id" title="var">u</span> ?<span class="id" title="var">v</span> ?<span class="id" title="var">w</span> ?<span class="id" title="var">z</span> ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.bal"><span class="id" title="definition">bal</span></a> <span class="id" title="var">u</span> <span class="id" title="var">v</span> <span class="id" title="var">w</span> <span class="id" title="var">z</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.bal"><span class="id" title="definition">bal</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.join"><span class="id" title="definition">join</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.Node"><span class="id" title="constructor">Node</span></a> <span class="id" title="var">lh</span> <span class="id" title="var">ll</span> <span class="id" title="var">lx</span> <span class="id" title="var">ld</span> <span class="id" title="var">lr</span>) <span class="id" title="var">x</span> <span class="id" title="var">d</span> <span class="id" title="var">rl</span>) <span class="id" title="var">rx</span> <span class="id" title="var">rd</span> <span class="id" title="var">rr</span>); [ | <span class="id" title="tactic">auto</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| ] ] ] ]; <span class="id" title="tactic">intros</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">cleansplit</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="var">cleanf</span>; <span class="id" title="var">invok</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">E</span>:<a class="idref" href="MMaps.AVL.html#MakeRaw.split"><span class="id" title="definition">split</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Triple"><span class="id" title="constructor">Triple</span></a> ?<span class="id" title="var">l</span> ?<span class="id" title="var">o</span> ?<span class="id" title="var">r</span> |- <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> <span class="id" title="var">l</span> <span class="id" title="keyword">with</span> (<a class="idref" href="MMaps.AVL.html#5fff6fc502757d8037705f89a213c279"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#MakeRaw.Triple"><span class="id" title="constructor">Triple</span></a> <span class="id" title="var">l</span> <span class="id" title="var">o</span> <span class="id" title="var">r</span><a class="idref" href="MMaps.AVL.html#5fff6fc502757d8037705f89a213c279"><span class="id" title="notation">)#</span></a><a class="idref" href="MMaps.AVL.html#5fff6fc502757d8037705f89a213c279"><span class="id" title="notation">l</span></a>); <span class="id" title="tactic">rewrite</span> &lt;- ?<span class="id" title="var">E</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> <span class="id" title="var">o</span> <span class="id" title="keyword">with</span> (<a class="idref" href="MMaps.AVL.html#b9b2aeecf364026dc3ff766f481a3c0e"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#MakeRaw.Triple"><span class="id" title="constructor">Triple</span></a> <span class="id" title="var">l</span> <span class="id" title="var">o</span> <span class="id" title="var">r</span><a class="idref" href="MMaps.AVL.html#b9b2aeecf364026dc3ff766f481a3c0e"><span class="id" title="notation">)#</span></a><a class="idref" href="MMaps.AVL.html#b9b2aeecf364026dc3ff766f481a3c0e"><span class="id" title="notation">o</span></a>); <span class="id" title="tactic">rewrite</span> &lt;- ?<span class="id" title="var">E</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> <span class="id" title="var">r</span> <span class="id" title="keyword">with</span> (<a class="idref" href="MMaps.AVL.html#12f28f29f6f580fcde6b740c6479ca68"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#MakeRaw.Triple"><span class="id" title="constructor">Triple</span></a> <span class="id" title="var">l</span> <span class="id" title="var">o</span> <span class="id" title="var">r</span><a class="idref" href="MMaps.AVL.html#12f28f29f6f580fcde6b740c6479ca68"><span class="id" title="notation">)#</span></a><a class="idref" href="MMaps.AVL.html#12f28f29f6f580fcde6b740c6479ca68"><span class="id" title="notation">r</span></a>); <span class="id" title="tactic">rewrite</span> &lt;- ?<span class="id" title="var">E</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="MakeRaw.Elt" class="idref" href="#MakeRaw.Elt"><span class="id" title="section">Elt</span></a>.<br/>
<span class="id" title="keyword">Variable</span> <a id="MakeRaw.Elt.elt" class="idref" href="#MakeRaw.Elt.elt"><span class="id" title="variable">elt</span></a>:<span class="id" title="keyword">Type</span>.<br/>
<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <a class="idref" href="MMaps.AVL.html#K.t"><span class="id" title="axiom">K.t</span></a>.<br/>
<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">m</span> <span class="id" title="var">r</span> : <a class="idref" href="MMaps.AVL.html#MakeRaw.t"><span class="id" title="definition">t</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Elt.elt"><span class="id" title="variable">elt</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab94"></a><h3 class="section">Helper functions</h3>

</div>
<div class="code">

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="MakeRaw.create_ok" class="idref" href="#MakeRaw.create_ok"><span class="id" title="instance">create_ok</span></a> <a id="l:712" class="idref" href="#l:712"><span class="id" title="binder">l</span></a> <a id="x:713" class="idref" href="#x:713"><span class="id" title="binder">x</span></a> <a id="e:714" class="idref" href="#e:714"><span class="id" title="binder">e</span></a> <a id="r:715" class="idref" href="#r:715"><span class="id" title="binder">r</span></a> `{<a id="Ok0:716" class="idref" href="#Ok0:716"><span class="id" title="binder">!</span></a><a id="Ok0:716" class="idref" href="#Ok0:716"><span class="id" title="binder">Ok</span></a> <a id="Ok0:716" class="idref" href="#Ok0:716"><span class="id" title="binder">l</span></a>, <a id="Ok1:717" class="idref" href="#Ok1:717"><span class="id" title="binder">!</span></a><a id="Ok1:717" class="idref" href="#Ok1:717"><span class="id" title="binder">Ok</span></a> <a id="Ok1:717" class="idref" href="#Ok1:717"><span class="id" title="binder">r</span></a>} :<br/>
&nbsp;<a class="idref" href="MMaps.AVL.html#l:712"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVL.html#x:713"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#x:713"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVL.html#r:715"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Ok"><span class="id" title="class">Ok</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.create"><span class="id" title="definition">create</span></a> <a class="idref" href="MMaps.AVL.html#l:712"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVL.html#x:713"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#e:714"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVL.html#r:715"><span class="id" title="variable">r</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.create"><span class="id" title="definition">create</span></a>; <span class="id" title="var">autok</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.create_in" class="idref" href="#MakeRaw.create_in"><span class="id" title="lemma">create_in</span></a> <a id="l:718" class="idref" href="#l:718"><span class="id" title="binder">l</span></a> <a id="x:719" class="idref" href="#x:719"><span class="id" title="binder">x</span></a> <a id="e:720" class="idref" href="#e:720"><span class="id" title="binder">e</span></a> <a id="r:721" class="idref" href="#r:721"><span class="id" title="binder">r</span></a> <a id="y:722" class="idref" href="#y:722"><span class="id" title="binder">y</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MMaps.AVL.html#y:722"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#MakeRaw.create"><span class="id" title="definition">create</span></a> <a class="idref" href="MMaps.AVL.html#l:718"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVL.html#x:719"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#e:720"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVL.html#r:721"><span class="id" title="variable">r</span></a><a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="MMaps.AVL.html#y:722"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#3bfccbf8a360975b3a5598ce76c32491"><span class="id" title="notation">==</span></a> <a class="idref" href="MMaps.AVL.html#x:719"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="MMaps.AVL.html#y:722"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <a class="idref" href="MMaps.AVL.html#l:718"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="MMaps.AVL.html#y:722"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <a class="idref" href="MMaps.AVL.html#r:721"><span class="id" title="variable">r</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.create"><span class="id" title="definition">create</span></a>. <span class="id" title="var">intuition_in</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.create_bindings" class="idref" href="#MakeRaw.create_bindings"><span class="id" title="lemma">create_bindings</span></a> <a id="l:723" class="idref" href="#l:723"><span class="id" title="binder">l</span></a> <a id="x:724" class="idref" href="#x:724"><span class="id" title="binder">x</span></a> <a id="e:725" class="idref" href="#e:725"><span class="id" title="binder">e</span></a> <a id="r:726" class="idref" href="#r:726"><span class="id" title="binder">r</span></a> :<br/>
&nbsp;<a class="idref" href="MMaps.AVL.html#MakeRaw.bindings"><span class="id" title="definition">bindings</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.create"><span class="id" title="definition">create</span></a> <a class="idref" href="MMaps.AVL.html#l:723"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVL.html#x:724"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#e:725"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVL.html#r:726"><span class="id" title="variable">r</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.bindings"><span class="id" title="definition">bindings</span></a> <a class="idref" href="MMaps.AVL.html#l:723"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#x:724"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="MMaps.AVL.html#e:725"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.bindings"><span class="id" title="definition">bindings</span></a> <a class="idref" href="MMaps.AVL.html#r:726"><span class="id" title="variable">r</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.bindings_node"><span class="id" title="lemma">bindings_node</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="MakeRaw.bal_ok" class="idref" href="#MakeRaw.bal_ok"><span class="id" title="instance">bal_ok</span></a> <a id="l:727" class="idref" href="#l:727"><span class="id" title="binder">l</span></a> <a id="x:728" class="idref" href="#x:728"><span class="id" title="binder">x</span></a> <a id="e:729" class="idref" href="#e:729"><span class="id" title="binder">e</span></a> <a id="r:730" class="idref" href="#r:730"><span class="id" title="binder">r</span></a> `{<a id="Ok0:731" class="idref" href="#Ok0:731"><span class="id" title="binder">!</span></a><a id="Ok0:731" class="idref" href="#Ok0:731"><span class="id" title="binder">Ok</span></a> <a id="Ok0:731" class="idref" href="#Ok0:731"><span class="id" title="binder">l</span></a>, <a id="Ok1:732" class="idref" href="#Ok1:732"><span class="id" title="binder">!</span></a><a id="Ok1:732" class="idref" href="#Ok1:732"><span class="id" title="binder">Ok</span></a> <a id="Ok1:732" class="idref" href="#Ok1:732"><span class="id" title="binder">r</span></a>} :<br/>
&nbsp;<a class="idref" href="MMaps.AVL.html#l:727"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVL.html#x:728"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#x:728"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVL.html#r:730"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Ok"><span class="id" title="class">Ok</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.bal"><span class="id" title="definition">bal</span></a> <a class="idref" href="MMaps.AVL.html#l:727"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVL.html#x:728"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#e:729"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVL.html#r:730"><span class="id" title="variable">r</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.bal"><span class="id" title="definition">bal</span></a> <span class="id" title="var">l</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">r</span>); <span class="id" title="tactic">intros</span>; <span class="id" title="var">cleanf</span>; <span class="id" title="var">invok</span>; <span class="id" title="var">invlt</span>;<br/>
&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.create_ok"><span class="id" title="instance">create_ok</span></a>; <span class="id" title="tactic">rewrite</span> ?<a class="idref" href="MMaps.AVL.html#MakeRaw.above_node"><span class="id" title="lemma">above_node</span></a>, ?<a class="idref" href="MMaps.AVL.html#MakeRaw.below_node"><span class="id" title="lemma">below_node</span></a>; <span class="id" title="tactic">intuition</span> (<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map</span>);<br/>
&nbsp;<span class="id" title="tactic">intro</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.create_in"><span class="id" title="lemma">create_in</span></a>; <span class="id" title="tactic">intuition</span>; <span class="id" title="var">order</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.bal_mapsto" class="idref" href="#MakeRaw.bal_mapsto"><span class="id" title="lemma">bal_mapsto</span></a> <a id="l:733" class="idref" href="#l:733"><span class="id" title="binder">l</span></a> <a id="x:734" class="idref" href="#x:734"><span class="id" title="binder">x</span></a> <a id="e:735" class="idref" href="#e:735"><span class="id" title="binder">e</span></a> <a id="r:736" class="idref" href="#r:736"><span class="id" title="binder">r</span></a> <a id="y:737" class="idref" href="#y:737"><span class="id" title="binder">y</span></a> <a id="e':738" class="idref" href="#e':738"><span class="id" title="binder">e'</span></a> :<br/>
&nbsp;<a class="idref" href="MMaps.AVL.html#MakeRaw.MapsTo"><span class="id" title="inductive">MapsTo</span></a> <a class="idref" href="MMaps.AVL.html#y:737"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#e':738"><span class="id" title="variable">e'</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.bal"><span class="id" title="definition">bal</span></a> <a class="idref" href="MMaps.AVL.html#l:733"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVL.html#x:734"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#e:735"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVL.html#r:736"><span class="id" title="variable">r</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.MapsTo"><span class="id" title="inductive">MapsTo</span></a> <a class="idref" href="MMaps.AVL.html#y:737"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#e':738"><span class="id" title="variable">e'</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.create"><span class="id" title="definition">create</span></a> <a class="idref" href="MMaps.AVL.html#l:733"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVL.html#x:734"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#e:735"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVL.html#r:736"><span class="id" title="variable">r</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.bal"><span class="id" title="definition">bal</span></a> <span class="id" title="var">l</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">r</span>); <span class="id" title="tactic">intros</span>; <span class="id" title="var">cleanf</span>;<br/>
&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.assert_false"><span class="id" title="definition">assert_false</span></a>, <a class="idref" href="MMaps.AVL.html#MakeRaw.create"><span class="id" title="definition">create</span></a>; <span class="id" title="var">intuition_m</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.bal_in" class="idref" href="#MakeRaw.bal_in"><span class="id" title="lemma">bal_in</span></a> <a id="l:739" class="idref" href="#l:739"><span class="id" title="binder">l</span></a> <a id="x:740" class="idref" href="#x:740"><span class="id" title="binder">x</span></a> <a id="e:741" class="idref" href="#e:741"><span class="id" title="binder">e</span></a> <a id="r:742" class="idref" href="#r:742"><span class="id" title="binder">r</span></a> <a id="y:743" class="idref" href="#y:743"><span class="id" title="binder">y</span></a> :<br/>
&nbsp;<a class="idref" href="MMaps.AVL.html#y:743"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#MakeRaw.bal"><span class="id" title="definition">bal</span></a> <a class="idref" href="MMaps.AVL.html#l:739"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVL.html#x:740"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#e:741"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVL.html#r:742"><span class="id" title="variable">r</span></a><a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="MMaps.AVL.html#y:743"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#3bfccbf8a360975b3a5598ce76c32491"><span class="id" title="notation">==</span></a> <a class="idref" href="MMaps.AVL.html#x:740"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="MMaps.AVL.html#y:743"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <a class="idref" href="MMaps.AVL.html#l:739"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="MMaps.AVL.html#y:743"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <a class="idref" href="MMaps.AVL.html#r:742"><span class="id" title="variable">r</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.In"><span class="id" title="definition">In</span></a>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.bal_mapsto"><span class="id" title="lemma">bal_mapsto</span></a>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.create"><span class="id" title="definition">create</span></a>.<br/>
&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.node_mapsto"><span class="id" title="lemma">node_mapsto</span></a>. <span class="id" title="tactic">firstorder</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">e</span>; <span class="id" title="tactic">firstorder</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.bal_find" class="idref" href="#MakeRaw.bal_find"><span class="id" title="lemma">bal_find</span></a> <a id="l:744" class="idref" href="#l:744"><span class="id" title="binder">l</span></a> <a id="x:745" class="idref" href="#x:745"><span class="id" title="binder">x</span></a> <a id="e:746" class="idref" href="#e:746"><span class="id" title="binder">e</span></a> <a id="r:747" class="idref" href="#r:747"><span class="id" title="binder">r</span></a> <a id="y:748" class="idref" href="#y:748"><span class="id" title="binder">y</span></a> `{<a id="Ok0:749" class="idref" href="#Ok0:749"><span class="id" title="binder">!</span></a><a id="Ok0:749" class="idref" href="#Ok0:749"><span class="id" title="binder">Ok</span></a> <a id="Ok0:749" class="idref" href="#Ok0:749"><span class="id" title="binder">l</span></a>, <a id="Ok1:750" class="idref" href="#Ok1:750"><span class="id" title="binder">!</span></a><a id="Ok1:750" class="idref" href="#Ok1:750"><span class="id" title="binder">Ok</span></a> <a id="Ok1:750" class="idref" href="#Ok1:750"><span class="id" title="binder">r</span></a>} :<br/>
&nbsp;<a class="idref" href="MMaps.AVL.html#l:744"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVL.html#x:745"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#x:745"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVL.html#r:747"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <a class="idref" href="MMaps.AVL.html#y:748"><span class="id" title="variable">y</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.bal"><span class="id" title="definition">bal</span></a> <a class="idref" href="MMaps.AVL.html#l:744"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVL.html#x:745"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#e:746"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVL.html#r:747"><span class="id" title="variable">r</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <a class="idref" href="MMaps.AVL.html#y:748"><span class="id" title="variable">y</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.create"><span class="id" title="definition">create</span></a> <a class="idref" href="MMaps.AVL.html#l:744"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVL.html#x:745"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#e:746"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVL.html#r:747"><span class="id" title="variable">r</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.bal"><span class="id" title="definition">bal</span></a> <span class="id" title="var">l</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">r</span>); <span class="id" title="tactic">intros</span>; <span class="id" title="var">cleanf</span>; <span class="id" title="tactic">trivial</span>;<br/>
&nbsp;<span class="id" title="var">invok</span>; <span class="id" title="var">invlt</span>; <span class="id" title="tactic">simpl</span>;<br/>
&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">case</span> <a class="idref" href="MMaps.AVL.html#K.compare_spec"><span class="id" title="axiom">K.compare_spec</span></a>; <span class="id" title="tactic">intuition</span>; <span class="id" title="var">order</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.bal_bindings" class="idref" href="#MakeRaw.bal_bindings"><span class="id" title="lemma">bal_bindings</span></a> <a id="l:751" class="idref" href="#l:751"><span class="id" title="binder">l</span></a> <a id="x:752" class="idref" href="#x:752"><span class="id" title="binder">x</span></a> <a id="e:753" class="idref" href="#e:753"><span class="id" title="binder">e</span></a> <a id="r:754" class="idref" href="#r:754"><span class="id" title="binder">r</span></a> :<br/>
&nbsp;<a class="idref" href="MMaps.AVL.html#MakeRaw.bindings"><span class="id" title="definition">bindings</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.bal"><span class="id" title="definition">bal</span></a> <a class="idref" href="MMaps.AVL.html#l:751"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVL.html#x:752"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#e:753"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVL.html#r:754"><span class="id" title="variable">r</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.bindings"><span class="id" title="definition">bindings</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.create"><span class="id" title="definition">create</span></a> <a class="idref" href="MMaps.AVL.html#l:751"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVL.html#x:752"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#e:753"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVL.html#r:754"><span class="id" title="variable">r</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.bal"><span class="id" title="definition">bal</span></a> <span class="id" title="var">l</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">r</span>); <span class="id" title="tactic">intros</span>; <span class="id" title="var">cleanf</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
singleton 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.singleton_spec" class="idref" href="#MakeRaw.singleton_spec"><span class="id" title="lemma">singleton_spec</span></a> <a id="x:755" class="idref" href="#x:755"><span class="id" title="binder">x</span></a> (<a id="e:756" class="idref" href="#e:756"><span class="id" title="binder">e</span></a>:<a class="idref" href="MMaps.AVL.html#MakeRaw.Elt.elt"><span class="id" title="variable">elt</span></a>) : <a class="idref" href="MMaps.AVL.html#MakeRaw.bindings"><span class="id" title="definition">bindings</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.singleton"><span class="id" title="definition">singleton</span></a> <a class="idref" href="MMaps.AVL.html#x:755"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#e:756"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#x:755"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="MMaps.AVL.html#e:756"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.singleton"><span class="id" title="definition">singleton</span></a>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.bindings_node"><span class="id" title="lemma">bindings_node</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="MakeRaw.singleton_ok" class="idref" href="#MakeRaw.singleton_ok"><span class="id" title="instance">singleton_ok</span></a> <a id="x:757" class="idref" href="#x:757"><span class="id" title="binder">x</span></a> (<a id="e:758" class="idref" href="#e:758"><span class="id" title="binder">e</span></a>:<a class="idref" href="MMaps.AVL.html#MakeRaw.Elt.elt"><span class="id" title="variable">elt</span></a>) : <a class="idref" href="MMaps.AVL.html#MakeRaw.Ok"><span class="id" title="class">Ok</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.singleton"><span class="id" title="definition">singleton</span></a> <a class="idref" href="MMaps.AVL.html#x:757"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#e:758"><span class="id" title="variable">e</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.singleton"><span class="id" title="definition">singleton</span></a>. <span class="id" title="var">autok</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab95"></a><h3 class="section">Insertion</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.add_in" class="idref" href="#MakeRaw.add_in"><span class="id" title="lemma">add_in</span></a> <a id="m:759" class="idref" href="#m:759"><span class="id" title="binder">m</span></a> <a id="x:760" class="idref" href="#x:760"><span class="id" title="binder">x</span></a> <a id="y:761" class="idref" href="#y:761"><span class="id" title="binder">y</span></a> <a id="e:762" class="idref" href="#e:762"><span class="id" title="binder">e</span></a> :<br/>
&nbsp;<a class="idref" href="MMaps.AVL.html#y:761"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#MakeRaw.add"><span class="id" title="definition">add</span></a> <a class="idref" href="MMaps.AVL.html#x:760"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#e:762"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVL.html#m:759"><span class="id" title="variable">m</span></a><a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="MMaps.AVL.html#y:761"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#3bfccbf8a360975b3a5598ce76c32491"><span class="id" title="notation">==</span></a> <a class="idref" href="MMaps.AVL.html#x:760"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="MMaps.AVL.html#y:761"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <a class="idref" href="MMaps.AVL.html#m:759"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.add"><span class="id" title="definition">add</span></a> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">m</span>); <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">cleanf</span>;<br/>
&nbsp;<span class="id" title="tactic">rewrite</span> ?<a class="idref" href="MMaps.AVL.html#MakeRaw.bal_in"><span class="id" title="lemma">bal_in</span></a>; <span class="id" title="var">intuition_in</span>. <span class="id" title="tactic">setoid_replace</span> <span class="id" title="var">y</span> <span class="id" title="keyword">with</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.add_lt" class="idref" href="#MakeRaw.add_lt"><span class="id" title="lemma">add_lt</span></a> <a id="m:763" class="idref" href="#m:763"><span class="id" title="binder">m</span></a> <a id="x:764" class="idref" href="#x:764"><span class="id" title="binder">x</span></a> <a id="e:765" class="idref" href="#e:765"><span class="id" title="binder">e</span></a> <a id="y:766" class="idref" href="#y:766"><span class="id" title="binder">y</span></a> : <a class="idref" href="MMaps.AVL.html#m:763"><span class="id" title="variable">m</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVL.html#y:766"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#x:764"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVL.html#y:766"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.add"><span class="id" title="definition">add</span></a> <a class="idref" href="MMaps.AVL.html#x:764"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#e:765"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVL.html#m:763"><span class="id" title="variable">m</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVL.html#y:766"><span class="id" title="variable">y</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">intros</span> ? ? <span class="id" title="var">z</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.add_in"><span class="id" title="lemma">add_in</span></a>. <span class="id" title="tactic">destruct</span> 1; <span class="id" title="var">order</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.add_gt" class="idref" href="#MakeRaw.add_gt"><span class="id" title="lemma">add_gt</span></a> <a id="m:767" class="idref" href="#m:767"><span class="id" title="binder">m</span></a> <a id="x:768" class="idref" href="#x:768"><span class="id" title="binder">x</span></a> <a id="e:769" class="idref" href="#e:769"><span class="id" title="binder">e</span></a> <a id="y:770" class="idref" href="#y:770"><span class="id" title="binder">y</span></a> : <a class="idref" href="MMaps.AVL.html#y:770"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVL.html#m:767"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#y:770"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVL.html#x:768"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#y:770"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.add"><span class="id" title="definition">add</span></a> <a class="idref" href="MMaps.AVL.html#x:768"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#e:769"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVL.html#m:767"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">intros</span> ? ? <span class="id" title="var">z</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.add_in"><span class="id" title="lemma">add_in</span></a>. <span class="id" title="tactic">destruct</span> 1; <span class="id" title="var">order</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Local Hint Resolve</span> <span class="id" title="var">add_lt</span> <span class="id" title="var">add_gt</span> : <span class="id" title="var">map</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="MakeRaw.add_ok" class="idref" href="#MakeRaw.add_ok"><span class="id" title="instance">add_ok</span></a> <a id="m:771" class="idref" href="#m:771"><span class="id" title="binder">m</span></a> <a id="x:772" class="idref" href="#x:772"><span class="id" title="binder">x</span></a> <a id="e:773" class="idref" href="#e:773"><span class="id" title="binder">e</span></a> `{<a id="Ok0:774" class="idref" href="#Ok0:774"><span class="id" title="binder">!</span></a><a id="Ok0:774" class="idref" href="#Ok0:774"><span class="id" title="binder">Ok</span></a> <a id="Ok0:774" class="idref" href="#Ok0:774"><span class="id" title="binder">m</span></a>} : <a class="idref" href="MMaps.AVL.html#MakeRaw.Ok"><span class="id" title="class">Ok</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.add"><span class="id" title="definition">add</span></a> <a class="idref" href="MMaps.AVL.html#x:772"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#e:773"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVL.html#m:771"><span class="id" title="variable">m</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.add"><span class="id" title="definition">add</span></a> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">m</span>); <span class="id" title="tactic">intros</span>; <span class="id" title="var">cleanf</span>; <span class="id" title="var">invok</span>; <span class="id" title="var">autok</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.add_spec1" class="idref" href="#MakeRaw.add_spec1"><span class="id" title="lemma">add_spec1</span></a> <a id="m:775" class="idref" href="#m:775"><span class="id" title="binder">m</span></a> <a id="x:776" class="idref" href="#x:776"><span class="id" title="binder">x</span></a> <a id="e:777" class="idref" href="#e:777"><span class="id" title="binder">e</span></a> `{<a id="Ok0:778" class="idref" href="#Ok0:778"><span class="id" title="binder">!</span></a><a id="Ok0:778" class="idref" href="#Ok0:778"><span class="id" title="binder">Ok</span></a> <a id="Ok0:778" class="idref" href="#Ok0:778"><span class="id" title="binder">m</span></a>} : <a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <a class="idref" href="MMaps.AVL.html#x:776"><span class="id" title="variable">x</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.add"><span class="id" title="definition">add</span></a> <a class="idref" href="MMaps.AVL.html#x:776"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#e:777"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVL.html#m:775"><span class="id" title="variable">m</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MMaps.AVL.html#e:777"><span class="id" title="variable">e</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.add"><span class="id" title="definition">add</span></a> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">m</span>); <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">cleanf</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.compare_refl"><span class="id" title="lemma">F.compare_refl</span></a>.<br/>
&nbsp;- <span class="id" title="var">invok</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.bal_find"><span class="id" title="lemma">bal_find</span></a>; <span class="id" title="var">autok</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">case</span> <a class="idref" href="MMaps.AVL.html#K.compare_spec"><span class="id" title="axiom">K.compare_spec</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">order</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;- <span class="id" title="var">invok</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.bal_find"><span class="id" title="lemma">bal_find</span></a>; <span class="id" title="var">autok</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">case</span> <a class="idref" href="MMaps.AVL.html#K.compare_spec"><span class="id" title="axiom">K.compare_spec</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">order</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.add_spec2" class="idref" href="#MakeRaw.add_spec2"><span class="id" title="lemma">add_spec2</span></a> <a id="m:779" class="idref" href="#m:779"><span class="id" title="binder">m</span></a> <a id="x:780" class="idref" href="#x:780"><span class="id" title="binder">x</span></a> <a id="y:781" class="idref" href="#y:781"><span class="id" title="binder">y</span></a> <a id="e:782" class="idref" href="#e:782"><span class="id" title="binder">e</span></a> `{<a id="Ok0:783" class="idref" href="#Ok0:783"><span class="id" title="binder">!</span></a><a id="Ok0:783" class="idref" href="#Ok0:783"><span class="id" title="binder">Ok</span></a> <a id="Ok0:783" class="idref" href="#Ok0:783"><span class="id" title="binder">m</span></a>} : <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a> <a class="idref" href="MMaps.AVL.html#x:780"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#3bfccbf8a360975b3a5598ce76c32491"><span class="id" title="notation">==</span></a> <a class="idref" href="MMaps.AVL.html#y:781"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;<a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <a class="idref" href="MMaps.AVL.html#y:781"><span class="id" title="variable">y</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.add"><span class="id" title="definition">add</span></a> <a class="idref" href="MMaps.AVL.html#x:780"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#e:782"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVL.html#m:779"><span class="id" title="variable">m</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <a class="idref" href="MMaps.AVL.html#y:781"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#m:779"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.add"><span class="id" title="definition">add</span></a> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">m</span>); <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">cleanf</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;- <span class="id" title="tactic">case</span> <a class="idref" href="MMaps.AVL.html#K.compare_spec"><span class="id" title="axiom">K.compare_spec</span></a>; <span class="id" title="tactic">trivial</span>; <span class="id" title="var">order</span>.<br/>
&nbsp;- <span class="id" title="tactic">case</span> <a class="idref" href="MMaps.AVL.html#K.compare_spec"><span class="id" title="axiom">K.compare_spec</span></a>; <span class="id" title="tactic">trivial</span>; <span class="id" title="var">order</span>.<br/>
&nbsp;- <span class="id" title="var">invok</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.bal_find"><span class="id" title="lemma">bal_find</span></a> <span class="id" title="tactic">by</span> <span class="id" title="var">autok</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHt0</span>.<br/>
&nbsp;- <span class="id" title="var">invok</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.bal_find"><span class="id" title="lemma">bal_find</span></a> <span class="id" title="tactic">by</span> <span class="id" title="var">autok</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHt0</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.add_find" class="idref" href="#MakeRaw.add_find"><span class="id" title="lemma">add_find</span></a> <a id="m:784" class="idref" href="#m:784"><span class="id" title="binder">m</span></a> <a id="x:785" class="idref" href="#x:785"><span class="id" title="binder">x</span></a> <a id="y:786" class="idref" href="#y:786"><span class="id" title="binder">y</span></a> <a id="e:787" class="idref" href="#e:787"><span class="id" title="binder">e</span></a> `{<a id="Ok0:788" class="idref" href="#Ok0:788"><span class="id" title="binder">!</span></a><a id="Ok0:788" class="idref" href="#Ok0:788"><span class="id" title="binder">Ok</span></a> <a id="Ok0:788" class="idref" href="#Ok0:788"><span class="id" title="binder">m</span></a>} :<br/>
&nbsp;<a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <a class="idref" href="MMaps.AVL.html#y:786"><span class="id" title="variable">y</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.add"><span class="id" title="definition">add</span></a> <a class="idref" href="MMaps.AVL.html#x:785"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#e:787"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVL.html#m:784"><span class="id" title="variable">m</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MMaps.AVL.html#K.compare"><span class="id" title="axiom">K.compare</span></a> <a class="idref" href="MMaps.AVL.html#y:786"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#x:785"><span class="id" title="variable">x</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#Eq"><span class="id" title="constructor">Eq</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MMaps.AVL.html#e:787"><span class="id" title="variable">e</span></a> | <span class="id" title="var">_</span> ⇒ <a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <a class="idref" href="MMaps.AVL.html#y:786"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#m:784"><span class="id" title="variable">m</span></a> <span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">case</span> <a class="idref" href="MMaps.AVL.html#K.compare_spec"><span class="id" title="axiom">K.compare_spec</span></a>; <span class="id" title="tactic">intros</span> <span class="id" title="var">E</span>.<br/>
&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.find_spec"><span class="id" title="lemma">find_spec</span></a>; <span class="id" title="var">autok</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">E</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.find_spec"><span class="id" title="lemma">find_spec</span></a>; <span class="id" title="var">autok</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.add_spec1"><span class="id" title="lemma">add_spec1</span></a>.<br/>
&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.add_spec2"><span class="id" title="lemma">add_spec2</span></a>; <span class="id" title="tactic">trivial</span>; <span class="id" title="var">order</span>.<br/>
&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.add_spec2"><span class="id" title="lemma">add_spec2</span></a>; <span class="id" title="tactic">trivial</span>; <span class="id" title="var">order</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.add_below_bindings" class="idref" href="#MakeRaw.add_below_bindings"><span class="id" title="lemma">add_below_bindings</span></a> <a id="x:789" class="idref" href="#x:789"><span class="id" title="binder">x</span></a> <a id="e:790" class="idref" href="#e:790"><span class="id" title="binder">e</span></a> <a id="m:791" class="idref" href="#m:791"><span class="id" title="binder">m</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MMaps.AVL.html#x:789"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVL.html#m:791"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MMaps.AVL.html#MakeRaw.bindings"><span class="id" title="definition">bindings</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.add"><span class="id" title="definition">add</span></a> <a class="idref" href="MMaps.AVL.html#x:789"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#e:790"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVL.html#m:791"><span class="id" title="variable">m</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#x:789"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MMaps.AVL.html#e:790"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.bindings"><span class="id" title="definition">bindings</span></a> <a class="idref" href="MMaps.AVL.html#m:791"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.add"><span class="id" title="definition">add</span></a> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">m</span>); <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">cleanf</span>; <span class="id" title="tactic">trivial</span>;<br/>
&nbsp;<span class="id" title="var">invlt</span>; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">intuition</span>; <span class="id" title="var">order</span>).<br/>
&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.bal_bindings"><span class="id" title="lemma">bal_bindings</span></a>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.create"><span class="id" title="definition">create</span></a>. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MMaps.AVL.html#MakeRaw.bindings_node"><span class="id" title="lemma">bindings_node</span></a>.<br/>
&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHt0</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.add_above_bindings" class="idref" href="#MakeRaw.add_above_bindings"><span class="id" title="lemma">add_above_bindings</span></a> <a id="x:792" class="idref" href="#x:792"><span class="id" title="binder">x</span></a> <a id="e:793" class="idref" href="#e:793"><span class="id" title="binder">e</span></a> <a id="m:794" class="idref" href="#m:794"><span class="id" title="binder">m</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MMaps.AVL.html#m:794"><span class="id" title="variable">m</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVL.html#x:792"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MMaps.AVL.html#MakeRaw.bindings"><span class="id" title="definition">bindings</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.add"><span class="id" title="definition">add</span></a> <a class="idref" href="MMaps.AVL.html#x:792"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#e:793"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVL.html#m:794"><span class="id" title="variable">m</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.bindings"><span class="id" title="definition">bindings</span></a> <a class="idref" href="MMaps.AVL.html#m:794"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#x:792"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="MMaps.AVL.html#e:793"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.add"><span class="id" title="definition">add</span></a> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">m</span>); <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">cleanf</span>; <span class="id" title="tactic">trivial</span>;<br/>
&nbsp;<span class="id" title="var">invlt</span>; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">intuition</span>; <span class="id" title="var">order</span>).<br/>
&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.bal_bindings"><span class="id" title="lemma">bal_bindings</span></a>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.create"><span class="id" title="definition">create</span></a>. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MMaps.AVL.html#MakeRaw.bindings_node"><span class="id" title="lemma">bindings_node</span></a>.<br/>
&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">intuition</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab96"></a><h3 class="section">Extraction of minimum binding</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="MakeRaw.RemoveMin" class="idref" href="#MakeRaw.RemoveMin"><span class="id" title="definition">RemoveMin</span></a> <a id="m:795" class="idref" href="#m:795"><span class="id" title="binder">m</span></a> <a id="res:796" class="idref" href="#res:796"><span class="id" title="binder">res</span></a> :=<br/>
&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MMaps.AVL.html#m:795"><span class="id" title="variable">m</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;| <a class="idref" href="MMaps.AVL.html#MakeRaw.Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a><br/>
&nbsp;| <a class="idref" href="MMaps.AVL.html#MakeRaw.Node"><span class="id" title="constructor">Node</span></a> <span class="id" title="var">h</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">r</span> ⇒ <a class="idref" href="MMaps.AVL.html#MakeRaw.remove_min"><span class="id" title="definition">remove_min</span></a> <span class="id" title="var">l</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">r</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MMaps.AVL.html#res:796"><span class="id" title="variable">res</span></a><br/>
&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.RemoveMin_step" class="idref" href="#MakeRaw.RemoveMin_step"><span class="id" title="lemma">RemoveMin_step</span></a> <a id="l:798" class="idref" href="#l:798"><span class="id" title="binder">l</span></a> <a id="x:799" class="idref" href="#x:799"><span class="id" title="binder">x</span></a> <a id="e:800" class="idref" href="#e:800"><span class="id" title="binder">e</span></a> <a id="r:801" class="idref" href="#r:801"><span class="id" title="binder">r</span></a> <a id="h:802" class="idref" href="#h:802"><span class="id" title="binder">h</span></a> <a id="m':803" class="idref" href="#m':803"><span class="id" title="binder">m'</span></a> <a id="p:804" class="idref" href="#p:804"><span class="id" title="binder">p</span></a> :<br/>
&nbsp;<a class="idref" href="MMaps.AVL.html#MakeRaw.RemoveMin"><span class="id" title="definition">RemoveMin</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.Node"><span class="id" title="constructor">Node</span></a> <a class="idref" href="MMaps.AVL.html#h:802"><span class="id" title="variable">h</span></a> <a class="idref" href="MMaps.AVL.html#l:798"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVL.html#x:799"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#e:800"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVL.html#r:801"><span class="id" title="variable">r</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#m':803"><span class="id" title="variable">m'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="MMaps.AVL.html#p:804"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#l:798"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="MMaps.AVL.html#m':803"><span class="id" title="variable">m'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MMaps.AVL.html#r:801"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="MMaps.AVL.html#p:804"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#x:799"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="MMaps.AVL.html#e:800"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="m0:805" class="idref" href="#m0:805"><span class="id" title="binder">m0</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.RemoveMin"><span class="id" title="definition">RemoveMin</span></a> <a class="idref" href="MMaps.AVL.html#l:798"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#m0:805"><span class="id" title="variable">m0</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="MMaps.AVL.html#p:804"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="MMaps.AVL.html#m':803"><span class="id" title="variable">m'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.bal"><span class="id" title="definition">bal</span></a> <a class="idref" href="MMaps.AVL.html#m0:805"><span class="id" title="variable">m0</span></a> <a class="idref" href="MMaps.AVL.html#x:799"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#e:800"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVL.html#r:801"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">lh</span> <span class="id" title="var">ll</span> <span class="id" title="var">lx</span> <span class="id" title="var">le</span> <span class="id" title="var">lr</span>]; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;- <span class="id" title="tactic">intros</span> [= &lt;- &lt;-]. <span class="id" title="var">now</span> <span class="id" title="tactic">left</span>.<br/>
&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.remove_min"><span class="id" title="definition">remove_min</span></a> <span class="id" title="var">ll</span> <span class="id" title="var">lx</span> <span class="id" title="var">le</span> <span class="id" title="var">lr</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">l'</span>,<span class="id" title="var">p'</span>).<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [= &lt;- &lt;-]. <span class="id" title="tactic">right</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">∃</span> <span class="id" title="var">l'</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.remove_min_mapsto" class="idref" href="#MakeRaw.remove_min_mapsto"><span class="id" title="lemma">remove_min_mapsto</span></a> <a id="m:806" class="idref" href="#m:806"><span class="id" title="binder">m</span></a> <a id="m':807" class="idref" href="#m':807"><span class="id" title="binder">m'</span></a> <a id="p:808" class="idref" href="#p:808"><span class="id" title="binder">p</span></a> : <a class="idref" href="MMaps.AVL.html#MakeRaw.RemoveMin"><span class="id" title="definition">RemoveMin</span></a> <a class="idref" href="MMaps.AVL.html#m:806"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#m':807"><span class="id" title="variable">m'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="MMaps.AVL.html#p:808"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;<span class="id" title="keyword">∀</span> <a id="y:809" class="idref" href="#y:809"><span class="id" title="binder">y</span></a> <a id="e:810" class="idref" href="#e:810"><span class="id" title="binder">e</span></a>,<br/>
&nbsp;<a class="idref" href="MMaps.AVL.html#MakeRaw.MapsTo"><span class="id" title="inductive">MapsTo</span></a> <a class="idref" href="MMaps.AVL.html#y:809"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#e:810"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVL.html#m:806"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#y:809"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#3bfccbf8a360975b3a5598ce76c32491"><span class="id" title="notation">==</span></a> <a class="idref" href="MMaps.AVL.html#p:808"><span class="id" title="variable">p</span></a><a class="idref" href="MMaps.GenTree.html#6498f4b98d8d188be6bde7da0b9ffb6f"><span class="id" title="notation">#1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="MMaps.AVL.html#e:810"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MMaps.AVL.html#p:808"><span class="id" title="variable">p</span></a><a class="idref" href="MMaps.GenTree.html#030f3fafcfea0e4883e66553a16aff42"><span class="id" title="notation">#2</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.MapsTo"><span class="id" title="inductive">MapsTo</span></a> <a class="idref" href="MMaps.AVL.html#y:809"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#e:810"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVL.html#m':807"><span class="id" title="variable">m'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">m'</span>.<br/>
&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">h</span> <span class="id" title="var">l</span> <span class="id" title="var">IH</span> <span class="id" title="var">x</span> <span class="id" title="var">d</span> <span class="id" title="var">r</span> <span class="id" title="var">_</span>]; [<span class="id" title="tactic">destruct</span> 1|].<br/>
&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">m'</span> <span class="id" title="var">R</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.RemoveMin_step"><span class="id" title="lemma">RemoveMin_step</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">R</span>.<br/>
&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">R</span> <span class="id" title="keyword">as</span> [(-&gt;,(-&gt;,-&gt;))|[<span class="id" title="var">m0</span> (<span class="id" title="var">R</span>,-&gt;)]]; <span class="id" title="tactic">intros</span> <span class="id" title="var">y</span> <span class="id" title="var">e</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;- <span class="id" title="var">intuition_m</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.bal_mapsto"><span class="id" title="lemma">bal_mapsto</span></a>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.create"><span class="id" title="definition">create</span></a>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IH</span> <span class="id" title="var">_</span> <span class="id" title="var">R</span> <span class="id" title="var">y</span> <span class="id" title="var">e</span>).<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">intuition_m</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.remove_min_in" class="idref" href="#MakeRaw.remove_min_in"><span class="id" title="lemma">remove_min_in</span></a> <a id="m:811" class="idref" href="#m:811"><span class="id" title="binder">m</span></a> <a id="m':812" class="idref" href="#m':812"><span class="id" title="binder">m'</span></a> <a id="p:813" class="idref" href="#p:813"><span class="id" title="binder">p</span></a> : <a class="idref" href="MMaps.AVL.html#MakeRaw.RemoveMin"><span class="id" title="definition">RemoveMin</span></a> <a class="idref" href="MMaps.AVL.html#m:811"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#m':812"><span class="id" title="variable">m'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="MMaps.AVL.html#p:813"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;<span class="id" title="keyword">∀</span> <a id="y:814" class="idref" href="#y:814"><span class="id" title="binder">y</span></a>, <a class="idref" href="MMaps.AVL.html#y:814"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <a class="idref" href="MMaps.AVL.html#m:811"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="MMaps.AVL.html#y:814"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#3bfccbf8a360975b3a5598ce76c32491"><span class="id" title="notation">==</span></a> <a class="idref" href="MMaps.AVL.html#p:813"><span class="id" title="variable">p</span></a><a class="idref" href="MMaps.GenTree.html#6498f4b98d8d188be6bde7da0b9ffb6f"><span class="id" title="notation">#1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="MMaps.AVL.html#y:814"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <a class="idref" href="MMaps.AVL.html#m':812"><span class="id" title="variable">m'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span> <span class="id" title="var">y</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.In"><span class="id" title="definition">In</span></a>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">H'</span> := <a class="idref" href="MMaps.AVL.html#MakeRaw.remove_min_mapsto"><span class="id" title="lemma">remove_min_mapsto</span></a> <span class="id" title="var">H</span> <span class="id" title="var">y</span>).<br/>
&nbsp;<span class="id" title="tactic">firstorder</span>. <span class="id" title="tactic">∃</span> (<span class="id" title="var">p</span><a class="idref" href="MMaps.GenTree.html#030f3fafcfea0e4883e66553a16aff42"><span class="id" title="notation">#2</span></a>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H'</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">left</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.remove_min_lt" class="idref" href="#MakeRaw.remove_min_lt"><span class="id" title="lemma">remove_min_lt</span></a> <a id="m:815" class="idref" href="#m:815"><span class="id" title="binder">m</span></a> <a id="m':816" class="idref" href="#m':816"><span class="id" title="binder">m'</span></a> <a id="p:817" class="idref" href="#p:817"><span class="id" title="binder">p</span></a> : <a class="idref" href="MMaps.AVL.html#MakeRaw.RemoveMin"><span class="id" title="definition">RemoveMin</span></a> <a class="idref" href="MMaps.AVL.html#m:815"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#m':816"><span class="id" title="variable">m'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="MMaps.AVL.html#p:817"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;<span class="id" title="keyword">∀</span> <a id="y:818" class="idref" href="#y:818"><span class="id" title="binder">y</span></a>, <a class="idref" href="MMaps.AVL.html#m:815"><span class="id" title="variable">m</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVL.html#y:818"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#m':816"><span class="id" title="variable">m'</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVL.html#y:818"><span class="id" title="variable">y</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">R</span> <span class="id" title="var">y</span> <span class="id" title="var">L</span> <span class="id" title="var">z</span> <span class="id" title="var">Hz</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">L</span>. <span class="id" title="tactic">apply</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.remove_min_in"><span class="id" title="lemma">remove_min_in</span></a> <span class="id" title="var">R</span>). <span class="id" title="var">now</span> <span class="id" title="tactic">right</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Local Hint Resolve</span> <span class="id" title="var">remove_min_lt</span> : <span class="id" title="var">map</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.remove_min_gt" class="idref" href="#MakeRaw.remove_min_gt"><span class="id" title="lemma">remove_min_gt</span></a> <a id="m:819" class="idref" href="#m:819"><span class="id" title="binder">m</span></a> <a id="m':820" class="idref" href="#m':820"><span class="id" title="binder">m'</span></a> <a id="p:821" class="idref" href="#p:821"><span class="id" title="binder">p</span></a> `{<a id="Ok0:822" class="idref" href="#Ok0:822"><span class="id" title="binder">!</span></a><a id="Ok0:822" class="idref" href="#Ok0:822"><span class="id" title="binder">Ok</span></a> <a id="Ok0:822" class="idref" href="#Ok0:822"><span class="id" title="binder">m</span></a>} : <a class="idref" href="MMaps.AVL.html#MakeRaw.RemoveMin"><span class="id" title="definition">RemoveMin</span></a> <a class="idref" href="MMaps.AVL.html#m:819"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#m':820"><span class="id" title="variable">m'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="MMaps.AVL.html#p:821"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;<a class="idref" href="MMaps.AVL.html#p:821"><span class="id" title="variable">p</span></a><a class="idref" href="MMaps.GenTree.html#6498f4b98d8d188be6bde7da0b9ffb6f"><span class="id" title="notation">#1</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVL.html#m':820"><span class="id" title="variable">m'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">m'</span>.<br/>
&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">h</span> <span class="id" title="var">l</span> <span class="id" title="var">IH</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">r</span> <span class="id" title="var">_</span>]; [<span class="id" title="tactic">destruct</span> 1|].<br/>
&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">m'</span> <span class="id" title="var">R</span>. <span class="id" title="var">invok</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.RemoveMin_step"><span class="id" title="lemma">RemoveMin_step</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">R</span>.<br/>
&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">R</span> <span class="id" title="keyword">as</span> [(<span class="id" title="var">_</span>,(-&gt;,-&gt;))|[<span class="id" title="var">m0</span> (<span class="id" title="var">R</span>,-&gt;)]]; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">p</span><a class="idref" href="MMaps.GenTree.html#6498f4b98d8d188be6bde7da0b9ffb6f"><span class="id" title="notation">#1</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <span class="id" title="var">m0</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">p</span><a class="idref" href="MMaps.GenTree.html#6498f4b98d8d188be6bde7da0b9ffb6f"><span class="id" title="notation">#1</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <span class="id" title="var">l</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">apply</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.remove_min_in"><span class="id" title="lemma">remove_min_in</span></a> <span class="id" title="var">R</span>); <span class="id" title="var">now</span> <span class="id" title="tactic">left</span>).<br/>
&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">z</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.bal_in"><span class="id" title="lemma">bal_in</span></a>. <span class="id" title="tactic">intuition</span>; <span class="id" title="var">order</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="MakeRaw.remove_min_ok" class="idref" href="#MakeRaw.remove_min_ok"><span class="id" title="instance">remove_min_ok</span></a> <a id="m:823" class="idref" href="#m:823"><span class="id" title="binder">m</span></a> <a id="m':824" class="idref" href="#m':824"><span class="id" title="binder">m'</span></a> <a id="p:825" class="idref" href="#p:825"><span class="id" title="binder">p</span></a> `{<a id="Ok0:826" class="idref" href="#Ok0:826"><span class="id" title="binder">!</span></a><a id="Ok0:826" class="idref" href="#Ok0:826"><span class="id" title="binder">Ok</span></a> <a id="Ok0:826" class="idref" href="#Ok0:826"><span class="id" title="binder">m</span></a>} : <a class="idref" href="MMaps.AVL.html#MakeRaw.RemoveMin"><span class="id" title="definition">RemoveMin</span></a> <a class="idref" href="MMaps.AVL.html#m:823"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#m':824"><span class="id" title="variable">m'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="MMaps.AVL.html#p:825"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Ok"><span class="id" title="class">Ok</span></a> <a class="idref" href="MMaps.AVL.html#m':824"><span class="id" title="variable">m'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">m'</span>.<br/>
&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">h</span> <span class="id" title="var">l</span> <span class="id" title="var">IH</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">r</span> <span class="id" title="var">_</span>]; [<span class="id" title="tactic">destruct</span> 1|].<br/>
&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">m'</span> <span class="id" title="var">R</span>. <span class="id" title="var">invok</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.RemoveMin_step"><span class="id" title="lemma">RemoveMin_step</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">R</span>.<br/>
&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">R</span> <span class="id" title="keyword">as</span> [(<span class="id" title="var">_</span>,(-&gt;,-&gt;))|[<span class="id" title="var">m0</span> (<span class="id" title="var">R</span>,-&gt;)]]; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> ×.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.remove_min_find" class="idref" href="#MakeRaw.remove_min_find"><span class="id" title="lemma">remove_min_find</span></a> <a id="m:827" class="idref" href="#m:827"><span class="id" title="binder">m</span></a> <a id="m':828" class="idref" href="#m':828"><span class="id" title="binder">m'</span></a> <a id="p:829" class="idref" href="#p:829"><span class="id" title="binder">p</span></a> `{<a id="Ok0:830" class="idref" href="#Ok0:830"><span class="id" title="binder">!</span></a><a id="Ok0:830" class="idref" href="#Ok0:830"><span class="id" title="binder">Ok</span></a> <a id="Ok0:830" class="idref" href="#Ok0:830"><span class="id" title="binder">m</span></a>} : <a class="idref" href="MMaps.AVL.html#MakeRaw.RemoveMin"><span class="id" title="definition">RemoveMin</span></a> <a class="idref" href="MMaps.AVL.html#m:827"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#m':828"><span class="id" title="variable">m'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="MMaps.AVL.html#p:829"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;<span class="id" title="keyword">∀</span> <a id="y:831" class="idref" href="#y:831"><span class="id" title="binder">y</span></a>,<br/>
&nbsp;<a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <a class="idref" href="MMaps.AVL.html#y:831"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#m:827"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MMaps.AVL.html#K.compare"><span class="id" title="axiom">K.compare</span></a> <a class="idref" href="MMaps.AVL.html#y:831"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#p:829"><span class="id" title="variable">p</span></a><a class="idref" href="MMaps.GenTree.html#6498f4b98d8d188be6bde7da0b9ffb6f"><span class="id" title="notation">#1</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#Eq"><span class="id" title="constructor">Eq</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MMaps.AVL.html#p:829"><span class="id" title="variable">p</span></a><a class="idref" href="MMaps.GenTree.html#030f3fafcfea0e4883e66553a16aff42"><span class="id" title="notation">#2</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#Lt"><span class="id" title="constructor">Lt</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#Gt"><span class="id" title="constructor">Gt</span></a> ⇒ <a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <a class="idref" href="MMaps.AVL.html#y:831"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#m':828"><span class="id" title="variable">m'</span></a><br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">m'</span>.<br/>
&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">h</span> <span class="id" title="var">l</span> <span class="id" title="var">IH</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">r</span> <span class="id" title="var">_</span>]; [<span class="id" title="tactic">destruct</span> 1|].<br/>
&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">m'</span> <span class="id" title="var">R</span> <span class="id" title="var">y</span>. <span class="id" title="var">invok</span>.<br/>
&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.RemoveMin_step"><span class="id" title="lemma">RemoveMin_step</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">R</span>.<br/>
&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">R</span> <span class="id" title="keyword">as</span> [(-&gt;,(-&gt;,-&gt;))|[<span class="id" title="var">m0</span> (<span class="id" title="var">R</span>,-&gt;)]]; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.Ok"><span class="id" title="class">Ok</span></a> <span class="id" title="var">m0</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.remove_min_ok"><span class="id" title="instance">remove_min_ok</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">R</span>.<br/>
&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">p</span><a class="idref" href="MMaps.GenTree.html#6498f4b98d8d188be6bde7da0b9ffb6f"><span class="id" title="notation">#1</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <span class="id" title="var">m0</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.remove_min_gt"><span class="id" title="lemma">remove_min_gt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">R</span>.<br/>
&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">m0</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <span class="id" title="var">x</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.remove_min_lt"><span class="id" title="lemma">remove_min_lt</span></a> <span class="id" title="var">R</span>).<br/>
&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">p</span><a class="idref" href="MMaps.GenTree.html#6498f4b98d8d188be6bde7da0b9ffb6f"><span class="id" title="notation">#1</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <span class="id" title="var">l</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">apply</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.remove_min_in"><span class="id" title="lemma">remove_min_in</span></a> <span class="id" title="var">R</span>); <span class="id" title="var">now</span> <span class="id" title="tactic">left</span>).<br/>
&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">IH</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">R</span>), <a class="idref" href="MMaps.AVL.html#MakeRaw.bal_find"><span class="id" title="lemma">bal_find</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">trivial</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">IH</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">case</span> <a class="idref" href="MMaps.AVL.html#K.compare_spec"><span class="id" title="axiom">K.compare_spec</span></a>; <span class="id" title="tactic">trivial</span>; <span class="id" title="var">order</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.remove_min_bindings" class="idref" href="#MakeRaw.remove_min_bindings"><span class="id" title="lemma">remove_min_bindings</span></a> <a id="m:832" class="idref" href="#m:832"><span class="id" title="binder">m</span></a> <a id="m':833" class="idref" href="#m':833"><span class="id" title="binder">m'</span></a> <a id="p:834" class="idref" href="#p:834"><span class="id" title="binder">p</span></a> : <a class="idref" href="MMaps.AVL.html#MakeRaw.RemoveMin"><span class="id" title="definition">RemoveMin</span></a> <a class="idref" href="MMaps.AVL.html#m:832"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#m':833"><span class="id" title="variable">m'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="MMaps.AVL.html#p:834"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;<a class="idref" href="MMaps.AVL.html#MakeRaw.bindings"><span class="id" title="definition">bindings</span></a> <a class="idref" href="MMaps.AVL.html#m:832"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MMaps.AVL.html#p:834"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.bindings"><span class="id" title="definition">bindings</span></a> <a class="idref" href="MMaps.AVL.html#m':833"><span class="id" title="variable">m'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">m'</span>.<br/>
&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">h</span> <span class="id" title="var">l</span> <span class="id" title="var">IH</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">r</span> <span class="id" title="var">_</span>]; [<span class="id" title="tactic">destruct</span> 1|].<br/>
&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">m'</span> <span class="id" title="var">R</span>.<br/>
&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.RemoveMin_step"><span class="id" title="lemma">RemoveMin_step</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">R</span>.<br/>
&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">R</span> <span class="id" title="keyword">as</span> [(-&gt;,(-&gt;,-&gt;))|[<span class="id" title="var">m0</span> (<span class="id" title="var">R</span>,-&gt;)]]; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.bal_bindings"><span class="id" title="lemma">bal_bindings</span></a>, <a class="idref" href="MMaps.AVL.html#MakeRaw.create_bindings"><span class="id" title="lemma">create_bindings</span></a>, <a class="idref" href="MMaps.AVL.html#MakeRaw.bindings_node"><span class="id" title="lemma">bindings_node</span></a>.<br/>
&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">IH</span> <span class="id" title="var">_</span> <span class="id" title="var">R</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab97"></a><h3 class="section">Merging two trees</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">factor_remove_min</span> <span class="id" title="var">m</span> <span class="id" title="var">R</span> := <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;| <span class="id" title="var">h</span>:<a class="idref" href="MMaps.AVL.html#MakeRaw.int"><span class="id" title="abbreviation">int</span></a>, <span class="id" title="var">H</span>:<a class="idref" href="MMaps.AVL.html#MakeRaw.remove_min"><span class="id" title="definition">remove_min</span></a> ?<span class="id" title="var">l</span> ?<span class="id" title="var">x</span> ?<span class="id" title="var">e</span> ?<span class="id" title="var">r</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ?<span class="id" title="var">p</span> |- <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">R</span>:<a class="idref" href="MMaps.AVL.html#MakeRaw.RemoveMin"><span class="id" title="definition">RemoveMin</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.Node"><span class="id" title="constructor">Node</span></a> <span class="id" title="var">h</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">r</span>) <span class="id" title="var">p</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">exact</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">m</span>:=<a class="idref" href="MMaps.AVL.html#MakeRaw.Node"><span class="id" title="constructor">Node</span></a> <span class="id" title="var">h</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">r</span>) <span class="id" title="tactic">in</span> *; <span class="id" title="var">clearbody</span> <span class="id" title="var">m</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">r</span><br/>
<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.append_mapsto" class="idref" href="#MakeRaw.append_mapsto"><span class="id" title="lemma">append_mapsto</span></a> <a id="m1:835" class="idref" href="#m1:835"><span class="id" title="binder">m1</span></a> <a id="m2:836" class="idref" href="#m2:836"><span class="id" title="binder">m2</span></a> <a id="y:837" class="idref" href="#y:837"><span class="id" title="binder">y</span></a> <a id="e:838" class="idref" href="#e:838"><span class="id" title="binder">e</span></a> :<br/>
&nbsp;<a class="idref" href="MMaps.AVL.html#MakeRaw.MapsTo"><span class="id" title="inductive">MapsTo</span></a> <a class="idref" href="MMaps.AVL.html#y:837"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#e:838"><span class="id" title="variable">e</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.append"><span class="id" title="definition">append</span></a> <a class="idref" href="MMaps.AVL.html#m1:835"><span class="id" title="variable">m1</span></a> <a class="idref" href="MMaps.AVL.html#m2:836"><span class="id" title="variable">m2</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.MapsTo"><span class="id" title="inductive">MapsTo</span></a> <a class="idref" href="MMaps.AVL.html#y:837"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#e:838"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVL.html#m1:835"><span class="id" title="variable">m1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.MapsTo"><span class="id" title="inductive">MapsTo</span></a> <a class="idref" href="MMaps.AVL.html#y:837"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#e:838"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVL.html#m2:836"><span class="id" title="variable">m2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.append"><span class="id" title="definition">append</span></a> <span class="id" title="var">m1</span> <span class="id" title="var">m2</span>); <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">factornode</span> <span class="id" title="var">m1</span>.<br/>
&nbsp;- <span class="id" title="var">intuition_m</span>.<br/>
&nbsp;- <span class="id" title="var">intuition_m</span>.<br/>
&nbsp;- <span class="id" title="var">factor_remove_min</span> <span class="id" title="var">l</span> <span class="id" title="var">R</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.bal_mapsto"><span class="id" title="lemma">bal_mapsto</span></a>, (<a class="idref" href="MMaps.AVL.html#MakeRaw.remove_min_mapsto"><span class="id" title="lemma">remove_min_mapsto</span></a> <span class="id" title="var">R</span>).<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.create"><span class="id" title="definition">create</span></a>; <span class="id" title="var">intuition_m</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">constructor</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.append_in" class="idref" href="#MakeRaw.append_in"><span class="id" title="lemma">append_in</span></a> <a id="m1:839" class="idref" href="#m1:839"><span class="id" title="binder">m1</span></a> <a id="m2:840" class="idref" href="#m2:840"><span class="id" title="binder">m2</span></a> <a id="y:841" class="idref" href="#y:841"><span class="id" title="binder">y</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MMaps.AVL.html#y:841"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#MakeRaw.append"><span class="id" title="definition">append</span></a> <a class="idref" href="MMaps.AVL.html#m1:839"><span class="id" title="variable">m1</span></a> <a class="idref" href="MMaps.AVL.html#m2:840"><span class="id" title="variable">m2</span></a><a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="MMaps.AVL.html#y:841"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <a class="idref" href="MMaps.AVL.html#m1:839"><span class="id" title="variable">m1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="MMaps.AVL.html#y:841"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <a class="idref" href="MMaps.AVL.html#m2:840"><span class="id" title="variable">m2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.In"><span class="id" title="definition">In</span></a>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.append_mapsto"><span class="id" title="lemma">append_mapsto</span></a>. <span class="id" title="tactic">firstorder</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="MakeRaw.append_ok" class="idref" href="#MakeRaw.append_ok"><span class="id" title="instance">append_ok</span></a> <a id="m1:842" class="idref" href="#m1:842"><span class="id" title="binder">m1</span></a> <a id="m2:843" class="idref" href="#m2:843"><span class="id" title="binder">m2</span></a> `{<a id="Ok0:844" class="idref" href="#Ok0:844"><span class="id" title="binder">!</span></a><a id="Ok0:844" class="idref" href="#Ok0:844"><span class="id" title="binder">Ok</span></a> <a id="Ok0:844" class="idref" href="#Ok0:844"><span class="id" title="binder">m1</span></a>, <a id="Ok1:845" class="idref" href="#Ok1:845"><span class="id" title="binder">!</span></a><a id="Ok1:845" class="idref" href="#Ok1:845"><span class="id" title="binder">Ok</span></a> <a id="Ok1:845" class="idref" href="#Ok1:845"><span class="id" title="binder">m2</span></a>} : <a class="idref" href="MMaps.AVL.html#m1:842"><span class="id" title="variable">m1</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVL.html#m2:843"><span class="id" title="variable">m2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;<a class="idref" href="MMaps.AVL.html#MakeRaw.Ok"><span class="id" title="class">Ok</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.append"><span class="id" title="definition">append</span></a> <a class="idref" href="MMaps.AVL.html#m1:842"><span class="id" title="variable">m1</span></a> <a class="idref" href="MMaps.AVL.html#m2:843"><span class="id" title="variable">m2</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.append"><span class="id" title="definition">append</span></a> <span class="id" title="var">m1</span> <span class="id" title="var">m2</span>); <span class="id" title="tactic">intros</span> <span class="id" title="var">B12</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;<span class="id" title="var">factornode</span> <span class="id" title="var">m1</span>. <span class="id" title="var">factor_remove_min</span> <span class="id" title="var">l</span> <span class="id" title="var">R</span>.<br/>
&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.bal_ok"><span class="id" title="instance">bal_ok</span></a>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> ×.<br/>
&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">z</span> <span class="id" title="var">Hz</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">B12</span>; <span class="id" title="tactic">trivial</span>. <span class="id" title="tactic">rewrite</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.remove_min_in"><span class="id" title="lemma">remove_min_in</span></a> <span class="id" title="var">R</span>). <span class="id" title="var">now</span> <span class="id" title="tactic">left</span>.<br/>
&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.remove_min_gt"><span class="id" title="lemma">remove_min_gt</span></a> <span class="id" title="var">R</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab98"></a><h3 class="section">Deletion</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.remove_in" class="idref" href="#MakeRaw.remove_in"><span class="id" title="lemma">remove_in</span></a> <a id="m:846" class="idref" href="#m:846"><span class="id" title="binder">m</span></a> <a id="x:847" class="idref" href="#x:847"><span class="id" title="binder">x</span></a> <a id="y:848" class="idref" href="#y:848"><span class="id" title="binder">y</span></a> `{<a id="Ok0:849" class="idref" href="#Ok0:849"><span class="id" title="binder">!</span></a><a id="Ok0:849" class="idref" href="#Ok0:849"><span class="id" title="binder">Ok</span></a> <a id="Ok0:849" class="idref" href="#Ok0:849"><span class="id" title="binder">m</span></a>} :<br/>
&nbsp;<a class="idref" href="MMaps.AVL.html#y:848"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.remove"><span class="id" title="definition">remove</span></a> <a class="idref" href="MMaps.AVL.html#x:847"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#m:846"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a> <a class="idref" href="MMaps.AVL.html#y:848"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#3bfccbf8a360975b3a5598ce76c32491"><span class="id" title="notation">==</span></a> <a class="idref" href="MMaps.AVL.html#x:847"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="MMaps.AVL.html#y:848"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <a class="idref" href="MMaps.AVL.html#m:846"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.remove"><span class="id" title="definition">remove</span></a> <span class="id" title="var">x</span> <span class="id" title="var">m</span>); <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">cleanf</span>; <span class="id" title="var">invok</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ?<a class="idref" href="MMaps.AVL.html#MakeRaw.append_in"><span class="id" title="lemma">append_in</span></a>, ?<a class="idref" href="MMaps.AVL.html#MakeRaw.bal_in"><span class="id" title="lemma">bal_in</span></a>, ?<span class="id" title="var">IHt</span>; <span class="id" title="var">intuition_in</span>; <span class="id" title="var">order</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.remove_lt" class="idref" href="#MakeRaw.remove_lt"><span class="id" title="lemma">remove_lt</span></a> <a id="m:850" class="idref" href="#m:850"><span class="id" title="binder">m</span></a> <a id="x:851" class="idref" href="#x:851"><span class="id" title="binder">x</span></a> <a id="y:852" class="idref" href="#y:852"><span class="id" title="binder">y</span></a> `{<a id="Ok0:853" class="idref" href="#Ok0:853"><span class="id" title="binder">!</span></a><a id="Ok0:853" class="idref" href="#Ok0:853"><span class="id" title="binder">Ok</span></a> <a id="Ok0:853" class="idref" href="#Ok0:853"><span class="id" title="binder">m</span></a>} : <a class="idref" href="MMaps.AVL.html#m:850"><span class="id" title="variable">m</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVL.html#y:852"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.remove"><span class="id" title="definition">remove</span></a> <a class="idref" href="MMaps.AVL.html#x:851"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#m:850"><span class="id" title="variable">m</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVL.html#y:852"><span class="id" title="variable">y</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">intros</span> ? <span class="id" title="var">z</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.remove_in"><span class="id" title="lemma">remove_in</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">trivial</span>. <span class="id" title="tactic">destruct</span> 1; <span class="id" title="var">order</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.remove_gt" class="idref" href="#MakeRaw.remove_gt"><span class="id" title="lemma">remove_gt</span></a> <a id="m:854" class="idref" href="#m:854"><span class="id" title="binder">m</span></a> <a id="x:855" class="idref" href="#x:855"><span class="id" title="binder">x</span></a> <a id="y:856" class="idref" href="#y:856"><span class="id" title="binder">y</span></a> `{<a id="Ok0:857" class="idref" href="#Ok0:857"><span class="id" title="binder">!</span></a><a id="Ok0:857" class="idref" href="#Ok0:857"><span class="id" title="binder">Ok</span></a> <a id="Ok0:857" class="idref" href="#Ok0:857"><span class="id" title="binder">m</span></a>} : <a class="idref" href="MMaps.AVL.html#y:856"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVL.html#m:854"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#y:856"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.remove"><span class="id" title="definition">remove</span></a> <a class="idref" href="MMaps.AVL.html#x:855"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#m:854"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">intros</span> ? <span class="id" title="var">z</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.remove_in"><span class="id" title="lemma">remove_in</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">trivial</span>. <span class="id" title="tactic">destruct</span> 1; <span class="id" title="var">order</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Local Hint Resolve</span> <span class="id" title="var">remove_gt</span> <span class="id" title="var">remove_lt</span> : <span class="id" title="var">map</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="MakeRaw.remove_ok" class="idref" href="#MakeRaw.remove_ok"><span class="id" title="instance">remove_ok</span></a> <a id="m:858" class="idref" href="#m:858"><span class="id" title="binder">m</span></a> <a id="x:859" class="idref" href="#x:859"><span class="id" title="binder">x</span></a> `{<a id="Ok0:860" class="idref" href="#Ok0:860"><span class="id" title="binder">!</span></a><a id="Ok0:860" class="idref" href="#Ok0:860"><span class="id" title="binder">Ok</span></a> <a id="Ok0:860" class="idref" href="#Ok0:860"><span class="id" title="binder">m</span></a>} : <a class="idref" href="MMaps.AVL.html#MakeRaw.Ok"><span class="id" title="class">Ok</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.remove"><span class="id" title="definition">remove</span></a> <a class="idref" href="MMaps.AVL.html#x:859"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#m:858"><span class="id" title="variable">m</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.remove"><span class="id" title="definition">remove</span></a> <span class="id" title="var">x</span> <span class="id" title="var">m</span>); <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">cleanf</span>; <span class="id" title="var">invok</span>; <span class="id" title="var">autok</span>.<br/>
&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.append_ok"><span class="id" title="instance">append_ok</span></a>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.between"><span class="id" title="lemma">between</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.remove_spec1" class="idref" href="#MakeRaw.remove_spec1"><span class="id" title="lemma">remove_spec1</span></a> <a id="m:861" class="idref" href="#m:861"><span class="id" title="binder">m</span></a> <a id="x:862" class="idref" href="#x:862"><span class="id" title="binder">x</span></a> `{<a id="Ok0:863" class="idref" href="#Ok0:863"><span class="id" title="binder">!</span></a><a id="Ok0:863" class="idref" href="#Ok0:863"><span class="id" title="binder">Ok</span></a> <a id="Ok0:863" class="idref" href="#Ok0:863"><span class="id" title="binder">m</span></a>} : <a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <a class="idref" href="MMaps.AVL.html#x:862"><span class="id" title="variable">x</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.remove"><span class="id" title="definition">remove</span></a> <a class="idref" href="MMaps.AVL.html#x:862"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#m:861"><span class="id" title="variable">m</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.not_find_iff"><span class="id" title="lemma">not_find_iff</span></a>; <span class="id" title="var">autok</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.remove_in"><span class="id" title="lemma">remove_in</span></a>; <span class="id" title="tactic">intuition</span> (<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.remove_spec2" class="idref" href="#MakeRaw.remove_spec2"><span class="id" title="lemma">remove_spec2</span></a> <a id="m:864" class="idref" href="#m:864"><span class="id" title="binder">m</span></a> <a id="x:865" class="idref" href="#x:865"><span class="id" title="binder">x</span></a> <a id="y:866" class="idref" href="#y:866"><span class="id" title="binder">y</span></a> `{<a id="Ok0:867" class="idref" href="#Ok0:867"><span class="id" title="binder">!</span></a><a id="Ok0:867" class="idref" href="#Ok0:867"><span class="id" title="binder">Ok</span></a> <a id="Ok0:867" class="idref" href="#Ok0:867"><span class="id" title="binder">m</span></a>} : <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a> <a class="idref" href="MMaps.AVL.html#x:865"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#3bfccbf8a360975b3a5598ce76c32491"><span class="id" title="notation">==</span></a> <a class="idref" href="MMaps.AVL.html#y:866"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;<a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <a class="idref" href="MMaps.AVL.html#y:866"><span class="id" title="variable">y</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.remove"><span class="id" title="definition">remove</span></a> <a class="idref" href="MMaps.AVL.html#x:865"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#m:864"><span class="id" title="variable">m</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <a class="idref" href="MMaps.AVL.html#y:866"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#m:864"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.remove"><span class="id" title="definition">remove</span></a> <span class="id" title="var">x</span> <span class="id" title="var">m</span>); <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">cleanf</span>; <span class="id" title="var">invok</span>; <span class="id" title="var">autok</span>.<br/>
&nbsp;- <span class="id" title="tactic">case</span> <a class="idref" href="MMaps.AVL.html#K.compare_spec"><span class="id" title="axiom">K.compare_spec</span></a>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">order</span>;<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.find_mapsto_equiv"><span class="id" title="lemma">find_mapsto_equiv</span></a>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.append_ok"><span class="id" title="instance">append_ok</span></a>, <a class="idref" href="MMaps.AVL.html#MakeRaw.between"><span class="id" title="lemma">between</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.append_mapsto"><span class="id" title="lemma">append_mapsto</span></a>; <span class="id" title="tactic">intuition</span>; <span class="id" title="var">order</span>.<br/>
&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.bal_find"><span class="id" title="lemma">bal_find</span></a> <span class="id" title="tactic">by</span> <span class="id" title="var">autok</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">case</span> <a class="idref" href="MMaps.AVL.html#K.compare_spec"><span class="id" title="axiom">K.compare_spec</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.bal_find"><span class="id" title="lemma">bal_find</span></a> <span class="id" title="tactic">by</span> <span class="id" title="var">autok</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">case</span> <a class="idref" href="MMaps.AVL.html#K.compare_spec"><span class="id" title="axiom">K.compare_spec</span></a>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab99"></a><h3 class="section">Join</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.join_in" class="idref" href="#MakeRaw.join_in"><span class="id" title="lemma">join_in</span></a> <a id="l:868" class="idref" href="#l:868"><span class="id" title="binder">l</span></a> <a id="x:869" class="idref" href="#x:869"><span class="id" title="binder">x</span></a> <a id="d:870" class="idref" href="#d:870"><span class="id" title="binder">d</span></a> <a id="r:871" class="idref" href="#r:871"><span class="id" title="binder">r</span></a> <a id="y:872" class="idref" href="#y:872"><span class="id" title="binder">y</span></a> :<br/>
&nbsp;<a class="idref" href="MMaps.AVL.html#y:872"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#MakeRaw.join"><span class="id" title="definition">join</span></a> <a class="idref" href="MMaps.AVL.html#l:868"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVL.html#x:869"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#d:870"><span class="id" title="variable">d</span></a> <a class="idref" href="MMaps.AVL.html#r:871"><span class="id" title="variable">r</span></a><a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="MMaps.AVL.html#y:872"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#3bfccbf8a360975b3a5598ce76c32491"><span class="id" title="notation">==</span></a> <a class="idref" href="MMaps.AVL.html#x:869"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="MMaps.AVL.html#y:872"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <a class="idref" href="MMaps.AVL.html#l:868"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="MMaps.AVL.html#y:872"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <a class="idref" href="MMaps.AVL.html#r:871"><span class="id" title="variable">r</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="var">join_tac</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span> <span class="id" title="var">d</span> <span class="id" title="var">r</span>.<br/>
&nbsp;- <span class="id" title="tactic">simpl</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.join"><span class="id" title="definition">join</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.add_in"><span class="id" title="lemma">add_in</span></a>; <span class="id" title="var">intuition_in</span>.<br/>
&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.add_in"><span class="id" title="lemma">add_in</span></a>; <span class="id" title="var">intuition_in</span>.<br/>
&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.bal_in"><span class="id" title="lemma">bal_in</span></a>, <span class="id" title="var">Hlr</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Hlr</span> <span class="id" title="var">Hrl</span>. <span class="id" title="var">intuition_in</span>.<br/>
&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.bal_in"><span class="id" title="lemma">bal_in</span></a>, <span class="id" title="var">Hrl</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Hlr</span> <span class="id" title="var">Hrl</span>. <span class="id" title="var">intuition_in</span>.<br/>
&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.create_in"><span class="id" title="lemma">create_in</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="MakeRaw.join_ok" class="idref" href="#MakeRaw.join_ok"><span class="id" title="instance">join_ok</span></a> <a id="l:873" class="idref" href="#l:873"><span class="id" title="binder">l</span></a> <a id="x:874" class="idref" href="#x:874"><span class="id" title="binder">x</span></a> <a id="d:875" class="idref" href="#d:875"><span class="id" title="binder">d</span></a> <a id="r:876" class="idref" href="#r:876"><span class="id" title="binder">r</span></a> :<br/>
&nbsp;<a class="idref" href="MMaps.AVL.html#MakeRaw.Ok"><span class="id" title="class">Ok</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.create"><span class="id" title="definition">create</span></a> <a class="idref" href="MMaps.AVL.html#l:873"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVL.html#x:874"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#d:875"><span class="id" title="variable">d</span></a> <a class="idref" href="MMaps.AVL.html#r:876"><span class="id" title="variable">r</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Ok"><span class="id" title="class">Ok</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.join"><span class="id" title="definition">join</span></a> <a class="idref" href="MMaps.AVL.html#l:873"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVL.html#x:874"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#d:875"><span class="id" title="variable">d</span></a> <a class="idref" href="MMaps.AVL.html#r:876"><span class="id" title="variable">r</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">join_tac</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span> <span class="id" title="var">d</span> <span class="id" title="var">r</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.create"><span class="id" title="definition">create</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="var">invok</span>; <span class="id" title="var">invok</span>; <span class="id" title="var">invlt</span>; <span class="id" title="var">autok</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="var">autok</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.bal_ok"><span class="id" title="instance">bal_ok</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">Hlr</span>; <span class="id" title="var">ok</span>; <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.join_in"><span class="id" title="lemma">join_in</span></a>; <span class="id" title="var">intuition_in</span>; <span class="id" title="var">order</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.bal_ok"><span class="id" title="instance">bal_ok</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">Hrl</span>; <span class="id" title="var">ok</span>; <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.join_in"><span class="id" title="lemma">join_in</span></a>; <span class="id" title="var">intuition_in</span>; <span class="id" title="var">order</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">ok</span>; <span class="id" title="tactic">intuition</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.join_find" class="idref" href="#MakeRaw.join_find"><span class="id" title="lemma">join_find</span></a> <a id="l:877" class="idref" href="#l:877"><span class="id" title="binder">l</span></a> <a id="x:878" class="idref" href="#x:878"><span class="id" title="binder">x</span></a> <a id="d:879" class="idref" href="#d:879"><span class="id" title="binder">d</span></a> <a id="r:880" class="idref" href="#r:880"><span class="id" title="binder">r</span></a> <a id="y:881" class="idref" href="#y:881"><span class="id" title="binder">y</span></a> :<br/>
&nbsp;<a class="idref" href="MMaps.AVL.html#MakeRaw.Ok"><span class="id" title="class">Ok</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.create"><span class="id" title="definition">create</span></a> <a class="idref" href="MMaps.AVL.html#l:877"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVL.html#x:878"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#d:879"><span class="id" title="variable">d</span></a> <a class="idref" href="MMaps.AVL.html#r:880"><span class="id" title="variable">r</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;<a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <a class="idref" href="MMaps.AVL.html#y:881"><span class="id" title="variable">y</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.join"><span class="id" title="definition">join</span></a> <a class="idref" href="MMaps.AVL.html#l:877"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVL.html#x:878"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#d:879"><span class="id" title="variable">d</span></a> <a class="idref" href="MMaps.AVL.html#r:880"><span class="id" title="variable">r</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <a class="idref" href="MMaps.AVL.html#y:881"><span class="id" title="variable">y</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.create"><span class="id" title="definition">create</span></a> <a class="idref" href="MMaps.AVL.html#l:877"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVL.html#x:878"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#d:879"><span class="id" title="variable">d</span></a> <a class="idref" href="MMaps.AVL.html#r:880"><span class="id" title="variable">r</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.create"><span class="id" title="definition">create</span></a> <span class="id" title="tactic">at</span> 1.<br/>
&nbsp;<span class="id" title="var">join_tac</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span> <span class="id" title="var">d</span> <span class="id" title="var">r</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">invok</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.add_find"><span class="id" title="lemma">add_find</span></a>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span> <a class="idref" href="MMaps.AVL.html#K.compare_spec"><span class="id" title="axiom">K.compare_spec</span></a>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.not_find_iff"><span class="id" title="lemma">not_find_iff</span></a>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="var">order</span>.<br/>
&nbsp;- <span class="id" title="tactic">clear</span> <span class="id" title="var">Hlr</span>. <span class="id" title="var">factornode</span> <span class="id" title="var">l</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">invok</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.add_find"><span class="id" title="lemma">add_find</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span> <a class="idref" href="MMaps.AVL.html#K.compare_spec"><span class="id" title="axiom">K.compare_spec</span></a>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.not_find_iff"><span class="id" title="lemma">not_find_iff</span></a>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="var">order</span>.<br/>
&nbsp;- <span class="id" title="tactic">clear</span> <span class="id" title="var">Hrl</span> <span class="id" title="var">LT</span>. <span class="id" title="var">factornode</span> <span class="id" title="var">r</span>. <span class="id" title="var">invok</span>; <span class="id" title="var">invlt</span>;<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.bal_find"><span class="id" title="lemma">bal_find</span></a>; <span class="id" title="var">autok</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlr</span> <span class="id" title="tactic">by</span> (<span class="id" title="var">ok</span>; <span class="id" title="tactic">intuition</span>). <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 (<span class="id" title="tactic">case</span> <a class="idref" href="MMaps.AVL.html#K.compare_spec"><span class="id" title="axiom">K.compare_spec</span></a>; <span class="id" title="tactic">intuition</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">order</span>).<br/>
&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.join_ok"><span class="id" title="instance">join_ok</span></a>, <a class="idref" href="MMaps.AVL.html#MakeRaw.create_ok"><span class="id" title="instance">create_ok</span></a>; <span class="id" title="var">ok</span>; <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.join_in"><span class="id" title="lemma">join_in</span></a>. <span class="id" title="tactic">intuition</span>; <span class="id" title="var">order</span>.<br/>
&nbsp;- <span class="id" title="tactic">clear</span> <span class="id" title="var">Hlr</span> <span class="id" title="var">LT</span> <span class="id" title="var">LT'</span>. <span class="id" title="var">factornode</span> <span class="id" title="var">l</span>. <span class="id" title="var">invok</span>; <span class="id" title="var">invlt</span>;<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.bal_find"><span class="id" title="lemma">bal_find</span></a>; <span class="id" title="var">autok</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hrl</span> <span class="id" title="tactic">by</span> (<span class="id" title="var">ok</span>; <span class="id" title="tactic">intuition</span>). <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 (<span class="id" title="tactic">case</span> <a class="idref" href="MMaps.AVL.html#K.compare_spec"><span class="id" title="axiom">K.compare_spec</span></a>; <span class="id" title="tactic">intuition</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">order</span>).<br/>
&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.join_ok"><span class="id" title="instance">join_ok</span></a>, <a class="idref" href="MMaps.AVL.html#MakeRaw.create_ok"><span class="id" title="instance">create_ok</span></a>; <span class="id" title="var">ok</span>; <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.join_in"><span class="id" title="lemma">join_in</span></a>. <span class="id" title="tactic">intuition</span>; <span class="id" title="var">order</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.join_bindings" class="idref" href="#MakeRaw.join_bindings"><span class="id" title="lemma">join_bindings</span></a> <a id="l:882" class="idref" href="#l:882"><span class="id" title="binder">l</span></a> <a id="x:883" class="idref" href="#x:883"><span class="id" title="binder">x</span></a> <a id="d:884" class="idref" href="#d:884"><span class="id" title="binder">d</span></a> <a id="r:885" class="idref" href="#r:885"><span class="id" title="binder">r</span></a> :<br/>
&nbsp;<a class="idref" href="MMaps.AVL.html#MakeRaw.Ok"><span class="id" title="class">Ok</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.create"><span class="id" title="definition">create</span></a> <a class="idref" href="MMaps.AVL.html#l:882"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVL.html#x:883"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#d:884"><span class="id" title="variable">d</span></a> <a class="idref" href="MMaps.AVL.html#r:885"><span class="id" title="variable">r</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;<a class="idref" href="MMaps.AVL.html#MakeRaw.bindings"><span class="id" title="definition">bindings</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.join"><span class="id" title="definition">join</span></a> <a class="idref" href="MMaps.AVL.html#l:882"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVL.html#x:883"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#d:884"><span class="id" title="variable">d</span></a> <a class="idref" href="MMaps.AVL.html#r:885"><span class="id" title="variable">r</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.bindings"><span class="id" title="definition">bindings</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.create"><span class="id" title="definition">create</span></a> <a class="idref" href="MMaps.AVL.html#l:882"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVL.html#x:883"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#d:884"><span class="id" title="variable">d</span></a> <a class="idref" href="MMaps.AVL.html#r:885"><span class="id" title="variable">r</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.create"><span class="id" title="definition">create</span></a> <span class="id" title="tactic">at</span> 1.<br/>
&nbsp;<span class="id" title="var">join_tac</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span> <span class="id" title="var">d</span> <span class="id" title="var">r</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">invok</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.create_bindings"><span class="id" title="lemma">create_bindings</span></a>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.add_below_bindings"><span class="id" title="lemma">add_below_bindings</span></a>.<br/>
&nbsp;- <span class="id" title="tactic">clear</span> <span class="id" title="var">Hlr</span>. <span class="id" title="var">factornode</span> <span class="id" title="var">l</span>. <span class="id" title="var">invok</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.create_bindings"><span class="id" title="lemma">create_bindings</span></a>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.add_above_bindings"><span class="id" title="lemma">add_above_bindings</span></a>.<br/>
&nbsp;- <span class="id" title="tactic">clear</span> <span class="id" title="var">Hrl</span> <span class="id" title="var">LT</span>. <span class="id" title="var">factornode</span> <span class="id" title="var">r</span>. <span class="id" title="var">invok</span>; <span class="id" title="var">invlt</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.bal_bindings"><span class="id" title="lemma">bal_bindings</span></a>, !<a class="idref" href="MMaps.AVL.html#MakeRaw.create_bindings"><span class="id" title="lemma">create_bindings</span></a>, <a class="idref" href="MMaps.AVL.html#MakeRaw.bindings_node"><span class="id" title="lemma">bindings_node</span></a>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>; <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlr</span>, <a class="idref" href="MMaps.AVL.html#MakeRaw.create_bindings"><span class="id" title="lemma">create_bindings</span></a> <span class="id" title="tactic">by</span> (<span class="id" title="var">ok</span>; <span class="id" title="tactic">intuition</span>).<br/>
&nbsp;- <span class="id" title="tactic">clear</span> <span class="id" title="var">Hlr</span> <span class="id" title="var">LT</span> <span class="id" title="var">LT'</span>. <span class="id" title="var">factornode</span> <span class="id" title="var">l</span>. <span class="id" title="var">invok</span>; <span class="id" title="var">invlt</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.bal_bindings"><span class="id" title="lemma">bal_bindings</span></a>, !<a class="idref" href="MMaps.AVL.html#MakeRaw.create_bindings"><span class="id" title="lemma">create_bindings</span></a>, <a class="idref" href="MMaps.AVL.html#MakeRaw.bindings_node"><span class="id" title="lemma">bindings_node</span></a>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hrl</span>, <a class="idref" href="MMaps.AVL.html#MakeRaw.create_bindings"><span class="id" title="lemma">create_bindings</span></a>, &lt;- <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a> <span class="id" title="tactic">by</span> (<span class="id" title="var">ok</span>; <span class="id" title="tactic">intuition</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab100"></a><h3 class="section">Split</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.split_in_l0" class="idref" href="#MakeRaw.split_in_l0"><span class="id" title="lemma">split_in_l0</span></a> <a id="m:886" class="idref" href="#m:886"><span class="id" title="binder">m</span></a> <a id="x:887" class="idref" href="#x:887"><span class="id" title="binder">x</span></a> <a id="y:888" class="idref" href="#y:888"><span class="id" title="binder">y</span></a> : <a class="idref" href="MMaps.AVL.html#y:888"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <a class="idref" href="MMaps.AVL.html#5fff6fc502757d8037705f89a213c279"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#MakeRaw.split"><span class="id" title="definition">split</span></a> <a class="idref" href="MMaps.AVL.html#x:887"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#m:886"><span class="id" title="variable">m</span></a><a class="idref" href="MMaps.AVL.html#5fff6fc502757d8037705f89a213c279"><span class="id" title="notation">)#</span></a><a class="idref" href="MMaps.AVL.html#5fff6fc502757d8037705f89a213c279"><span class="id" title="notation">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#y:888"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <a class="idref" href="MMaps.AVL.html#m:886"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.split"><span class="id" title="definition">split</span></a> <span class="id" title="var">x</span> <span class="id" title="var">m</span>); <span class="id" title="var">cleansplit</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ?<a class="idref" href="MMaps.AVL.html#MakeRaw.join_in"><span class="id" title="lemma">join_in</span></a>; <span class="id" title="var">intuition_in</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.split_in_r0" class="idref" href="#MakeRaw.split_in_r0"><span class="id" title="lemma">split_in_r0</span></a> <a id="m:889" class="idref" href="#m:889"><span class="id" title="binder">m</span></a> <a id="x:890" class="idref" href="#x:890"><span class="id" title="binder">x</span></a> <a id="y:891" class="idref" href="#y:891"><span class="id" title="binder">y</span></a> : <a class="idref" href="MMaps.AVL.html#y:891"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <a class="idref" href="MMaps.AVL.html#12f28f29f6f580fcde6b740c6479ca68"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#MakeRaw.split"><span class="id" title="definition">split</span></a> <a class="idref" href="MMaps.AVL.html#x:890"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#m:889"><span class="id" title="variable">m</span></a><a class="idref" href="MMaps.AVL.html#12f28f29f6f580fcde6b740c6479ca68"><span class="id" title="notation">)#</span></a><a class="idref" href="MMaps.AVL.html#12f28f29f6f580fcde6b740c6479ca68"><span class="id" title="notation">r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#y:891"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <a class="idref" href="MMaps.AVL.html#m:889"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.split"><span class="id" title="definition">split</span></a> <span class="id" title="var">x</span> <span class="id" title="var">m</span>); <span class="id" title="var">cleansplit</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ?<a class="idref" href="MMaps.AVL.html#MakeRaw.join_in"><span class="id" title="lemma">join_in</span></a>; <span class="id" title="var">intuition_in</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.split_in_l" class="idref" href="#MakeRaw.split_in_l"><span class="id" title="lemma">split_in_l</span></a> <a id="m:892" class="idref" href="#m:892"><span class="id" title="binder">m</span></a> <a id="x:893" class="idref" href="#x:893"><span class="id" title="binder">x</span></a> <a id="y:894" class="idref" href="#y:894"><span class="id" title="binder">y</span></a> `{<a id="Ok0:895" class="idref" href="#Ok0:895"><span class="id" title="binder">!</span></a><a id="Ok0:895" class="idref" href="#Ok0:895"><span class="id" title="binder">Ok</span></a> <a id="Ok0:895" class="idref" href="#Ok0:895"><span class="id" title="binder">m</span></a>} :<br/>
&nbsp;(<a class="idref" href="MMaps.AVL.html#y:894"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <a class="idref" href="MMaps.AVL.html#5fff6fc502757d8037705f89a213c279"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#MakeRaw.split"><span class="id" title="definition">split</span></a> <a class="idref" href="MMaps.AVL.html#x:893"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#m:892"><span class="id" title="variable">m</span></a><a class="idref" href="MMaps.AVL.html#5fff6fc502757d8037705f89a213c279"><span class="id" title="notation">)#</span></a><a class="idref" href="MMaps.AVL.html#5fff6fc502757d8037705f89a213c279"><span class="id" title="notation">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="MMaps.AVL.html#y:894"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <a class="idref" href="MMaps.AVL.html#m:892"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="MMaps.AVL.html#y:894"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVL.html#x:893"><span class="id" title="variable">x</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.split"><span class="id" title="definition">split</span></a> <span class="id" title="var">x</span> <span class="id" title="var">m</span>); <span class="id" title="tactic">intros</span>; <span class="id" title="var">cleansplit</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ?<a class="idref" href="MMaps.AVL.html#MakeRaw.join_in"><span class="id" title="lemma">join_in</span></a>, ?<span class="id" title="var">IHt</span>; <span class="id" title="var">intuition_in</span>; <span class="id" title="var">order</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.split_in_r" class="idref" href="#MakeRaw.split_in_r"><span class="id" title="lemma">split_in_r</span></a> <a id="m:896" class="idref" href="#m:896"><span class="id" title="binder">m</span></a> <a id="x:897" class="idref" href="#x:897"><span class="id" title="binder">x</span></a> <a id="y:898" class="idref" href="#y:898"><span class="id" title="binder">y</span></a> `{<a id="Ok0:899" class="idref" href="#Ok0:899"><span class="id" title="binder">!</span></a><a id="Ok0:899" class="idref" href="#Ok0:899"><span class="id" title="binder">Ok</span></a> <a id="Ok0:899" class="idref" href="#Ok0:899"><span class="id" title="binder">m</span></a>} :<br/>
&nbsp;(<a class="idref" href="MMaps.AVL.html#y:898"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <a class="idref" href="MMaps.AVL.html#12f28f29f6f580fcde6b740c6479ca68"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#MakeRaw.split"><span class="id" title="definition">split</span></a> <a class="idref" href="MMaps.AVL.html#x:897"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#m:896"><span class="id" title="variable">m</span></a><a class="idref" href="MMaps.AVL.html#12f28f29f6f580fcde6b740c6479ca68"><span class="id" title="notation">)#</span></a><a class="idref" href="MMaps.AVL.html#12f28f29f6f580fcde6b740c6479ca68"><span class="id" title="notation">r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="MMaps.AVL.html#y:898"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <a class="idref" href="MMaps.AVL.html#m:896"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="MMaps.AVL.html#x:897"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVL.html#y:898"><span class="id" title="variable">y</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.split"><span class="id" title="definition">split</span></a> <span class="id" title="var">x</span> <span class="id" title="var">m</span>); <span class="id" title="tactic">intros</span>; <span class="id" title="var">cleansplit</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ?<a class="idref" href="MMaps.AVL.html#MakeRaw.join_in"><span class="id" title="lemma">join_in</span></a>, ?<span class="id" title="var">IHt</span>; <span class="id" title="var">intuition_in</span>; <span class="id" title="var">order</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.split_in_o" class="idref" href="#MakeRaw.split_in_o"><span class="id" title="lemma">split_in_o</span></a> <a id="m:900" class="idref" href="#m:900"><span class="id" title="binder">m</span></a> <a id="x:901" class="idref" href="#x:901"><span class="id" title="binder">x</span></a> : <a class="idref" href="MMaps.AVL.html#b9b2aeecf364026dc3ff766f481a3c0e"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#MakeRaw.split"><span class="id" title="definition">split</span></a> <a class="idref" href="MMaps.AVL.html#x:901"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#m:900"><span class="id" title="variable">m</span></a><a class="idref" href="MMaps.AVL.html#b9b2aeecf364026dc3ff766f481a3c0e"><span class="id" title="notation">)#</span></a><a class="idref" href="MMaps.AVL.html#b9b2aeecf364026dc3ff766f481a3c0e"><span class="id" title="notation">o</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <a class="idref" href="MMaps.AVL.html#x:901"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#m:900"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.split"><span class="id" title="definition">split</span></a> <span class="id" title="var">x</span> <span class="id" title="var">m</span>); <span class="id" title="tactic">intros</span>; <span class="id" title="var">cleansplit</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.split_lt_l" class="idref" href="#MakeRaw.split_lt_l"><span class="id" title="lemma">split_lt_l</span></a> <a id="m:902" class="idref" href="#m:902"><span class="id" title="binder">m</span></a> <a id="x:903" class="idref" href="#x:903"><span class="id" title="binder">x</span></a> `{<a id="Ok0:904" class="idref" href="#Ok0:904"><span class="id" title="binder">!</span></a><a id="Ok0:904" class="idref" href="#Ok0:904"><span class="id" title="binder">Ok</span></a> <a id="Ok0:904" class="idref" href="#Ok0:904"><span class="id" title="binder">m</span></a>} : <a class="idref" href="MMaps.AVL.html#5fff6fc502757d8037705f89a213c279"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#MakeRaw.split"><span class="id" title="definition">split</span></a> <a class="idref" href="MMaps.AVL.html#x:903"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#m:902"><span class="id" title="variable">m</span></a><a class="idref" href="MMaps.AVL.html#5fff6fc502757d8037705f89a213c279"><span class="id" title="notation">)#</span></a><a class="idref" href="MMaps.AVL.html#5fff6fc502757d8037705f89a213c279"><span class="id" title="notation">l</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVL.html#x:903"><span class="id" title="variable">x</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.split_in_l"><span class="id" title="lemma">split_in_l</span></a>; <span class="id" title="tactic">intuition</span>; <span class="id" title="var">order</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.split_lt_r" class="idref" href="#MakeRaw.split_lt_r"><span class="id" title="lemma">split_lt_r</span></a> <a id="m:905" class="idref" href="#m:905"><span class="id" title="binder">m</span></a> <a id="x:906" class="idref" href="#x:906"><span class="id" title="binder">x</span></a> <a id="y:907" class="idref" href="#y:907"><span class="id" title="binder">y</span></a> : <a class="idref" href="MMaps.AVL.html#m:905"><span class="id" title="variable">m</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVL.html#y:907"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#12f28f29f6f580fcde6b740c6479ca68"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#MakeRaw.split"><span class="id" title="definition">split</span></a> <a class="idref" href="MMaps.AVL.html#x:906"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#m:905"><span class="id" title="variable">m</span></a><a class="idref" href="MMaps.AVL.html#12f28f29f6f580fcde6b740c6479ca68"><span class="id" title="notation">)#</span></a><a class="idref" href="MMaps.AVL.html#12f28f29f6f580fcde6b740c6479ca68"><span class="id" title="notation">r</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVL.html#y:907"><span class="id" title="variable">y</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? <span class="id" title="var">z</span> <span class="id" title="var">Hz</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.split_in_r0"><span class="id" title="lemma">split_in_r0</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hz</span>. <span class="id" title="var">order</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.split_gt_r" class="idref" href="#MakeRaw.split_gt_r"><span class="id" title="lemma">split_gt_r</span></a> <a id="m:908" class="idref" href="#m:908"><span class="id" title="binder">m</span></a> <a id="x:909" class="idref" href="#x:909"><span class="id" title="binder">x</span></a> `{<a id="Ok0:910" class="idref" href="#Ok0:910"><span class="id" title="binder">!</span></a><a id="Ok0:910" class="idref" href="#Ok0:910"><span class="id" title="binder">Ok</span></a> <a id="Ok0:910" class="idref" href="#Ok0:910"><span class="id" title="binder">m</span></a>} : <a class="idref" href="MMaps.AVL.html#x:909"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVL.html#12f28f29f6f580fcde6b740c6479ca68"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#MakeRaw.split"><span class="id" title="definition">split</span></a> <a class="idref" href="MMaps.AVL.html#x:909"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#m:908"><span class="id" title="variable">m</span></a><a class="idref" href="MMaps.AVL.html#12f28f29f6f580fcde6b740c6479ca68"><span class="id" title="notation">)#</span></a><a class="idref" href="MMaps.AVL.html#12f28f29f6f580fcde6b740c6479ca68"><span class="id" title="notation">r</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.split_in_r"><span class="id" title="lemma">split_in_r</span></a>; <span class="id" title="tactic">intuition</span>; <span class="id" title="var">order</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.split_gt_l" class="idref" href="#MakeRaw.split_gt_l"><span class="id" title="lemma">split_gt_l</span></a> <a id="m:911" class="idref" href="#m:911"><span class="id" title="binder">m</span></a> <a id="x:912" class="idref" href="#x:912"><span class="id" title="binder">x</span></a> <a id="y:913" class="idref" href="#y:913"><span class="id" title="binder">y</span></a> : <a class="idref" href="MMaps.AVL.html#y:913"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVL.html#m:911"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#y:913"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVL.html#5fff6fc502757d8037705f89a213c279"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#MakeRaw.split"><span class="id" title="definition">split</span></a> <a class="idref" href="MMaps.AVL.html#x:912"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#m:911"><span class="id" title="variable">m</span></a><a class="idref" href="MMaps.AVL.html#5fff6fc502757d8037705f89a213c279"><span class="id" title="notation">)#</span></a><a class="idref" href="MMaps.AVL.html#5fff6fc502757d8037705f89a213c279"><span class="id" title="notation">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? <span class="id" title="var">z</span> <span class="id" title="var">Hz</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.split_in_l0"><span class="id" title="lemma">split_in_l0</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hz</span>. <span class="id" title="var">order</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Local Hint Resolve</span> <span class="id" title="var">split_lt_l</span> <span class="id" title="var">split_lt_r</span> <span class="id" title="var">split_gt_l</span> <span class="id" title="var">split_gt_r</span> : <span class="id" title="var">map</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="MakeRaw.split_ok_l" class="idref" href="#MakeRaw.split_ok_l"><span class="id" title="instance">split_ok_l</span></a> <a id="m:914" class="idref" href="#m:914"><span class="id" title="binder">m</span></a> <a id="x:915" class="idref" href="#x:915"><span class="id" title="binder">x</span></a> `{<a id="Ok0:916" class="idref" href="#Ok0:916"><span class="id" title="binder">!</span></a><a id="Ok0:916" class="idref" href="#Ok0:916"><span class="id" title="binder">Ok</span></a> <a id="Ok0:916" class="idref" href="#Ok0:916"><span class="id" title="binder">m</span></a>} : <a class="idref" href="MMaps.AVL.html#MakeRaw.Ok"><span class="id" title="class">Ok</span></a> <a class="idref" href="MMaps.AVL.html#5fff6fc502757d8037705f89a213c279"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#MakeRaw.split"><span class="id" title="definition">split</span></a> <a class="idref" href="MMaps.AVL.html#x:915"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#m:914"><span class="id" title="variable">m</span></a><a class="idref" href="MMaps.AVL.html#5fff6fc502757d8037705f89a213c279"><span class="id" title="notation">)#</span></a><a class="idref" href="MMaps.AVL.html#5fff6fc502757d8037705f89a213c279"><span class="id" title="notation">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.split"><span class="id" title="definition">split</span></a> <span class="id" title="var">x</span> <span class="id" title="var">m</span>); <span class="id" title="tactic">intros</span>; <span class="id" title="var">cleansplit</span>;<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intuition</span> (<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map</span> <span class="id" title="var">typeclass_instances</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="MakeRaw.split_ok_r" class="idref" href="#MakeRaw.split_ok_r"><span class="id" title="instance">split_ok_r</span></a> <a id="m:917" class="idref" href="#m:917"><span class="id" title="binder">m</span></a> <a id="x:918" class="idref" href="#x:918"><span class="id" title="binder">x</span></a> `{<a id="Ok0:919" class="idref" href="#Ok0:919"><span class="id" title="binder">!</span></a><a id="Ok0:919" class="idref" href="#Ok0:919"><span class="id" title="binder">Ok</span></a> <a id="Ok0:919" class="idref" href="#Ok0:919"><span class="id" title="binder">m</span></a>} : <a class="idref" href="MMaps.AVL.html#MakeRaw.Ok"><span class="id" title="class">Ok</span></a> <a class="idref" href="MMaps.AVL.html#12f28f29f6f580fcde6b740c6479ca68"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#MakeRaw.split"><span class="id" title="definition">split</span></a> <a class="idref" href="MMaps.AVL.html#x:918"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#m:917"><span class="id" title="variable">m</span></a><a class="idref" href="MMaps.AVL.html#12f28f29f6f580fcde6b740c6479ca68"><span class="id" title="notation">)#</span></a><a class="idref" href="MMaps.AVL.html#12f28f29f6f580fcde6b740c6479ca68"><span class="id" title="notation">r</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.split"><span class="id" title="definition">split</span></a> <span class="id" title="var">x</span> <span class="id" title="var">m</span>); <span class="id" title="tactic">intros</span>; <span class="id" title="var">cleansplit</span>;<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intuition</span> (<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map</span> <span class="id" title="var">typeclass_instances</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.split_find" class="idref" href="#MakeRaw.split_find"><span class="id" title="lemma">split_find</span></a> <a id="m:920" class="idref" href="#m:920"><span class="id" title="binder">m</span></a> <a id="x:921" class="idref" href="#x:921"><span class="id" title="binder">x</span></a> <a id="y:922" class="idref" href="#y:922"><span class="id" title="binder">y</span></a> `{<a id="Ok0:923" class="idref" href="#Ok0:923"><span class="id" title="binder">!</span></a><a id="Ok0:923" class="idref" href="#Ok0:923"><span class="id" title="binder">Ok</span></a> <a id="Ok0:923" class="idref" href="#Ok0:923"><span class="id" title="binder">m</span></a>} :<br/>
&nbsp;<a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <a class="idref" href="MMaps.AVL.html#y:922"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#m:920"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="keyword">match</span> <a class="idref" href="MMaps.AVL.html#K.compare"><span class="id" title="axiom">K.compare</span></a> <a class="idref" href="MMaps.AVL.html#y:922"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#x:921"><span class="id" title="variable">x</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#Eq"><span class="id" title="constructor">Eq</span></a> ⇒ <a class="idref" href="MMaps.AVL.html#b9b2aeecf364026dc3ff766f481a3c0e"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#MakeRaw.split"><span class="id" title="definition">split</span></a> <a class="idref" href="MMaps.AVL.html#x:921"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#m:920"><span class="id" title="variable">m</span></a><a class="idref" href="MMaps.AVL.html#b9b2aeecf364026dc3ff766f481a3c0e"><span class="id" title="notation">)#</span></a><a class="idref" href="MMaps.AVL.html#b9b2aeecf364026dc3ff766f481a3c0e"><span class="id" title="notation">o</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#Lt"><span class="id" title="constructor">Lt</span></a> ⇒ <a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <a class="idref" href="MMaps.AVL.html#y:922"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#5fff6fc502757d8037705f89a213c279"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#MakeRaw.split"><span class="id" title="definition">split</span></a> <a class="idref" href="MMaps.AVL.html#x:921"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#m:920"><span class="id" title="variable">m</span></a><a class="idref" href="MMaps.AVL.html#5fff6fc502757d8037705f89a213c279"><span class="id" title="notation">)#</span></a><a class="idref" href="MMaps.AVL.html#5fff6fc502757d8037705f89a213c279"><span class="id" title="notation">l</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#Gt"><span class="id" title="constructor">Gt</span></a> ⇒ <a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <a class="idref" href="MMaps.AVL.html#y:922"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#12f28f29f6f580fcde6b740c6479ca68"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#MakeRaw.split"><span class="id" title="definition">split</span></a> <a class="idref" href="MMaps.AVL.html#x:921"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#m:920"><span class="id" title="variable">m</span></a><a class="idref" href="MMaps.AVL.html#12f28f29f6f580fcde6b740c6479ca68"><span class="id" title="notation">)#</span></a><a class="idref" href="MMaps.AVL.html#12f28f29f6f580fcde6b740c6479ca68"><span class="id" title="notation">r</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.split"><span class="id" title="definition">split</span></a> <span class="id" title="var">x</span> <span class="id" title="var">m</span>); <span class="id" title="tactic">intros</span>; <span class="id" title="var">cleansplit</span>.<br/>
&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">case</span> <a class="idref" href="MMaps.AVL.html#K.compare"><span class="id" title="axiom">K.compare</span></a>.<br/>
&nbsp;- <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">case</span> <a class="idref" href="MMaps.AVL.html#K.compare_spec"><span class="id" title="axiom">K.compare_spec</span></a>; <span class="id" title="tactic">trivial</span>; <span class="id" title="var">order</span>.<br/>
&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.join_find"><span class="id" title="lemma">join_find</span></a>, <span class="id" title="var">IHt0</span>; <span class="id" title="var">autok</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">case</span> <a class="idref" href="MMaps.AVL.html#K.compare_spec"><span class="id" title="axiom">K.compare_spec</span></a>; <span class="id" title="tactic">trivial</span>; <span class="id" title="var">order</span>.<br/>
&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.join_find"><span class="id" title="lemma">join_find</span></a>, <span class="id" title="var">IHt0</span>; <span class="id" title="var">autok</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">case</span> <a class="idref" href="MMaps.AVL.html#K.compare_spec"><span class="id" title="axiom">K.compare_spec</span></a>; <span class="id" title="tactic">trivial</span>; <span class="id" title="var">order</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab101"></a><h3 class="section">Concatenation</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.concat_in" class="idref" href="#MakeRaw.concat_in"><span class="id" title="lemma">concat_in</span></a> <a id="m1:924" class="idref" href="#m1:924"><span class="id" title="binder">m1</span></a> <a id="m2:925" class="idref" href="#m2:925"><span class="id" title="binder">m2</span></a> <a id="y:926" class="idref" href="#y:926"><span class="id" title="binder">y</span></a> :<br/>
&nbsp;<a class="idref" href="MMaps.AVL.html#y:926"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#MakeRaw.concat"><span class="id" title="definition">concat</span></a> <a class="idref" href="MMaps.AVL.html#m1:924"><span class="id" title="variable">m1</span></a> <a class="idref" href="MMaps.AVL.html#m2:925"><span class="id" title="variable">m2</span></a><a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="MMaps.AVL.html#y:926"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <a class="idref" href="MMaps.AVL.html#m1:924"><span class="id" title="variable">m1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="MMaps.AVL.html#y:926"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <a class="idref" href="MMaps.AVL.html#m2:925"><span class="id" title="variable">m2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.concat"><span class="id" title="definition">concat</span></a> <span class="id" title="var">m1</span> <span class="id" title="var">m2</span>); <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">factornode</span> <span class="id" title="var">m1</span>.<br/>
&nbsp;- <span class="id" title="var">intuition_in</span>.<br/>
&nbsp;- <span class="id" title="var">intuition_in</span>.<br/>
&nbsp;- <span class="id" title="var">factor_remove_min</span> <span class="id" title="var">m2</span> <span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.join_in"><span class="id" title="lemma">join_in</span></a>, (<a class="idref" href="MMaps.AVL.html#MakeRaw.remove_min_in"><span class="id" title="lemma">remove_min_in</span></a> <span class="id" title="var">R</span>); <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intuition</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="MakeRaw.concat_ok" class="idref" href="#MakeRaw.concat_ok"><span class="id" title="instance">concat_ok</span></a> <a id="m1:927" class="idref" href="#m1:927"><span class="id" title="binder">m1</span></a> <a id="m2:928" class="idref" href="#m2:928"><span class="id" title="binder">m2</span></a> `{<a id="Ok0:929" class="idref" href="#Ok0:929"><span class="id" title="binder">!</span></a><a id="Ok0:929" class="idref" href="#Ok0:929"><span class="id" title="binder">Ok</span></a> <a id="Ok0:929" class="idref" href="#Ok0:929"><span class="id" title="binder">m1</span></a>, <a id="Ok1:930" class="idref" href="#Ok1:930"><span class="id" title="binder">!</span></a><a id="Ok1:930" class="idref" href="#Ok1:930"><span class="id" title="binder">Ok</span></a> <a id="Ok1:930" class="idref" href="#Ok1:930"><span class="id" title="binder">m2</span></a>} : <a class="idref" href="MMaps.AVL.html#m1:927"><span class="id" title="variable">m1</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVL.html#m2:928"><span class="id" title="variable">m2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;<a class="idref" href="MMaps.AVL.html#MakeRaw.Ok"><span class="id" title="class">Ok</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.concat"><span class="id" title="definition">concat</span></a> <a class="idref" href="MMaps.AVL.html#m1:927"><span class="id" title="variable">m1</span></a> <a class="idref" href="MMaps.AVL.html#m2:928"><span class="id" title="variable">m2</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.concat"><span class="id" title="definition">concat</span></a> <span class="id" title="var">m1</span> <span class="id" title="var">m2</span>); <span class="id" title="tactic">intros</span> <span class="id" title="var">LT</span>; <span class="id" title="tactic">auto</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="var">factornode</span> <span class="id" title="var">m1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">factor_remove_min</span> <span class="id" title="var">m2</span> <span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.join_ok"><span class="id" title="instance">join_ok</span></a>, <a class="idref" href="MMaps.AVL.html#MakeRaw.create_ok"><span class="id" title="instance">create_ok</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.remove_min_ok"><span class="id" title="instance">remove_min_ok</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">y</span> <span class="id" title="var">Hy</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">LT</span>; <span class="id" title="tactic">trivial</span>. <span class="id" title="tactic">rewrite</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.remove_min_in"><span class="id" title="lemma">remove_min_in</span></a> <span class="id" title="var">R</span>); <span class="id" title="var">now</span> <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.remove_min_gt"><span class="id" title="lemma">remove_min_gt</span></a> <span class="id" title="var">R</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="MakeRaw.oelse" class="idref" href="#MakeRaw.oelse"><span class="id" title="definition">oelse</span></a> {<a id="A:931" class="idref" href="#A:931"><span class="id" title="binder">A</span></a>} (<a id="o1:932" class="idref" href="#o1:932"><span class="id" title="binder">o1</span></a> <a id="o2:933" class="idref" href="#o2:933"><span class="id" title="binder">o2</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="MMaps.AVL.html#A:931"><span class="id" title="variable">A</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MMaps.AVL.html#o1:932"><span class="id" title="variable">o1</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">x</span> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="MMaps.AVL.html#o2:933"><span class="id" title="variable">o2</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.concat_find" class="idref" href="#MakeRaw.concat_find"><span class="id" title="lemma">concat_find</span></a> <a id="m1:935" class="idref" href="#m1:935"><span class="id" title="binder">m1</span></a> <a id="m2:936" class="idref" href="#m2:936"><span class="id" title="binder">m2</span></a> <a id="y:937" class="idref" href="#y:937"><span class="id" title="binder">y</span></a> `{<a id="Ok0:938" class="idref" href="#Ok0:938"><span class="id" title="binder">!</span></a><a id="Ok0:938" class="idref" href="#Ok0:938"><span class="id" title="binder">Ok</span></a> <a id="Ok0:938" class="idref" href="#Ok0:938"><span class="id" title="binder">m1</span></a>, <a id="Ok1:939" class="idref" href="#Ok1:939"><span class="id" title="binder">!</span></a><a id="Ok1:939" class="idref" href="#Ok1:939"><span class="id" title="binder">Ok</span></a> <a id="Ok1:939" class="idref" href="#Ok1:939"><span class="id" title="binder">m2</span></a>} : <a class="idref" href="MMaps.AVL.html#m1:935"><span class="id" title="variable">m1</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVL.html#m2:936"><span class="id" title="variable">m2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;<a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <a class="idref" href="MMaps.AVL.html#y:937"><span class="id" title="variable">y</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.concat"><span class="id" title="definition">concat</span></a> <a class="idref" href="MMaps.AVL.html#m1:935"><span class="id" title="variable">m1</span></a> <a class="idref" href="MMaps.AVL.html#m2:936"><span class="id" title="variable">m2</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.oelse"><span class="id" title="definition">oelse</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <a class="idref" href="MMaps.AVL.html#y:937"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#m2:936"><span class="id" title="variable">m2</span></a>) (<a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <a class="idref" href="MMaps.AVL.html#y:937"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#m1:935"><span class="id" title="variable">m1</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.concat"><span class="id" title="definition">concat</span></a> <span class="id" title="var">m1</span> <span class="id" title="var">m2</span>); <span class="id" title="tactic">intros</span> <span class="id" title="var">B</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">factornode</span> <span class="id" title="var">m1</span>.<br/>
&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <span class="id" title="var">y</span> <span class="id" title="var">m2</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;- <span class="id" title="var">factor_remove_min</span> <span class="id" title="var">m2</span> <span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">m1</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <span class="id" title="var">xd</span><a class="idref" href="MMaps.GenTree.html#6498f4b98d8d188be6bde7da0b9ffb6f"><span class="id" title="notation">#1</span></a>).<br/>
&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">z</span> <span class="id" title="var">Hz</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">B</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.remove_min_in"><span class="id" title="lemma">remove_min_in</span></a> <span class="id" title="var">R</span>). <span class="id" title="var">now</span> <span class="id" title="tactic">left</span>. }<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.join_find"><span class="id" title="lemma">join_find</span></a>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.remove_min_find"><span class="id" title="lemma">remove_min_find</span></a> <span class="id" title="var">R</span> <span class="id" title="var">y</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span> <a class="idref" href="MMaps.AVL.html#K.compare_spec"><span class="id" title="axiom">K.compare_spec</span></a>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <span class="id" title="var">y</span> <span class="id" title="var">m2'</span>); <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.not_find_iff"><span class="id" title="lemma">not_find_iff</span></a>; <span class="id" title="var">eautom</span>.<br/>
&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.create_ok"><span class="id" title="instance">create_ok</span></a>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> ×. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.remove_min_gt"><span class="id" title="lemma">remove_min_gt</span></a> <span class="id" title="var">R</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.concat_bindings" class="idref" href="#MakeRaw.concat_bindings"><span class="id" title="lemma">concat_bindings</span></a> <a id="m1:940" class="idref" href="#m1:940"><span class="id" title="binder">m1</span></a> <a id="m2:941" class="idref" href="#m2:941"><span class="id" title="binder">m2</span></a> `{<a id="Ok0:942" class="idref" href="#Ok0:942"><span class="id" title="binder">!</span></a><a id="Ok0:942" class="idref" href="#Ok0:942"><span class="id" title="binder">Ok</span></a> <a id="Ok0:942" class="idref" href="#Ok0:942"><span class="id" title="binder">m1</span></a>, <a id="Ok1:943" class="idref" href="#Ok1:943"><span class="id" title="binder">!</span></a><a id="Ok1:943" class="idref" href="#Ok1:943"><span class="id" title="binder">Ok</span></a> <a id="Ok1:943" class="idref" href="#Ok1:943"><span class="id" title="binder">m2</span></a>} : <a class="idref" href="MMaps.AVL.html#m1:940"><span class="id" title="variable">m1</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVL.html#m2:941"><span class="id" title="variable">m2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;<a class="idref" href="MMaps.AVL.html#MakeRaw.bindings"><span class="id" title="definition">bindings</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.concat"><span class="id" title="definition">concat</span></a> <a class="idref" href="MMaps.AVL.html#m1:940"><span class="id" title="variable">m1</span></a> <a class="idref" href="MMaps.AVL.html#m2:941"><span class="id" title="variable">m2</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.bindings"><span class="id" title="definition">bindings</span></a> <a class="idref" href="MMaps.AVL.html#m1:940"><span class="id" title="variable">m1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.bindings"><span class="id" title="definition">bindings</span></a> <a class="idref" href="MMaps.AVL.html#m2:941"><span class="id" title="variable">m2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.concat"><span class="id" title="definition">concat</span></a> <span class="id" title="var">m1</span> <span class="id" title="var">m2</span>); <span class="id" title="tactic">intros</span> <span class="id" title="var">B</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">factornode</span> <span class="id" title="var">m1</span>.<br/>
&nbsp;- <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a>.<br/>
&nbsp;- <span class="id" title="var">factor_remove_min</span> <span class="id" title="var">m2</span> <span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">m1</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <span class="id" title="var">xd</span><a class="idref" href="MMaps.GenTree.html#6498f4b98d8d188be6bde7da0b9ffb6f"><span class="id" title="notation">#1</span></a>).<br/>
&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">z</span> <span class="id" title="var">Hz</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">B</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.remove_min_in"><span class="id" title="lemma">remove_min_in</span></a> <span class="id" title="var">R</span>). <span class="id" title="var">now</span> <span class="id" title="tactic">left</span>. }<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.join_bindings"><span class="id" title="lemma">join_bindings</span></a>, <a class="idref" href="MMaps.AVL.html#MakeRaw.create_bindings"><span class="id" title="lemma">create_bindings</span></a>.<br/>
&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">rewrite</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.remove_min_bindings"><span class="id" title="lemma">remove_min_bindings</span></a> <span class="id" title="var">R</span>). <span class="id" title="tactic">f_equal</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">xd</span>.<br/>
&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.create_ok"><span class="id" title="instance">create_ok</span></a>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> ×. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.remove_min_gt"><span class="id" title="lemma">remove_min_gt</span></a> <span class="id" title="var">R</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab102"></a><h3 class="section">Filter and partition</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.filter_in_inv" class="idref" href="#MakeRaw.filter_in_inv"><span class="id" title="lemma">filter_in_inv</span></a> <a id="f:944" class="idref" href="#f:944"><span class="id" title="binder">f</span></a> (<a id="m:945" class="idref" href="#m:945"><span class="id" title="binder">m</span></a>:<a class="idref" href="MMaps.AVL.html#MakeRaw.t"><span class="id" title="definition">t</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Elt.elt"><span class="id" title="variable">elt</span></a>) <a id="x:946" class="idref" href="#x:946"><span class="id" title="binder">x</span></a> : <a class="idref" href="MMaps.AVL.html#x:946"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.filter"><span class="id" title="definition">filter</span></a> <a class="idref" href="MMaps.AVL.html#f:944"><span class="id" title="variable">f</span></a> <a class="idref" href="MMaps.AVL.html#m:945"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#x:946"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <a class="idref" href="MMaps.AVL.html#m:945"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">h</span> <span class="id" title="var">l</span> <span class="id" title="var">IHl</span> <span class="id" title="var">y</span> <span class="id" title="var">d</span> <span class="id" title="var">r</span> <span class="id" title="var">IHr</span>]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;<span class="id" title="tactic">case</span> (<span class="id" title="var">f</span> <span class="id" title="var">y</span> <span class="id" title="var">d</span>); <span class="id" title="tactic">rewrite</span> ?<a class="idref" href="MMaps.AVL.html#MakeRaw.join_in"><span class="id" title="lemma">join_in</span></a>, ?<a class="idref" href="MMaps.AVL.html#MakeRaw.concat_in"><span class="id" title="lemma">concat_in</span></a>; <span class="id" title="var">intuition_in</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="MakeRaw.filter_ok" class="idref" href="#MakeRaw.filter_ok"><span class="id" title="instance">filter_ok</span></a> <a id="f:947" class="idref" href="#f:947"><span class="id" title="binder">f</span></a> (<a id="m:948" class="idref" href="#m:948"><span class="id" title="binder">m</span></a>:<a class="idref" href="MMaps.AVL.html#MakeRaw.t"><span class="id" title="definition">t</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Elt.elt"><span class="id" title="variable">elt</span></a>) `(<a id="Ok0:949" class="idref" href="#Ok0:949"><span class="id" title="binder">!</span></a><a id="Ok0:949" class="idref" href="#Ok0:949"><span class="id" title="binder">Ok</span></a> <a id="Ok0:949" class="idref" href="#Ok0:949"><span class="id" title="binder">m</span></a>) : <a class="idref" href="MMaps.AVL.html#MakeRaw.Ok"><span class="id" title="class">Ok</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.filter"><span class="id" title="definition">filter</span></a> <a class="idref" href="MMaps.AVL.html#f:947"><span class="id" title="variable">f</span></a> <a class="idref" href="MMaps.AVL.html#m:948"><span class="id" title="variable">m</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">h</span> <span class="id" title="var">l</span> <span class="id" title="var">IHl</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">r</span> <span class="id" title="var">IHr</span>]; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">autok</span>.<br/>
&nbsp;<span class="id" title="var">invok</span>. <span class="id" title="tactic">case</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span>).<br/>
&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.join_ok"><span class="id" title="instance">join_ok</span></a>, <a class="idref" href="MMaps.AVL.html#MakeRaw.create_ok"><span class="id" title="instance">create_ok</span></a>; <span class="id" title="var">autok</span>;<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">y</span> <span class="id" title="var">Hy</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.filter_in_inv"><span class="id" title="lemma">filter_in_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hy</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.concat_ok"><span class="id" title="instance">concat_ok</span></a>; <span class="id" title="var">autok</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">y</span> <span class="id" title="var">Hy</span> <span class="id" title="var">z</span> <span class="id" title="var">Hz</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.filter_in_inv"><span class="id" title="lemma">filter_in_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hy</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.filter_in_inv"><span class="id" title="lemma">filter_in_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hz</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.filter_spec" class="idref" href="#MakeRaw.filter_spec"><span class="id" title="lemma">filter_spec</span></a> <a id="f:950" class="idref" href="#f:950"><span class="id" title="binder">f</span></a> <a id="m:951" class="idref" href="#m:951"><span class="id" title="binder">m</span></a> `(<a id="Ok0:952" class="idref" href="#Ok0:952"><span class="id" title="binder">!</span></a><a id="Ok0:952" class="idref" href="#Ok0:952"><span class="id" title="binder">Ok</span></a> <a id="Ok0:952" class="idref" href="#Ok0:952"><span class="id" title="binder">m</span></a>) :<br/>
&nbsp;<a class="idref" href="MMaps.AVL.html#MakeRaw.bindings"><span class="id" title="definition">bindings</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.filter"><span class="id" title="definition">filter</span></a> <a class="idref" href="MMaps.AVL.html#f:950"><span class="id" title="variable">f</span></a> <a class="idref" href="MMaps.AVL.html#m:951"><span class="id" title="variable">m</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">List.filter</span></a> (<span class="id" title="keyword">fun</span> '<a id="pat:955" class="idref" href="#pat:955"><span class="id" title="binder">(</span></a><a id="k:954" class="idref" href="#k:954"><span class="id" title="binder"><span id="pat:955" class="id">k</span></span></a><a id="pat:955" class="idref" href="#pat:955"><span class="id" title="binder">,</span></a><a id="e:953" class="idref" href="#e:953"><span class="id" title="binder"><span id="pat:955" class="id">e</span></span></a><a id="pat:955" class="idref" href="#pat:955"><span class="id" title="binder">)</span></a> ⇒ <a class="idref" href="MMaps.AVL.html#f:950"><span class="id" title="variable">f</span></a> <a class="idref" href="MMaps.AVL.html#k:954"><span class="id" title="variable">k</span></a> <a class="idref" href="MMaps.AVL.html#e:953"><span class="id" title="variable">e</span></a>) (<a class="idref" href="MMaps.AVL.html#MakeRaw.bindings"><span class="id" title="definition">bindings</span></a> <a class="idref" href="MMaps.AVL.html#m:951"><span class="id" title="variable">m</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="var">invok</span>.<br/>
&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.bindings_node"><span class="id" title="lemma">bindings_node</span></a>, !<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Lists.List.html#filter_app"><span class="id" title="lemma">filter_app</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">f</span>.<br/>
&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.join_bindings"><span class="id" title="lemma">join_bindings</span></a>, <a class="idref" href="MMaps.AVL.html#MakeRaw.create_bindings"><span class="id" title="lemma">create_bindings</span></a>. <span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.create_ok"><span class="id" title="instance">create_ok</span></a>; <span class="id" title="var">autok</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">y</span> <span class="id" title="var">Hy</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.filter_in_inv"><span class="id" title="lemma">filter_in_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hy</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.concat_bindings"><span class="id" title="lemma">concat_bindings</span></a>; <span class="id" title="var">autok</span>. <span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">y</span> <span class="id" title="var">Hy</span> <span class="id" title="var">z</span> <span class="id" title="var">Hz</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.filter_in_inv"><span class="id" title="lemma">filter_in_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hy</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.filter_in_inv"><span class="id" title="lemma">filter_in_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hz</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> <span class="id" title="var">t1</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.partition_fst" class="idref" href="#MakeRaw.partition_fst"><span class="id" title="lemma">partition_fst</span></a> <a id="f:956" class="idref" href="#f:956"><span class="id" title="binder">f</span></a> (<a id="m:957" class="idref" href="#m:957"><span class="id" title="binder">m</span></a>:<a class="idref" href="MMaps.AVL.html#MakeRaw.t"><span class="id" title="definition">t</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Elt.elt"><span class="id" title="variable">elt</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.partition"><span class="id" title="definition">partition</span></a> <a class="idref" href="MMaps.AVL.html#f:956"><span class="id" title="variable">f</span></a> <a class="idref" href="MMaps.AVL.html#m:957"><span class="id" title="variable">m</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.filter"><span class="id" title="definition">filter</span></a> <a class="idref" href="MMaps.AVL.html#f:956"><span class="id" title="variable">f</span></a> <a class="idref" href="MMaps.AVL.html#m:957"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">h</span> <span class="id" title="var">l</span> <span class="id" title="var">IHl</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">r</span> <span class="id" title="var">IHr</span>]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHl</span>, &lt;-<span class="id" title="var">IHr</span>.<br/>
&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.partition"><span class="id" title="definition">partition</span></a> <span class="id" title="var">f</span> <span class="id" title="var">l</span>), (<a class="idref" href="MMaps.AVL.html#MakeRaw.partition"><span class="id" title="definition">partition</span></a> <span class="id" title="var">f</span> <span class="id" title="var">r</span>), <span class="id" title="var">f</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.partition_snd" class="idref" href="#MakeRaw.partition_snd"><span class="id" title="lemma">partition_snd</span></a> <a id="f:958" class="idref" href="#f:958"><span class="id" title="binder">f</span></a> (<a id="m:959" class="idref" href="#m:959"><span class="id" title="binder">m</span></a>:<a class="idref" href="MMaps.AVL.html#MakeRaw.t"><span class="id" title="definition">t</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Elt.elt"><span class="id" title="variable">elt</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.partition"><span class="id" title="definition">partition</span></a> <a class="idref" href="MMaps.AVL.html#f:958"><span class="id" title="variable">f</span></a> <a class="idref" href="MMaps.AVL.html#m:959"><span class="id" title="variable">m</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.filter"><span class="id" title="definition">filter</span></a> (<span class="id" title="keyword">fun</span> <a id="k:960" class="idref" href="#k:960"><span class="id" title="binder">k</span></a> <a id="e:961" class="idref" href="#e:961"><span class="id" title="binder">e</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#negb"><span class="id" title="definition">negb</span></a> (<a class="idref" href="MMaps.AVL.html#f:958"><span class="id" title="variable">f</span></a> <a class="idref" href="MMaps.AVL.html#k:960"><span class="id" title="variable">k</span></a> <a class="idref" href="MMaps.AVL.html#e:961"><span class="id" title="variable">e</span></a>)) <a class="idref" href="MMaps.AVL.html#m:959"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">h</span> <span class="id" title="var">l</span> <span class="id" title="var">IHl</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">r</span> <span class="id" title="var">IHr</span>]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHl</span>, &lt;-<span class="id" title="var">IHr</span>.<br/>
&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.partition"><span class="id" title="definition">partition</span></a> <span class="id" title="var">f</span> <span class="id" title="var">l</span>), (<a class="idref" href="MMaps.AVL.html#MakeRaw.partition"><span class="id" title="definition">partition</span></a> <span class="id" title="var">f</span> <span class="id" title="var">r</span>), <span class="id" title="var">f</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="MakeRaw.partition_ok1" class="idref" href="#MakeRaw.partition_ok1"><span class="id" title="instance">partition_ok1</span></a> <a id="f:962" class="idref" href="#f:962"><span class="id" title="binder">f</span></a> (<a id="m:963" class="idref" href="#m:963"><span class="id" title="binder">m</span></a>:<a class="idref" href="MMaps.AVL.html#MakeRaw.t"><span class="id" title="definition">t</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Elt.elt"><span class="id" title="variable">elt</span></a>) : <a class="idref" href="MMaps.AVL.html#MakeRaw.Ok"><span class="id" title="class">Ok</span></a> <a class="idref" href="MMaps.AVL.html#m:963"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Ok"><span class="id" title="class">Ok</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.partition"><span class="id" title="definition">partition</span></a> <a class="idref" href="MMaps.AVL.html#f:962"><span class="id" title="variable">f</span></a> <a class="idref" href="MMaps.AVL.html#m:963"><span class="id" title="variable">m</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.partition_fst"><span class="id" title="lemma">partition_fst</span></a>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> ×.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="MakeRaw.partition_ok2" class="idref" href="#MakeRaw.partition_ok2"><span class="id" title="instance">partition_ok2</span></a> <a id="f:964" class="idref" href="#f:964"><span class="id" title="binder">f</span></a> (<a id="m:965" class="idref" href="#m:965"><span class="id" title="binder">m</span></a>:<a class="idref" href="MMaps.AVL.html#MakeRaw.t"><span class="id" title="definition">t</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Elt.elt"><span class="id" title="variable">elt</span></a>) : <a class="idref" href="MMaps.AVL.html#MakeRaw.Ok"><span class="id" title="class">Ok</span></a> <a class="idref" href="MMaps.AVL.html#m:965"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Ok"><span class="id" title="class">Ok</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.partition"><span class="id" title="definition">partition</span></a> <a class="idref" href="MMaps.AVL.html#f:964"><span class="id" title="variable">f</span></a> <a class="idref" href="MMaps.AVL.html#m:965"><span class="id" title="variable">m</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.partition_snd"><span class="id" title="lemma">partition_snd</span></a>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> ×.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.partition_spec" class="idref" href="#MakeRaw.partition_spec"><span class="id" title="lemma">partition_spec</span></a> <a id="f:966" class="idref" href="#f:966"><span class="id" title="binder">f</span></a> <a id="m:967" class="idref" href="#m:967"><span class="id" title="binder">m</span></a> `(<a id="Ok0:968" class="idref" href="#Ok0:968"><span class="id" title="binder">!</span></a><a id="Ok0:968" class="idref" href="#Ok0:968"><span class="id" title="binder">Ok</span></a> <a id="Ok0:968" class="idref" href="#Ok0:968"><span class="id" title="binder">m</span></a>) :<br/>
&nbsp;<a class="idref" href="MMaps.Interface.html#prodmap"><span class="id" title="definition">prodmap</span></a> (@<a class="idref" href="MMaps.AVL.html#MakeRaw.bindings"><span class="id" title="definition">bindings</span></a> <span class="id" title="var">_</span>) (<a class="idref" href="MMaps.AVL.html#MakeRaw.partition"><span class="id" title="definition">partition</span></a> <a class="idref" href="MMaps.AVL.html#f:966"><span class="id" title="variable">f</span></a> <a class="idref" href="MMaps.AVL.html#m:967"><span class="id" title="variable">m</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Lists.List.html#partition"><span class="id" title="definition">List.partition</span></a> (<span class="id" title="keyword">fun</span> '<a id="pat:971" class="idref" href="#pat:971"><span class="id" title="binder">(</span></a><a id="k:970" class="idref" href="#k:970"><span class="id" title="binder"><span id="pat:971" class="id">k</span></span></a><a id="pat:971" class="idref" href="#pat:971"><span class="id" title="binder">,</span></a><a id="e:969" class="idref" href="#e:969"><span class="id" title="binder"><span id="pat:971" class="id">e</span></span></a><a id="pat:971" class="idref" href="#pat:971"><span class="id" title="binder">)</span></a> ⇒ <a class="idref" href="MMaps.AVL.html#f:966"><span class="id" title="variable">f</span></a> <a class="idref" href="MMaps.AVL.html#k:970"><span class="id" title="variable">k</span></a> <a class="idref" href="MMaps.AVL.html#e:969"><span class="id" title="variable">e</span></a>) (<a class="idref" href="MMaps.AVL.html#MakeRaw.bindings"><span class="id" title="definition">bindings</span></a> <a class="idref" href="MMaps.AVL.html#m:967"><span class="id" title="variable">m</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.Utils.html#partition_filter"><span class="id" title="lemma">partition_filter</span></a>.<br/>
&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#surjective_pairing"><span class="id" title="lemma">surjective_pairing</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.partition"><span class="id" title="definition">partition</span></a> <span class="id" title="var">f</span> <span class="id" title="var">m</span>)).<br/>
&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.partition_fst"><span class="id" title="lemma">partition_fst</span></a>, <a class="idref" href="MMaps.AVL.html#MakeRaw.partition_snd"><span class="id" title="lemma">partition_snd</span></a>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MMaps.Interface.html#prodmap"><span class="id" title="definition">prodmap</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.filter_spec"><span class="id" title="lemma">filter_spec</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.filter_spec"><span class="id" title="lemma">filter_spec</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">f_equiv</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">intros</span> (<span class="id" title="var">k</span>,<span class="id" title="var">e</span>) ? &lt;-.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.Elt"><span class="id" title="section">Elt</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="MakeRaw.Mapo" class="idref" href="#MakeRaw.Mapo"><span class="id" title="section">Mapo</span></a>.<br/>
<span class="id" title="keyword">Variable</span> <a id="MakeRaw.Mapo.elt" class="idref" href="#MakeRaw.Mapo.elt"><span class="id" title="variable">elt</span></a> <a id="MakeRaw.Mapo.elt'" class="idref" href="#MakeRaw.Mapo.elt'"><span class="id" title="variable">elt'</span></a> : <span class="id" title="keyword">Type</span>.<br/>
<span class="id" title="keyword">Variable</span> <a id="MakeRaw.Mapo.f" class="idref" href="#MakeRaw.Mapo.f"><span class="id" title="variable">f</span></a> : <a class="idref" href="MMaps.AVL.html#MakeRaw.key"><span class="id" title="definition">key</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Mapo.elt"><span class="id" title="variable">elt</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Mapo.elt'"><span class="id" title="variable">elt'</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.mapo_in" class="idref" href="#MakeRaw.mapo_in"><span class="id" title="lemma">mapo_in</span></a> <a id="m:978" class="idref" href="#m:978"><span class="id" title="binder">m</span></a> <a id="x:979" class="idref" href="#x:979"><span class="id" title="binder">x</span></a> :<br/>
&nbsp;<a class="idref" href="MMaps.AVL.html#x:979"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#MakeRaw.mapo"><span class="id" title="definition">mapo</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Mapo.f"><span class="id" title="variable">f</span></a> <a class="idref" href="MMaps.AVL.html#m:978"><span class="id" title="variable">m</span></a><a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="y:980" class="idref" href="#y:980"><span class="id" title="binder">y</span></a> <a id="d:981" class="idref" href="#d:981"><span class="id" title="binder">d</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="MMaps.AVL.html#y:980"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#3bfccbf8a360975b3a5598ce76c32491"><span class="id" title="notation">==</span></a> <a class="idref" href="MMaps.AVL.html#x:979"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.MapsTo"><span class="id" title="inductive">MapsTo</span></a> <a class="idref" href="MMaps.AVL.html#x:979"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#d:981"><span class="id" title="variable">d</span></a> <a class="idref" href="MMaps.AVL.html#m:978"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Mapo.f"><span class="id" title="variable">f</span></a> <a class="idref" href="MMaps.AVL.html#y:980"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#d:981"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.mapo"><span class="id" title="definition">mapo</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Mapo.f"><span class="id" title="variable">f</span></a> <span class="id" title="var">m</span>); <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
- <span class="id" title="var">intuition_in</span>.<br/>
- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.join_in"><span class="id" title="lemma">join_in</span></a>; <span class="id" title="tactic">intros</span> [<span class="id" title="var">H</span>|[<span class="id" title="var">H</span>|<span class="id" title="var">H</span>]].<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">∃</span> <span class="id" title="var">x0</span>, <span class="id" title="var">d</span>. <span class="id" title="tactic">do</span> 2 (<span class="id" title="tactic">split</span>; <span class="id" title="var">autom</span>). <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">IHt0</span> <span class="id" title="var">H</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">y</span> &amp; <span class="id" title="var">e</span> &amp; ? &amp; ? &amp; ?). <span class="id" title="tactic">∃</span> <span class="id" title="var">y</span>, <span class="id" title="var">e</span>. <span class="id" title="var">autom</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">IHt1</span> <span class="id" title="var">H</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">y</span> &amp; <span class="id" title="var">e</span> &amp; ? &amp; ? &amp; ?). <span class="id" title="tactic">∃</span> <span class="id" title="var">y</span>, <span class="id" title="var">e</span>. <span class="id" title="var">autom</span>.<br/>
- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.concat_in"><span class="id" title="lemma">concat_in</span></a>; <span class="id" title="tactic">intros</span> [<span class="id" title="var">H</span>|<span class="id" title="var">H</span>].<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">IHt0</span> <span class="id" title="var">H</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">y</span> &amp; <span class="id" title="var">e</span> &amp; ? &amp; ? &amp; ?). <span class="id" title="tactic">∃</span> <span class="id" title="var">y</span>, <span class="id" title="var">e</span>. <span class="id" title="var">autom</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">IHt1</span> <span class="id" title="var">H</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">y</span> &amp; <span class="id" title="var">e</span> &amp; ? &amp; ? &amp; ?). <span class="id" title="tactic">∃</span> <span class="id" title="var">y</span>, <span class="id" title="var">e</span>. <span class="id" title="var">autom</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.mapo_lt" class="idref" href="#MakeRaw.mapo_lt"><span class="id" title="lemma">mapo_lt</span></a> <a id="m:982" class="idref" href="#m:982"><span class="id" title="binder">m</span></a> <a id="x:983" class="idref" href="#x:983"><span class="id" title="binder">x</span></a> : <a class="idref" href="MMaps.AVL.html#m:982"><span class="id" title="variable">m</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVL.html#x:983"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.mapo"><span class="id" title="definition">mapo</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Mapo.f"><span class="id" title="variable">f</span></a> <a class="idref" href="MMaps.AVL.html#m:982"><span class="id" title="variable">m</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVL.html#x:983"><span class="id" title="variable">x</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span> <span class="id" title="var">y</span> <span class="id" title="var">Hy</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.mapo_in"><span class="id" title="lemma">mapo_in</span></a> <span class="id" title="var">Hy</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">y'</span> &amp; <span class="id" title="var">e</span> &amp; ? &amp; ? &amp; ?). <span class="id" title="var">order</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.mapo_gt" class="idref" href="#MakeRaw.mapo_gt"><span class="id" title="lemma">mapo_gt</span></a> <a id="m:984" class="idref" href="#m:984"><span class="id" title="binder">m</span></a> <a id="x:985" class="idref" href="#x:985"><span class="id" title="binder">x</span></a> : <a class="idref" href="MMaps.AVL.html#x:985"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVL.html#m:984"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#x:985"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.mapo"><span class="id" title="definition">mapo</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Mapo.f"><span class="id" title="variable">f</span></a> <a class="idref" href="MMaps.AVL.html#m:984"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span> <span class="id" title="var">y</span> <span class="id" title="var">Hy</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.mapo_in"><span class="id" title="lemma">mapo_in</span></a> <span class="id" title="var">Hy</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">y'</span> &amp; <span class="id" title="var">e</span> &amp; ? &amp; ? &amp; ?). <span class="id" title="var">order</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Local Hint Resolve</span> <span class="id" title="var">mapo_lt</span> <span class="id" title="var">mapo_gt</span> : <span class="id" title="var">map</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="MakeRaw.mapo_ok" class="idref" href="#MakeRaw.mapo_ok"><span class="id" title="instance">mapo_ok</span></a> <a id="m:986" class="idref" href="#m:986"><span class="id" title="binder">m</span></a> `{<a id="Ok0:987" class="idref" href="#Ok0:987"><span class="id" title="binder">!</span></a><a id="Ok0:987" class="idref" href="#Ok0:987"><span class="id" title="binder">Ok</span></a> <a id="Ok0:987" class="idref" href="#Ok0:987"><span class="id" title="binder">m</span></a>} : <a class="idref" href="MMaps.AVL.html#MakeRaw.Ok"><span class="id" title="class">Ok</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.mapo"><span class="id" title="definition">mapo</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Mapo.f"><span class="id" title="variable">f</span></a> <a class="idref" href="MMaps.AVL.html#m:986"><span class="id" title="variable">m</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.mapo"><span class="id" title="definition">mapo</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Mapo.f"><span class="id" title="variable">f</span></a> <span class="id" title="var">m</span>); <span class="id" title="tactic">simpl</span>; <span class="id" title="var">autok</span>; <span class="id" title="var">invok</span>.<br/>
- <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.join_ok"><span class="id" title="instance">join_ok</span></a>, <a class="idref" href="MMaps.AVL.html#MakeRaw.create_ok"><span class="id" title="instance">create_ok</span></a>; <span class="id" title="var">autok</span>.<br/>
- <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.concat_ok"><span class="id" title="instance">concat_ok</span></a>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.between"><span class="id" title="lemma">between</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">map</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">nonify</span> <span class="id" title="var">e</span> :=<br/>
&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">e</span> <span class="id" title="keyword">with</span> (@<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Mapo.elt"><span class="id" title="variable">elt</span></a>) <span class="id" title="tactic">by</span><br/>
&nbsp;&nbsp;(<span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.not_find_iff"><span class="id" title="lemma">not_find_iff</span></a>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">intro</span>; <span class="id" title="var">order</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="MakeRaw.obind" class="idref" href="#MakeRaw.obind"><span class="id" title="definition">obind</span></a> {<a id="A:988" class="idref" href="#A:988"><span class="id" title="binder">A</span></a> <a id="B:989" class="idref" href="#B:989"><span class="id" title="binder">B</span></a>} (<a id="o:990" class="idref" href="#o:990"><span class="id" title="binder">o</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="MMaps.AVL.html#A:988"><span class="id" title="variable">A</span></a>) (<a id="f:991" class="idref" href="#f:991"><span class="id" title="binder">f</span></a>:<a class="idref" href="MMaps.AVL.html#A:988"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="MMaps.AVL.html#B:989"><span class="id" title="variable">B</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MMaps.AVL.html#o:990"><span class="id" title="variable">o</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">a</span> ⇒ <a class="idref" href="MMaps.AVL.html#f:991"><span class="id" title="variable">f</span></a> <span class="id" title="var">a</span> | <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.mapo_find" class="idref" href="#MakeRaw.mapo_find"><span class="id" title="lemma">mapo_find</span></a> <a id="m:993" class="idref" href="#m:993"><span class="id" title="binder">m</span></a> <a id="x:994" class="idref" href="#x:994"><span class="id" title="binder">x</span></a> `{<a id="Ok0:995" class="idref" href="#Ok0:995"><span class="id" title="binder">!</span></a><a id="Ok0:995" class="idref" href="#Ok0:995"><span class="id" title="binder">Ok</span></a> <a id="Ok0:995" class="idref" href="#Ok0:995"><span class="id" title="binder">m</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="y:996" class="idref" href="#y:996"><span class="id" title="binder">y</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="MMaps.AVL.html#y:996"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#3bfccbf8a360975b3a5598ce76c32491"><span class="id" title="notation">==</span></a> <a class="idref" href="MMaps.AVL.html#x:994"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <a class="idref" href="MMaps.AVL.html#x:994"><span class="id" title="variable">x</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.mapo"><span class="id" title="definition">mapo</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Mapo.f"><span class="id" title="variable">f</span></a> <a class="idref" href="MMaps.AVL.html#m:993"><span class="id" title="variable">m</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.obind"><span class="id" title="definition">obind</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <a class="idref" href="MMaps.AVL.html#x:994"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#m:993"><span class="id" title="variable">m</span></a>) (<a class="idref" href="MMaps.AVL.html#MakeRaw.Mapo.f"><span class="id" title="variable">f</span></a> <a class="idref" href="MMaps.AVL.html#y:996"><span class="id" title="variable">y</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.mapo"><span class="id" title="definition">mapo</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Mapo.f"><span class="id" title="variable">f</span></a> <span class="id" title="var">m</span>); <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="var">invok</span>.<br/>
- <span class="id" title="var">now</span> <span class="id" title="tactic">∃</span> <span class="id" title="var">x</span>.<br/>
- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.join_find"><span class="id" title="lemma">join_find</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">case</span> <a class="idref" href="MMaps.AVL.html#K.compare_spec"><span class="id" title="axiom">K.compare_spec</span></a>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">now</span> <span class="id" title="tactic">∃</span> <span class="id" title="var">x0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHt0</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">y'</span> &amp; ? &amp; ?); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">y'</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHt1</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">y'</span> &amp; ? &amp; ?); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">y'</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>; <span class="id" title="var">chok</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.mapo_lt"><span class="id" title="lemma">mapo_lt</span></a>, <a class="idref" href="MMaps.AVL.html#MakeRaw.mapo_gt"><span class="id" title="lemma">mapo_gt</span></a> <span class="id" title="keyword">with</span> ×.<br/>
- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.concat_find"><span class="id" title="lemma">concat_find</span></a>; <span class="id" title="var">autok</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHt1</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">y'</span> &amp; ? &amp; -&gt;); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHt0</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">y''</span> &amp; ? &amp; -&gt;); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span> <a class="idref" href="MMaps.AVL.html#K.compare_spec"><span class="id" title="axiom">K.compare_spec</span></a>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">nonify</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <span class="id" title="var">x</span> <span class="id" title="var">r</span>). <span class="id" title="var">nonify</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <span class="id" title="var">x</span> <span class="id" title="var">l</span>). <span class="id" title="tactic">simpl</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">∃</span> <span class="id" title="var">x0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">nonify</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <span class="id" title="var">x</span> <span class="id" title="var">r</span>). <span class="id" title="var">now</span> <span class="id" title="tactic">∃</span> <span class="id" title="var">y''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">nonify</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <span class="id" title="var">x</span> <span class="id" title="var">l</span>). <span class="id" title="tactic">∃</span> <span class="id" title="var">y'</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <span class="id" title="var">x</span> <span class="id" title="var">r</span>); <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.Mapo.f"><span class="id" title="variable">f</span></a> <span class="id" title="var">y'</span> <span class="id" title="var">e</span>).<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.between"><span class="id" title="lemma">between</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">x0</span>; <span class="id" title="var">autom</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.Mapo"><span class="id" title="section">Mapo</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="MakeRaw.Gmerge" class="idref" href="#MakeRaw.Gmerge"><span class="id" title="section">Gmerge</span></a>.<br/>
<span class="id" title="keyword">Variable</span> <a id="MakeRaw.Gmerge.elt" class="idref" href="#MakeRaw.Gmerge.elt"><span class="id" title="variable">elt</span></a> <a id="MakeRaw.Gmerge.elt'" class="idref" href="#MakeRaw.Gmerge.elt'"><span class="id" title="variable">elt'</span></a> <a id="MakeRaw.Gmerge.elt''" class="idref" href="#MakeRaw.Gmerge.elt''"><span class="id" title="variable">elt''</span></a> : <span class="id" title="keyword">Type</span>.<br/>
<span class="id" title="keyword">Variable</span> <a id="MakeRaw.Gmerge.f0" class="idref" href="#MakeRaw.Gmerge.f0"><span class="id" title="variable">f0</span></a> : <a class="idref" href="MMaps.AVL.html#MakeRaw.key"><span class="id" title="definition">key</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Gmerge.elt"><span class="id" title="variable">elt</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Gmerge.elt'"><span class="id" title="variable">elt'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Gmerge.elt''"><span class="id" title="variable">elt''</span></a>.<br/>
<span class="id" title="keyword">Variable</span> <a id="MakeRaw.Gmerge.f" class="idref" href="#MakeRaw.Gmerge.f"><span class="id" title="variable">f</span></a> : <a class="idref" href="MMaps.AVL.html#MakeRaw.key"><span class="id" title="definition">key</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Gmerge.elt"><span class="id" title="variable">elt</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Gmerge.elt'"><span class="id" title="variable">elt'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Gmerge.elt''"><span class="id" title="variable">elt''</span></a>.<br/>
<span class="id" title="keyword">Variable</span> <a id="MakeRaw.Gmerge.mapl" class="idref" href="#MakeRaw.Gmerge.mapl"><span class="id" title="variable">mapl</span></a> : <a class="idref" href="MMaps.AVL.html#MakeRaw.t"><span class="id" title="definition">t</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Gmerge.elt"><span class="id" title="variable">elt</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.t"><span class="id" title="definition">t</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Gmerge.elt''"><span class="id" title="variable">elt''</span></a>.<br/>
<span class="id" title="keyword">Variable</span> <a id="MakeRaw.Gmerge.mapr" class="idref" href="#MakeRaw.Gmerge.mapr"><span class="id" title="variable">mapr</span></a> : <a class="idref" href="MMaps.AVL.html#MakeRaw.t"><span class="id" title="definition">t</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Gmerge.elt'"><span class="id" title="variable">elt'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.t"><span class="id" title="definition">t</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Gmerge.elt''"><span class="id" title="variable">elt''</span></a>.<br/>
<span class="id" title="keyword">Hypothesis</span> <a id="MakeRaw.Gmerge.f0_f" class="idref" href="#MakeRaw.Gmerge.f0_f"><span class="id" title="variable">f0_f</span></a> : <span class="id" title="keyword">∀</span> <a id="x:1011" class="idref" href="#x:1011"><span class="id" title="binder">x</span></a> <a id="d:1012" class="idref" href="#d:1012"><span class="id" title="binder">d</span></a> <a id="o:1013" class="idref" href="#o:1013"><span class="id" title="binder">o</span></a>, <a class="idref" href="MMaps.AVL.html#MakeRaw.Gmerge.f"><span class="id" title="variable">f</span></a> <a class="idref" href="MMaps.AVL.html#x:1011"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#d:1012"><span class="id" title="variable">d</span></a> <a class="idref" href="MMaps.AVL.html#o:1013"><span class="id" title="variable">o</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Gmerge.f0"><span class="id" title="variable">f0</span></a> <a class="idref" href="MMaps.AVL.html#x:1011"><span class="id" title="variable">x</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MMaps.AVL.html#d:1012"><span class="id" title="variable">d</span></a>) <a class="idref" href="MMaps.AVL.html#o:1013"><span class="id" title="variable">o</span></a>.<br/>
<span class="id" title="keyword">Hypothesis</span> <a id="MakeRaw.Gmerge.mapl_ok" class="idref" href="#MakeRaw.Gmerge.mapl_ok"><span class="id" title="variable">mapl_ok</span></a> : <span class="id" title="keyword">∀</span> <a id="m:1016" class="idref" href="#m:1016"><span class="id" title="binder">m</span></a>, <a class="idref" href="MMaps.AVL.html#MakeRaw.Ok"><span class="id" title="class">Ok</span></a> <a class="idref" href="MMaps.AVL.html#m:1016"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Ok"><span class="id" title="class">Ok</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.Gmerge.mapl"><span class="id" title="variable">mapl</span></a> <a class="idref" href="MMaps.AVL.html#m:1016"><span class="id" title="variable">m</span></a>).<br/>
<span class="id" title="keyword">Hypothesis</span> <a id="MakeRaw.Gmerge.mapr_ok" class="idref" href="#MakeRaw.Gmerge.mapr_ok"><span class="id" title="variable">mapr_ok</span></a> : <span class="id" title="keyword">∀</span> <a id="m':1019" class="idref" href="#m':1019"><span class="id" title="binder">m'</span></a>, <a class="idref" href="MMaps.AVL.html#MakeRaw.Ok"><span class="id" title="class">Ok</span></a> <a class="idref" href="MMaps.AVL.html#m':1019"><span class="id" title="variable">m'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Ok"><span class="id" title="class">Ok</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.Gmerge.mapr"><span class="id" title="variable">mapr</span></a> <a class="idref" href="MMaps.AVL.html#m':1019"><span class="id" title="variable">m'</span></a>).<br/>
<span class="id" title="keyword">Hypothesis</span> <a id="MakeRaw.Gmerge.mapl_f0" class="idref" href="#MakeRaw.Gmerge.mapl_f0"><span class="id" title="variable">mapl_f0</span></a> : <span class="id" title="keyword">∀</span> <a id="x:1022" class="idref" href="#x:1022"><span class="id" title="binder">x</span></a> <a id="m:1023" class="idref" href="#m:1023"><span class="id" title="binder">m</span></a>, <a class="idref" href="MMaps.AVL.html#MakeRaw.Ok"><span class="id" title="class">Ok</span></a> <a class="idref" href="MMaps.AVL.html#m:1023"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="y:1024" class="idref" href="#y:1024"><span class="id" title="binder">y</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="MMaps.AVL.html#y:1024"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#3bfccbf8a360975b3a5598ce76c32491"><span class="id" title="notation">==</span></a> <a class="idref" href="MMaps.AVL.html#x:1022"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <a class="idref" href="MMaps.AVL.html#x:1022"><span class="id" title="variable">x</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.Gmerge.mapl"><span class="id" title="variable">mapl</span></a> <a class="idref" href="MMaps.AVL.html#m:1023"><span class="id" title="variable">m</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.obind"><span class="id" title="definition">obind</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <a class="idref" href="MMaps.AVL.html#x:1022"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#m:1023"><span class="id" title="variable">m</span></a>) (<span class="id" title="keyword">fun</span> <a id="d:1025" class="idref" href="#d:1025"><span class="id" title="binder">d</span></a> ⇒ <a class="idref" href="MMaps.AVL.html#MakeRaw.Gmerge.f0"><span class="id" title="variable">f0</span></a> <a class="idref" href="MMaps.AVL.html#y:1024"><span class="id" title="variable">y</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MMaps.AVL.html#d:1025"><span class="id" title="variable">d</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>).<br/>
<span class="id" title="keyword">Hypothesis</span> <a id="MakeRaw.Gmerge.mapr_f0" class="idref" href="#MakeRaw.Gmerge.mapr_f0"><span class="id" title="variable">mapr_f0</span></a> : <span class="id" title="keyword">∀</span> <a id="x:1028" class="idref" href="#x:1028"><span class="id" title="binder">x</span></a> <a id="m:1029" class="idref" href="#m:1029"><span class="id" title="binder">m</span></a>, <a class="idref" href="MMaps.AVL.html#MakeRaw.Ok"><span class="id" title="class">Ok</span></a> <a class="idref" href="MMaps.AVL.html#m:1029"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="y:1030" class="idref" href="#y:1030"><span class="id" title="binder">y</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="MMaps.AVL.html#y:1030"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#3bfccbf8a360975b3a5598ce76c32491"><span class="id" title="notation">==</span></a> <a class="idref" href="MMaps.AVL.html#x:1028"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <a class="idref" href="MMaps.AVL.html#x:1028"><span class="id" title="variable">x</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.Gmerge.mapr"><span class="id" title="variable">mapr</span></a> <a class="idref" href="MMaps.AVL.html#m:1029"><span class="id" title="variable">m</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.obind"><span class="id" title="definition">obind</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <a class="idref" href="MMaps.AVL.html#x:1028"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#m:1029"><span class="id" title="variable">m</span></a>) (<span class="id" title="keyword">fun</span> <a id="d:1031" class="idref" href="#d:1031"><span class="id" title="binder">d</span></a> ⇒ <a class="idref" href="MMaps.AVL.html#MakeRaw.Gmerge.f0"><span class="id" title="variable">f0</span></a> <a class="idref" href="MMaps.AVL.html#y:1030"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MMaps.AVL.html#d:1031"><span class="id" title="variable">d</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="MakeRaw.gmerge" class="idref" href="#MakeRaw.gmerge"><span class="id" title="abbreviation">gmerge</span></a> := (<a class="idref" href="MMaps.AVL.html#MakeRaw.gmerge"><span class="id" title="definition">gmerge</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Gmerge.f"><span class="id" title="variable">f</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Gmerge.mapl"><span class="id" title="variable">mapl</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Gmerge.mapr"><span class="id" title="variable">mapr</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.gmerge_in" class="idref" href="#MakeRaw.gmerge_in"><span class="id" title="lemma">gmerge_in</span></a> <a id="m:1034" class="idref" href="#m:1034"><span class="id" title="binder">m</span></a> <a id="m':1035" class="idref" href="#m':1035"><span class="id" title="binder">m'</span></a> <a id="y:1036" class="idref" href="#y:1036"><span class="id" title="binder">y</span></a> `{<a id="Ok0:1037" class="idref" href="#Ok0:1037"><span class="id" title="binder">!</span></a><a id="Ok0:1037" class="idref" href="#Ok0:1037"><span class="id" title="binder">Ok</span></a> <a id="Ok0:1037" class="idref" href="#Ok0:1037"><span class="id" title="binder">m</span></a>, <a id="Ok1:1038" class="idref" href="#Ok1:1038"><span class="id" title="binder">!</span></a><a id="Ok1:1038" class="idref" href="#Ok1:1038"><span class="id" title="binder">Ok</span></a> <a id="Ok1:1038" class="idref" href="#Ok1:1038"><span class="id" title="binder">m'</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MMaps.AVL.html#y:1036"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#MakeRaw.gmerge"><span class="id" title="abbreviation">gmerge</span></a> <a class="idref" href="MMaps.AVL.html#m:1034"><span class="id" title="variable">m</span></a> <a class="idref" href="MMaps.AVL.html#m':1035"><span class="id" title="variable">m'</span></a><a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#y:1036"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <a class="idref" href="MMaps.AVL.html#m:1034"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="MMaps.AVL.html#y:1036"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <a class="idref" href="MMaps.AVL.html#m':1035"><span class="id" title="variable">m'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.gmerge"><span class="id" title="abbreviation">gmerge</span></a> <span class="id" title="var">m</span> <span class="id" title="var">m'</span>); <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="var">factornode</span> <span class="id" title="var">m2</span>; <span class="id" title="var">invok</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.find_in"><span class="id" title="lemma">find_in</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.in_find"><span class="id" title="lemma">in_find</span></a> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (@<a class="idref" href="MMaps.AVL.html#MakeRaw.Gmerge.mapr_f0"><span class="id" title="variable">mapr_f0</span></a> <span class="id" title="var">y</span> <span class="id" title="var">m2</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">y'</span> &amp; ? &amp; -&gt;); <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">B</span> <span class="id" title="tactic">in</span> <span class="id" title="var">A</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">elim</span> <span class="id" title="var">A</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">left</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.find_in"><span class="id" title="lemma">find_in</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.in_find"><span class="id" title="lemma">in_find</span></a> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (@<a class="idref" href="MMaps.AVL.html#MakeRaw.Gmerge.mapl_f0"><span class="id" title="variable">mapl_f0</span></a> <span class="id" title="var">y</span> <span class="id" title="var">m2</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">y'</span> &amp; ? &amp; -&gt;); <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">B</span> <span class="id" title="tactic">in</span> <span class="id" title="var">A</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">elim</span> <span class="id" title="var">A</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.join_in"><span class="id" title="lemma">join_in</span></a> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">revert</span> <span class="id" title="var">IHt2</span> <span class="id" title="var">IHt0</span> <span class="id" title="var">H</span>. <span class="id" title="var">cleansplit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (@<a class="idref" href="MMaps.AVL.html#MakeRaw.split_ok_l"><span class="id" title="instance">split_ok_l</span></a> <span class="id" title="var">_</span> <span class="id" title="var">m2</span> <span class="id" title="var">x1</span> <span class="id" title="var">_</span>) (@<a class="idref" href="MMaps.AVL.html#MakeRaw.split_ok_r"><span class="id" title="instance">split_ok_r</span></a> <span class="id" title="var">_</span> <span class="id" title="var">m2</span> <span class="id" title="var">x1</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.split_in_r"><span class="id" title="lemma">split_in_r</span></a>, <a class="idref" href="MMaps.AVL.html#MakeRaw.split_in_l"><span class="id" title="lemma">split_in_l</span></a>; <span class="id" title="var">intuition_in</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.concat_in"><span class="id" title="lemma">concat_in</span></a> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">revert</span> <span class="id" title="var">IHt2</span> <span class="id" title="var">IHt0</span> <span class="id" title="var">H</span>; <span class="id" title="var">cleansplit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (@<a class="idref" href="MMaps.AVL.html#MakeRaw.split_ok_l"><span class="id" title="instance">split_ok_l</span></a> <span class="id" title="var">_</span> <span class="id" title="var">m2</span> <span class="id" title="var">x1</span> <span class="id" title="var">_</span>) (@<a class="idref" href="MMaps.AVL.html#MakeRaw.split_ok_r"><span class="id" title="instance">split_ok_r</span></a> <span class="id" title="var">_</span> <span class="id" title="var">m2</span> <span class="id" title="var">x1</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.split_in_r"><span class="id" title="lemma">split_in_r</span></a>, <a class="idref" href="MMaps.AVL.html#MakeRaw.split_in_l"><span class="id" title="lemma">split_in_l</span></a>; <span class="id" title="var">intuition_in</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.gmerge_lt" class="idref" href="#MakeRaw.gmerge_lt"><span class="id" title="lemma">gmerge_lt</span></a> <a id="m:1039" class="idref" href="#m:1039"><span class="id" title="binder">m</span></a> <a id="m':1040" class="idref" href="#m':1040"><span class="id" title="binder">m'</span></a> <a id="x:1041" class="idref" href="#x:1041"><span class="id" title="binder">x</span></a> `{<a id="Ok0:1042" class="idref" href="#Ok0:1042"><span class="id" title="binder">!</span></a><a id="Ok0:1042" class="idref" href="#Ok0:1042"><span class="id" title="binder">Ok</span></a> <a id="Ok0:1042" class="idref" href="#Ok0:1042"><span class="id" title="binder">m</span></a>, <a id="Ok1:1043" class="idref" href="#Ok1:1043"><span class="id" title="binder">!</span></a><a id="Ok1:1043" class="idref" href="#Ok1:1043"><span class="id" title="binder">Ok</span></a> <a id="Ok1:1043" class="idref" href="#Ok1:1043"><span class="id" title="binder">m'</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MMaps.AVL.html#m:1039"><span class="id" title="variable">m</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVL.html#x:1041"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#m':1040"><span class="id" title="variable">m'</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVL.html#x:1041"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.gmerge"><span class="id" title="abbreviation">gmerge</span></a> <a class="idref" href="MMaps.AVL.html#m:1039"><span class="id" title="variable">m</span></a> <a class="idref" href="MMaps.AVL.html#m':1040"><span class="id" title="variable">m'</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVL.html#x:1041"><span class="id" title="variable">x</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? ? <span class="id" title="var">y</span> <span class="id" title="var">Hy</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.gmerge_in"><span class="id" title="lemma">gmerge_in</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hy</span>; <span class="id" title="var">intuition_in</span>; <span class="id" title="var">order</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.gmerge_gt" class="idref" href="#MakeRaw.gmerge_gt"><span class="id" title="lemma">gmerge_gt</span></a> <a id="m:1044" class="idref" href="#m:1044"><span class="id" title="binder">m</span></a> <a id="m':1045" class="idref" href="#m':1045"><span class="id" title="binder">m'</span></a> <a id="x:1046" class="idref" href="#x:1046"><span class="id" title="binder">x</span></a> `{<a id="Ok0:1047" class="idref" href="#Ok0:1047"><span class="id" title="binder">!</span></a><a id="Ok0:1047" class="idref" href="#Ok0:1047"><span class="id" title="binder">Ok</span></a> <a id="Ok0:1047" class="idref" href="#Ok0:1047"><span class="id" title="binder">m</span></a>, <a id="Ok1:1048" class="idref" href="#Ok1:1048"><span class="id" title="binder">!</span></a><a id="Ok1:1048" class="idref" href="#Ok1:1048"><span class="id" title="binder">Ok</span></a> <a id="Ok1:1048" class="idref" href="#Ok1:1048"><span class="id" title="binder">m'</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MMaps.AVL.html#x:1046"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVL.html#m:1044"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#x:1046"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVL.html#m':1045"><span class="id" title="variable">m'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#x:1046"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.:::x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.gmerge"><span class="id" title="abbreviation">gmerge</span></a> <a class="idref" href="MMaps.AVL.html#m:1044"><span class="id" title="variable">m</span></a> <a class="idref" href="MMaps.AVL.html#m':1045"><span class="id" title="variable">m'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? ? <span class="id" title="var">y</span> <span class="id" title="var">Hy</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.gmerge_in"><span class="id" title="lemma">gmerge_in</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hy</span>; <span class="id" title="var">intuition_in</span>; <span class="id" title="var">order</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Local Hint Resolve</span> <span class="id" title="var">gmerge_lt</span> <span class="id" title="var">gmerge_gt</span> : <span class="id" title="var">map</span>.<br/>
<span class="id" title="keyword">Local Hint Resolve</span> <span class="id" title="var">split_ok_l</span> <span class="id" title="var">split_ok_r</span> <span class="id" title="var">split_lt_l</span> <span class="id" title="var">split_gt_r</span> : <span class="id" title="var">map</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="MakeRaw.gmerge_ok" class="idref" href="#MakeRaw.gmerge_ok"><span class="id" title="instance">gmerge_ok</span></a> <a id="m:1049" class="idref" href="#m:1049"><span class="id" title="binder">m</span></a> <a id="m':1050" class="idref" href="#m':1050"><span class="id" title="binder">m'</span></a> `{<a id="Ok0:1051" class="idref" href="#Ok0:1051"><span class="id" title="binder">!</span></a><a id="Ok0:1051" class="idref" href="#Ok0:1051"><span class="id" title="binder">Ok</span></a> <a id="Ok0:1051" class="idref" href="#Ok0:1051"><span class="id" title="binder">m</span></a>, <a id="Ok1:1052" class="idref" href="#Ok1:1052"><span class="id" title="binder">!</span></a><a id="Ok1:1052" class="idref" href="#Ok1:1052"><span class="id" title="binder">Ok</span></a> <a id="Ok1:1052" class="idref" href="#Ok1:1052"><span class="id" title="binder">m'</span></a>} : <a class="idref" href="MMaps.AVL.html#MakeRaw.Ok"><span class="id" title="class">Ok</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.gmerge"><span class="id" title="abbreviation">gmerge</span></a> <a class="idref" href="MMaps.AVL.html#m:1049"><span class="id" title="variable">m</span></a> <a class="idref" href="MMaps.AVL.html#m':1050"><span class="id" title="variable">m'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.gmerge"><span class="id" title="abbreviation">gmerge</span></a> <span class="id" title="var">m</span> <span class="id" title="var">m'</span>); <span class="id" title="tactic">auto</span>; <span class="id" title="var">factornode</span> <span class="id" title="var">m2</span>; <span class="id" title="var">invok</span>;<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.join_ok"><span class="id" title="instance">join_ok</span></a>, <a class="idref" href="MMaps.AVL.html#MakeRaw.create_ok"><span class="id" title="instance">create_ok</span></a> || <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.concat_ok"><span class="id" title="instance">concat_ok</span></a>);<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">IHt2</span> <span class="id" title="var">IHt0</span>; <span class="id" title="var">cleansplit</span>; <span class="id" title="tactic">intuition</span> (<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.between"><span class="id" title="lemma">between</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">x1</span>; <span class="id" title="var">autom</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.oelse_none_r" class="idref" href="#MakeRaw.oelse_none_r"><span class="id" title="lemma">oelse_none_r</span></a> {<a id="A:1053" class="idref" href="#A:1053"><span class="id" title="binder">A</span></a>} (<a id="o:1054" class="idref" href="#o:1054"><span class="id" title="binder">o</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="MMaps.AVL.html#A:1053"><span class="id" title="variable">A</span></a>) : <a class="idref" href="MMaps.AVL.html#MakeRaw.oelse"><span class="id" title="definition">oelse</span></a> <a class="idref" href="MMaps.AVL.html#o:1054"><span class="id" title="variable">o</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MMaps.AVL.html#o:1054"><span class="id" title="variable">o</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">nonify</span> <span class="id" title="var">e</span> :=<br/>
&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">E</span> := <span class="id" title="tactic">fresh</span> "E" <span class="id" title="tactic">in</span><br/>
&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">U</span> := <span class="id" title="tactic">fresh</span> "U" <span class="id" title="tactic">in</span><br/>
&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">E</span> : <span class="id" title="var">e</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>);<br/>
&nbsp;&nbsp;&nbsp;[ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.not_find_iff"><span class="id" title="lemma">not_find_iff</span></a>; <span class="id" title="var">autok</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">U</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.gmerge_in"><span class="id" title="lemma">gmerge_in</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">U</span>; <span class="id" title="var">intuition_in</span>; <span class="id" title="var">order</span><br/>
&nbsp;&nbsp;&nbsp;| <span class="id" title="tactic">rewrite</span> <span class="id" title="var">E</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">E</span> ].<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.gmerge_find" class="idref" href="#MakeRaw.gmerge_find"><span class="id" title="lemma">gmerge_find</span></a> <a id="m:1055" class="idref" href="#m:1055"><span class="id" title="binder">m</span></a> <a id="m':1056" class="idref" href="#m':1056"><span class="id" title="binder">m'</span></a> <a id="x:1057" class="idref" href="#x:1057"><span class="id" title="binder">x</span></a> `{<a id="Ok0:1058" class="idref" href="#Ok0:1058"><span class="id" title="binder">!</span></a><a id="Ok0:1058" class="idref" href="#Ok0:1058"><span class="id" title="binder">Ok</span></a> <a id="Ok0:1058" class="idref" href="#Ok0:1058"><span class="id" title="binder">m</span></a>, <a id="Ok1:1059" class="idref" href="#Ok1:1059"><span class="id" title="binder">!</span></a><a id="Ok1:1059" class="idref" href="#Ok1:1059"><span class="id" title="binder">Ok</span></a> <a id="Ok1:1059" class="idref" href="#Ok1:1059"><span class="id" title="binder">m'</span></a>} :<br/>
&nbsp;<a class="idref" href="MMaps.AVL.html#x:1057"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <a class="idref" href="MMaps.AVL.html#m:1055"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="MMaps.AVL.html#x:1057"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <a class="idref" href="MMaps.AVL.html#m':1056"><span class="id" title="variable">m'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="y:1060" class="idref" href="#y:1060"><span class="id" title="binder">y</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="MMaps.AVL.html#y:1060"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#3bfccbf8a360975b3a5598ce76c32491"><span class="id" title="notation">==</span></a> <a class="idref" href="MMaps.AVL.html#x:1057"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <a class="idref" href="MMaps.AVL.html#x:1057"><span class="id" title="variable">x</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.gmerge"><span class="id" title="abbreviation">gmerge</span></a> <a class="idref" href="MMaps.AVL.html#m:1055"><span class="id" title="variable">m</span></a> <a class="idref" href="MMaps.AVL.html#m':1056"><span class="id" title="variable">m'</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Gmerge.f0"><span class="id" title="variable">f0</span></a> <a class="idref" href="MMaps.AVL.html#y:1060"><span class="id" title="variable">y</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <a class="idref" href="MMaps.AVL.html#x:1057"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#m:1055"><span class="id" title="variable">m</span></a>) (<a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <a class="idref" href="MMaps.AVL.html#x:1057"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#m':1056"><span class="id" title="variable">m'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.gmerge"><span class="id" title="abbreviation">gmerge</span></a> <span class="id" title="var">m</span> <span class="id" title="var">m'</span>);<br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="var">factornode</span> <span class="id" title="var">m2</span>; <span class="id" title="var">invok</span>; <span class="id" title="tactic">rewrite</span> ?<a class="idref" href="MMaps.AVL.html#MakeRaw.in_node"><span class="id" title="lemma">in_node</span></a>, ?<a class="idref" href="MMaps.AVL.html#MakeRaw.in_leaf"><span class="id" title="lemma">in_leaf</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [[ ]|<span class="id" title="var">H</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (@<a class="idref" href="MMaps.AVL.html#MakeRaw.Gmerge.mapr_f0"><span class="id" title="variable">mapr_f0</span></a> <span class="id" title="var">x</span> <span class="id" title="var">m2</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">y</span>,(<span class="id" title="var">Hy</span>,<span class="id" title="var">E</span>)); <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">y</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">E</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.in_find"><span class="id" title="lemma">in_find</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <span class="id" title="var">x</span> <span class="id" title="var">m2</span>); <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">H</span>|[ ]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (@<a class="idref" href="MMaps.AVL.html#MakeRaw.Gmerge.mapl_f0"><span class="id" title="variable">mapl_f0</span></a> <span class="id" title="var">x</span> <span class="id" title="var">m2</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">y</span>,(<span class="id" title="var">Hy</span>,<span class="id" title="var">E</span>)); <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">y</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">E</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.in_find"><span class="id" title="lemma">in_find</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <span class="id" title="var">x</span> <span class="id" title="var">m2</span>); <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">generalize</span> (@<a class="idref" href="MMaps.AVL.html#MakeRaw.split_ok_l"><span class="id" title="instance">split_ok_l</span></a> <span class="id" title="var">_</span> <span class="id" title="var">m2</span> <span class="id" title="var">x1</span> <span class="id" title="var">_</span>) (@<a class="idref" href="MMaps.AVL.html#MakeRaw.split_ok_r"><span class="id" title="instance">split_ok_r</span></a> <span class="id" title="var">_</span> <span class="id" title="var">m2</span> <span class="id" title="var">x1</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (@<a class="idref" href="MMaps.AVL.html#MakeRaw.split_find"><span class="id" title="lemma">split_find</span></a> <span class="id" title="var">_</span> <span class="id" title="var">m2</span> <span class="id" title="var">x1</span> <span class="id" title="var">x</span>); <span class="id" title="var">autok</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">e1</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.join_find"><span class="id" title="lemma">join_find</span></a> <span class="id" title="tactic">by</span> (<span class="id" title="var">cleansplit</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="var">autok</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">case</span> <a class="idref" href="MMaps.AVL.html#K.compare_spec"><span class="id" title="axiom">K.compare_spec</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">∃</span> <span class="id" title="var">x1</span>. <span class="id" title="tactic">split</span>; <span class="id" title="var">autom</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">e3</span>, <a class="idref" href="MMaps.AVL.html#MakeRaw.Gmerge.f0_f"><span class="id" title="variable">f0_f</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHt2</span>; <span class="id" title="var">autom</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">IHt2</span> <span class="id" title="var">IHt0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cleansplit</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.split_in_l"><span class="id" title="lemma">split_in_l</span></a>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">intuition_in</span>; <span class="id" title="var">order</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHt0</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">IHt2</span> <span class="id" title="var">IHt0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cleansplit</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.split_in_r"><span class="id" title="lemma">split_in_r</span></a>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">intuition_in</span>; <span class="id" title="var">order</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">generalize</span> (@<a class="idref" href="MMaps.AVL.html#MakeRaw.split_ok_l"><span class="id" title="instance">split_ok_l</span></a> <span class="id" title="var">_</span> <span class="id" title="var">m2</span> <span class="id" title="var">x1</span> <span class="id" title="var">_</span>) (@<a class="idref" href="MMaps.AVL.html#MakeRaw.split_ok_r"><span class="id" title="instance">split_ok_r</span></a> <span class="id" title="var">_</span> <span class="id" title="var">m2</span> <span class="id" title="var">x1</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (@<a class="idref" href="MMaps.AVL.html#MakeRaw.split_find"><span class="id" title="lemma">split_find</span></a> <span class="id" title="var">_</span> <span class="id" title="var">m2</span> <span class="id" title="var">x1</span> <span class="id" title="var">x</span>); <span class="id" title="var">autok</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (@<a class="idref" href="MMaps.AVL.html#MakeRaw.split_lt_l"><span class="id" title="lemma">split_lt_l</span></a> <span class="id" title="var">_</span> <span class="id" title="var">m2</span> <span class="id" title="var">x1</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (@<a class="idref" href="MMaps.AVL.html#MakeRaw.split_gt_r"><span class="id" title="lemma">split_gt_r</span></a> <span class="id" title="var">_</span> <span class="id" title="var">m2</span> <span class="id" title="var">x1</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">e1</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.concat_find"><span class="id" title="lemma">concat_find</span></a> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.between"><span class="id" title="lemma">between</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">x1</span>; <span class="id" title="var">autok</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span> <a class="idref" href="MMaps.AVL.html#K.compare_spec"><span class="id" title="axiom">K.compare_spec</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">clear</span> <span class="id" title="var">IHt0</span> <span class="id" title="var">IHt2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">x1</span>. <span class="id" title="tactic">split</span>; <span class="id" title="var">autom</span>. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="MMaps.AVL.html#MakeRaw.Gmerge.f0_f"><span class="id" title="variable">f0_f</span></a>, <span class="id" title="var">e2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">nonify</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <span class="id" title="var">x</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.gmerge"><span class="id" title="abbreviation">gmerge</span></a> <span class="id" title="var">r1</span> <span class="id" title="var">r2'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">nonify</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <span class="id" title="var">x</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.gmerge"><span class="id" title="abbreviation">gmerge</span></a> <span class="id" title="var">l1</span> <span class="id" title="var">l2'</span>)). <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">nonify</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <span class="id" title="var">x</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.gmerge"><span class="id" title="abbreviation">gmerge</span></a> <span class="id" title="var">r1</span> <span class="id" title="var">r2'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHt2</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">IHt2</span> <span class="id" title="var">IHt0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">intuition_in</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">order</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="var">cleansplit</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.split_in_l"><span class="id" title="lemma">split_in_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">nonify</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <span class="id" title="var">x</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.gmerge"><span class="id" title="abbreviation">gmerge</span></a> <span class="id" title="var">l1</span> <span class="id" title="var">l2'</span>)). <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.oelse_none_r"><span class="id" title="lemma">oelse_none_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHt0</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">IHt2</span> <span class="id" title="var">IHt0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">intuition_in</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">order</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="var">cleansplit</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.split_in_r"><span class="id" title="lemma">split_in_r</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.Gmerge"><span class="id" title="section">Gmerge</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="MakeRaw.Merge" class="idref" href="#MakeRaw.Merge"><span class="id" title="section">Merge</span></a>.<br/>
<span class="id" title="keyword">Variable</span> <a id="MakeRaw.Merge.elt" class="idref" href="#MakeRaw.Merge.elt"><span class="id" title="variable">elt</span></a> <a id="MakeRaw.Merge.elt'" class="idref" href="#MakeRaw.Merge.elt'"><span class="id" title="variable">elt'</span></a> <a id="MakeRaw.Merge.elt''" class="idref" href="#MakeRaw.Merge.elt''"><span class="id" title="variable">elt''</span></a> : <span class="id" title="keyword">Type</span>.<br/>
<span class="id" title="keyword">Variable</span> <a id="MakeRaw.Merge.f" class="idref" href="#MakeRaw.Merge.f"><span class="id" title="variable">f</span></a> : <a class="idref" href="MMaps.AVL.html#MakeRaw.key"><span class="id" title="definition">key</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Merge.elt"><span class="id" title="variable">elt</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Merge.elt'"><span class="id" title="variable">elt'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Merge.elt''"><span class="id" title="variable">elt''</span></a>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="MakeRaw.merge_ok" class="idref" href="#MakeRaw.merge_ok"><span class="id" title="instance">merge_ok</span></a> <a id="m:1069" class="idref" href="#m:1069"><span class="id" title="binder">m</span></a> <a id="m':1070" class="idref" href="#m':1070"><span class="id" title="binder">m'</span></a> `{<a id="Ok0:1071" class="idref" href="#Ok0:1071"><span class="id" title="binder">!</span></a><a id="Ok0:1071" class="idref" href="#Ok0:1071"><span class="id" title="binder">Ok</span></a> <a id="Ok0:1071" class="idref" href="#Ok0:1071"><span class="id" title="binder">m</span></a>, <a id="Ok1:1072" class="idref" href="#Ok1:1072"><span class="id" title="binder">!</span></a><a id="Ok1:1072" class="idref" href="#Ok1:1072"><span class="id" title="binder">Ok</span></a> <a id="Ok1:1072" class="idref" href="#Ok1:1072"><span class="id" title="binder">m'</span></a>} : <a class="idref" href="MMaps.AVL.html#MakeRaw.Ok"><span class="id" title="class">Ok</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.merge"><span class="id" title="definition">merge</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Merge.f"><span class="id" title="variable">f</span></a> <a class="idref" href="MMaps.AVL.html#m:1069"><span class="id" title="variable">m</span></a> <a class="idref" href="MMaps.AVL.html#m':1070"><span class="id" title="variable">m'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.merge"><span class="id" title="definition">merge</span></a>; <span class="id" title="tactic">intros</span>.<br/>
<span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.gmerge_ok"><span class="id" title="instance">gmerge_ok</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.Merge.f"><span class="id" title="variable">f</span></a>;<br/>
&nbsp;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.mapo_ok"><span class="id" title="instance">mapo_ok</span></a>, <a class="idref" href="MMaps.AVL.html#MakeRaw.mapo_find"><span class="id" title="lemma">mapo_find</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.merge_spec1" class="idref" href="#MakeRaw.merge_spec1"><span class="id" title="lemma">merge_spec1</span></a> <a id="m:1073" class="idref" href="#m:1073"><span class="id" title="binder">m</span></a> <a id="m':1074" class="idref" href="#m':1074"><span class="id" title="binder">m'</span></a> <a id="x:1075" class="idref" href="#x:1075"><span class="id" title="binder">x</span></a> `{<a id="Ok0:1076" class="idref" href="#Ok0:1076"><span class="id" title="binder">!</span></a><a id="Ok0:1076" class="idref" href="#Ok0:1076"><span class="id" title="binder">Ok</span></a> <a id="Ok0:1076" class="idref" href="#Ok0:1076"><span class="id" title="binder">m</span></a>, <a id="Ok1:1077" class="idref" href="#Ok1:1077"><span class="id" title="binder">!</span></a><a id="Ok1:1077" class="idref" href="#Ok1:1077"><span class="id" title="binder">Ok</span></a> <a id="Ok1:1077" class="idref" href="#Ok1:1077"><span class="id" title="binder">m'</span></a>} :<br/>
&nbsp;<a class="idref" href="MMaps.AVL.html#x:1075"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <a class="idref" href="MMaps.AVL.html#m:1073"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="MMaps.AVL.html#x:1075"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <a class="idref" href="MMaps.AVL.html#m':1074"><span class="id" title="variable">m'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="y:1078" class="idref" href="#y:1078"><span class="id" title="binder">y</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="MMaps.AVL.html#y:1078"><span class="id" title="variable">y</span></a> <a class="idref" href="MMaps.AVL.html#3bfccbf8a360975b3a5598ce76c32491"><span class="id" title="notation">==</span></a> <a class="idref" href="MMaps.AVL.html#x:1075"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <a class="idref" href="MMaps.AVL.html#x:1075"><span class="id" title="variable">x</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.merge"><span class="id" title="definition">merge</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Merge.f"><span class="id" title="variable">f</span></a> <a class="idref" href="MMaps.AVL.html#m:1073"><span class="id" title="variable">m</span></a> <a class="idref" href="MMaps.AVL.html#m':1074"><span class="id" title="variable">m'</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Merge.f"><span class="id" title="variable">f</span></a> <a class="idref" href="MMaps.AVL.html#y:1078"><span class="id" title="variable">y</span></a> (<a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <a class="idref" href="MMaps.AVL.html#x:1075"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#m:1073"><span class="id" title="variable">m</span></a>) (<a class="idref" href="MMaps.AVL.html#MakeRaw.find"><span class="id" title="definition">find</span></a> <a class="idref" href="MMaps.AVL.html#x:1075"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#m':1074"><span class="id" title="variable">m'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.merge"><span class="id" title="definition">merge</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">edestruct</span> (<a class="idref" href="MMaps.AVL.html#MakeRaw.gmerge_find"><span class="id" title="lemma">gmerge_find</span></a> (<span class="id" title="var">f0</span>:=<a class="idref" href="MMaps.AVL.html#MakeRaw.Merge.f"><span class="id" title="variable">f</span></a>)) <span class="id" title="keyword">as</span> (<span class="id" title="var">y</span>,(<span class="id" title="var">Hy</span>,<span class="id" title="var">E</span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.mapo_ok"><span class="id" title="instance">mapo_ok</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.mapo_find"><span class="id" title="lemma">mapo_find</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.mapo_find"><span class="id" title="lemma">mapo_find</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="MakeRaw.merge_spec2" class="idref" href="#MakeRaw.merge_spec2"><span class="id" title="lemma">merge_spec2</span></a> <a id="m:1079" class="idref" href="#m:1079"><span class="id" title="binder">m</span></a> <a id="m':1080" class="idref" href="#m':1080"><span class="id" title="binder">m'</span></a> <a id="x:1081" class="idref" href="#x:1081"><span class="id" title="binder">x</span></a> `{<a id="Ok0:1082" class="idref" href="#Ok0:1082"><span class="id" title="binder">!</span></a><a id="Ok0:1082" class="idref" href="#Ok0:1082"><span class="id" title="binder">Ok</span></a> <a id="Ok0:1082" class="idref" href="#Ok0:1082"><span class="id" title="binder">m</span></a>, <a id="Ok1:1083" class="idref" href="#Ok1:1083"><span class="id" title="binder">!</span></a><a id="Ok1:1083" class="idref" href="#Ok1:1083"><span class="id" title="binder">Ok</span></a> <a id="Ok1:1083" class="idref" href="#Ok1:1083"><span class="id" title="binder">m'</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MMaps.AVL.html#x:1081"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVL.html#MakeRaw.merge"><span class="id" title="definition">merge</span></a> <a class="idref" href="MMaps.AVL.html#MakeRaw.Merge.f"><span class="id" title="variable">f</span></a> <a class="idref" href="MMaps.AVL.html#m:1079"><span class="id" title="variable">m</span></a> <a class="idref" href="MMaps.AVL.html#m':1080"><span class="id" title="variable">m'</span></a><a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVL.html#x:1081"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <a class="idref" href="MMaps.AVL.html#m:1079"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="MMaps.AVL.html#x:1081"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVL.html#614b6fdfcfcc3407ab169267969be7fa"><span class="id" title="notation">∈</span></a> <a class="idref" href="MMaps.AVL.html#m':1080"><span class="id" title="variable">m'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.merge"><span class="id" title="definition">merge</span></a>; <span class="id" title="tactic">intros</span>.<br/>
<span class="id" title="tactic">eapply</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.gmerge_in"><span class="id" title="lemma">gmerge_in</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">f0</span>:=<a class="idref" href="MMaps.AVL.html#MakeRaw.Merge.f"><span class="id" title="variable">f</span></a>); <span class="id" title="tactic">try</span> <span class="id" title="var">eassumption</span>;<br/>
&nbsp;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.mapo_ok"><span class="id" title="instance">mapo_ok</span></a>, <a class="idref" href="MMaps.AVL.html#MakeRaw.mapo_find"><span class="id" title="lemma">mapo_find</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MMaps.AVL.html#MakeRaw.Merge"><span class="id" title="section">Merge</span></a>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MMaps.AVL.html#MakeRaw"><span class="id" title="module">MakeRaw</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab103"></a><h2 class="section">Encapsulation</h2>


<div class="paragraph"> </div>

   Now, in order to really provide a functor implementing <span class="inlinecode"><a class="idref" href="MMaps.Raw.html#S"><span class="id" title="module">S</span></a></span>, we need
   to encapsulate everything into a type of binary search trees. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Module</span> <a id="IntMake" class="idref" href="#IntMake"><span class="id" title="module">IntMake</span></a> (<span class="id" title="var">I</span>:<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#Int"><span class="id" title="module">Int</span></a>)(<span class="id" title="var">K</span>: <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Structures.Orders.html#OrderedType"><span class="id" title="module">OrderedType</span></a>) &lt;: <a class="idref" href="MMaps.Interface.html#S"><span class="id" title="module">Interface.S</span></a> <a class="idref" href="MMaps.AVL.html#K"><span class="id" title="module">K</span></a>.<br/>
&nbsp;<span class="id" title="keyword">Module</span> <a id="IntMake.Raw" class="idref" href="#IntMake.Raw"><span class="id" title="module">Raw</span></a> := <a class="idref" href="MMaps.AVL.html#MakeRaw"><span class="id" title="module">MakeRaw</span></a> <a class="idref" href="MMaps.AVL.html#I"><span class="id" title="module">I</span></a> <a class="idref" href="MMaps.AVL.html#K"><span class="id" title="module">K</span></a>.<br/>
&nbsp;<span class="id" title="keyword">Include</span> <a class="idref" href="MMaps.Raw.html#Pack"><span class="id" title="module">Raw.Pack</span></a> <a class="idref" href="MMaps.AVL.html#K"><span class="id" title="module">K</span></a> <a class="idref" href="MMaps.AVL.html#IntMake.Raw"><span class="id" title="module">Raw</span></a>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MMaps.AVL.html#IntMake"><span class="id" title="module">IntMake</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;For&nbsp;concrete&nbsp;use&nbsp;inside&nbsp;Coq,&nbsp;we&nbsp;propose&nbsp;an&nbsp;instantiation&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">Int</span></span>&nbsp;by&nbsp;<span class="inlinecode"><span class="id" title="var">Z</span></span>.&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Module</span> <a id="Make" class="idref" href="#Make"><span class="id" title="module">Make</span></a> (<span class="id" title="var">K</span>:<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Structures.Orders.html#OrderedType"><span class="id" title="module">OrderedType</span></a>) &lt;: <a class="idref" href="MMaps.Interface.html#S"><span class="id" title="module">S</span></a> <a class="idref" href="MMaps.AVL.html#K"><span class="id" title="module">K</span></a> := <a class="idref" href="MMaps.AVL.html#IntMake"><span class="id" title="module">IntMake</span></a>(<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#Z_as_Int"><span class="id" title="module">Z_as_Int</span></a>)(<a class="idref" href="MMaps.AVL.html#K"><span class="id" title="module">K</span></a>).<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr">coqdoc</a> and improved with <a href="https://github.com/palmskog/coqdocjs">CoqdocJS</a> as adapted for <a href="https://github.com/coq-community">coq-community</a>
</div>
</div>
</body>

</html>
